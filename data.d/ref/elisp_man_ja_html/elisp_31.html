<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML lang="ja">
<!-- Created on October, 1  2005 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html;CHARSET=euc-jp">
<META NAME="keywords" CONTENT="meadow,mule,emacs,lisp,elisp,gnus,setting,設定,unix,cygwin">
<META http-equiv="Content-Script-Type" content="text/javascript">
<META NAME="description" CONTENT="Meadowの設定を紹介するページです">
<TITLE>GNU Emacs Lispリファレンスマニュアル:  マーカ</TITLE>

<META NAME="description" CONTENT="GNU Emacs Lispリファレンスマニュアル:  マーカ">
<META NAME="keywords" CONTENT="GNU Emacs Lispリファレンスマニュアル:  マーカ">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

<LINK REL="contents" HREF="elisp_toc.html#SEC_Contents">
<LINK REL="index" HREF="elisp_48.html#SEC681">
<LINK REL="next" HREF="elisp_32.html#SEC483">
<LINK REL="prev" HREF="elisp_30.html#SEC462">

<META http-equiv="Content-Style-Type" content="text/css">
<!-- 鶯と龜 ←日本語EUC誤判別対策用らしい; -->
<link rel="StyleSheet" href="../../../../soft/css/midnight.css" type="text/css" id="css1">
<script type="text/javascript" src="style1.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../soft/css/meadowmemo.css">

</HEAD>
<BODY LANG="ja" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">
<!--Infoseek Analyzer start-->
<script LANGUAGE="javascript">PgNo=6;</script>
<script src="http://js1.infoseek.co.jp/bin/57/00170.js"></script>
<noscript><a href="http://ax1.www.infoseek.co.jp/bin/go?0017057f" target="_blank">
<img src="http://ax1.www.infoseek.co.jp/bin/logo?0017057f" border=0></a></noscript>
<!--Infoseek Analyzer end-->
<a name="top"> </a>

<br><A NAME="SEC474"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_30.html#SEC473"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC475"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_30.html#SEC462"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_32.html#SEC483"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Markers"></A>
<H1> 30. マーカ </H1>
<!--docid::SEC474::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Markers">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Markers</a>"<br>
"texi/elisp21/マーカ"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%DE%A1%BC%A5%AB">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX2116"></A>
<P>

<EM>マーカ</EM>（marker）とは、バッファ内位置をそれを取り巻くテキストを
基準に指定するために使われるLispオブジェクトです。
テキストが挿入されたり削除されると、
バッファの先頭からマーカまでの距離は自動的に変更され、
マーカは同じ前後の文字のあいだに留まります。
<P>

<div class="menuindex"><SCRIPT language=JavaScript src="index30.js"></SCRIPT></div><noscript><BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_31.html#SEC475">30.1 マーカの概要</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The components of a marker, and how it relocates.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_31.html#SEC476">30.2 マーカ向けの述語</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Testing whether an object is a marker.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_31.html#SEC477">30.3 マーカ作成関数</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Making empty markers or markers at certain places.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_31.html#SEC478">30.4 マーカの情報</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Finding the marker's buffer or character position.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_31.html#SEC479">30.5 マーカの挿入型</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Two ways a marker can relocate when you
                               insert where it points.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_31.html#SEC480">30.6 マーカ位置の移動</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Moving the marker to a new buffer or position.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_31.html#SEC481">30.7 マーク</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How "the mark" is implemented with a marker.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_31.html#SEC482">30.8 リージョン</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to access "the region".</TD></TR>
</TABLE></BLOCKQUOTE></noscript>
<P>

<A NAME="Overview of Markers"></A>
<HR SIZE="6">
<br><A NAME="SEC475"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC474"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC476"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Overview of Markers"></A>
<H2> 30.1 マーカの概要 </H2>
<!--docid::SEC475::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Overview%20of%20Markers">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Overview%20of%20Markers</a>"<br>
"texi/elisp21/マーカの概要"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%DE%A1%BC%A5%AB%A4%CE%B3%B5%CD%D7">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

マーカは、バッファとそのバッファ内での位置を指定します。
マーカは、位置を必要とする関数に対して位置を表すものとして使えます。
バッファ内の位置について詳しくはSee 節 <A HREF="elisp_30.html#SEC462">29. バッファ内の位置</A>。
<P>

マーカには2つの属性、つまり、マーカ位置とマーカバッファがあります。
マーカ位置は、当該バッファ内の位置としてのマーカに
（その時点で）等価な整数です。
しかし、マーカの生存期間中、マーカ位置の値はしばしば変化します。
バッファにテキストを挿入したり削除すると、マーカは再配置されます。
これは、バッファの任意の箇所で挿入したり削除したとしても、
2つの文字のあいだに置かれたマーカが
同じ文字のあいだに留まるようにするためです。
再配置によって、マーカに等価な整数は変わります。
<P>

<A NAME="IDX2117"></A>
マーカ位置の周りのテキストを削除すると、
削除されたテキストの前後の文字のあいだにマーカは留まります。
マーカの位置にテキストを挿入すると、
<CODE>insert-before-markers</CODE>（see 節 <A HREF="elisp_32.html#SEC487">31.4 テキストの挿入</A>）で挿入しない限り、
マーカの<EM>挿入型</EM>（insertion type）（see 節 <A HREF="elisp_31.html#SEC479">30.5 マーカの挿入型</A>）に
依存して、マーカは挿入されたテキストのまえかうしろに留まります。
<P>

<A NAME="IDX2118"></A>
バッファに対する挿入や削除では、
すべてのマーカを検査し、必要ならばマーカを再配置する必要があります。
マーカを多数抱えるバッファでは、このために処理が遅くなります。
そのため、マーカが不要であると確信したときには、
マーカがどこも指さないようにしておくのがよいです。
参照されていないマーカは最終的には（ガベッジコレクションで）回収されますが、
それまでは、マーカがどこかを指していると処理時間を浪費します。
<P>

<A NAME="IDX2119"></A>
<A NAME="IDX2120"></A>
マーカ位置にはよく算術演算を施すので、
（<CODE>+</CODE>や<CODE>-</CODE>を含む）ほとんどの算術演算は
引数としてマーカを受け付けます。
そのような場合、マーカはその現在位置を表します。
<P>

マーカを作って位置を設定し、ポイントをマーカへ移動する例を示します。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;; どこも指していない新しいマーカを作る
(setq m1 (make-marker))
     => #&#60;marker in no buffer&#62;

;; マーカm1の位置をカレントバッファの
;; 99番目と100番目の文字のあいだにする
(set-marker m1 100)
     => #&#60;marker at 100 in markers.texi&#62;

;; バッファの先頭に1文字挿入する
(goto-char (point-min))
     => 1
(insert "Q")
     => nil

;; それにしたがって<CODE>m1</CODE>が更新される
m1
     => #&#60;marker at 101 in markers.texi&#62;

;; 同じ位置を指す2つのマーカは<CODE>eq</CODE>ではないが
;; <CODE>equal</CODE>である
(setq m2 (copy-marker m1))
     => #&#60;marker at 101 in markers.texi&#62;
(eq m1 m2)
     => nil
(equal m1 m2)
     => t

;; マーカを使い終ったら、どこも指していないようにする
(set-marker m1 nil)
     => #&#60;marker in no buffer&#62;
</pre></td></tr></table><P>

<A NAME="Predicates on Markers"></A>
<HR SIZE="6">
<br><A NAME="SEC476"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC475"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC477"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Predicates on Markers"></A>
<H2> 30.2 マーカ向けの述語 </H2>
<!--docid::SEC476::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Predicates%20on%20Markers">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Predicates%20on%20Markers</a>"<br>
"texi/elisp21/マーカ向けの述語"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%DE%A1%BC%A5%AB%B8%FE%A4%B1%A4%CE%BD%D2%B8%EC">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

オブジェクトがマーカであるかどうかや、
オブジェクトが整数かマーカであるかどうかを検査できます。
マーカと整数の両者を扱う算術関数に関連して、
後者の検査は有用です。
<P>

<A NAME="IDX2121"></A>
<DL>
<DT><U>Function:</U> <B>markerp</B> <I>object</I>
<DD>この関数は、<VAR>object</VAR>がマーカであれば<CODE>t</CODE>を返し、
さもなければ<CODE>nil</CODE>を返す。
多くの関数がマーカや整数を受け付けるが、
整数はマーカではないことに注意すること。
</DL>
<P>

<A NAME="IDX2122"></A>
<DL>
<DT><U>Function:</U> <B>integer-or-marker-p</B> <I>object</I>
<DD>この関数は、<VAR>object</VAR>が整数かマーカであると<CODE>t</CODE>を返し、
さもなければ<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="IDX2123"></A>
<DL>
<DT><U>Function:</U> <B>number-or-marker-p</B> <I>object</I>
<DD>この関数は、<VAR>object</VAR>が数（整数か浮動小数点数）かマーカであると
<CODE>t</CODE>を返し、さもなければ<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="Creating Markers"></A>
<HR SIZE="6">
<br><A NAME="SEC477"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC476"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC478"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Creating Markers"></A>
<H2> 30.3 マーカ作成関数 </H2>
<!--docid::SEC477::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Creating%20Markers">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Creating%20Markers</a>"<br>
"texi/elisp21/マーカ作成関数"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%DE%A1%BC%A5%AB%BA%EE%C0%AE%B4%D8%BF%F4">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

新たにマーカを作成するときには、そのマーカが、
どこも指していない、現在のポイント位置を指している、
バッファの参照可能部分の先頭や末尾を指している、
別のマーカと同じ箇所を指しているのいずれかにできます。
<P>

<A NAME="IDX2124"></A>
<DL>
<DT><U>Function:</U> <B>make-marker</B>
<DD>この関数は、どこも指していない新たに作成したマーカを返す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(make-marker)
     => #&#60;marker in no buffer&#62;
</pre></td></tr></table></DL>
<P>

<A NAME="IDX2125"></A>
<DL>
<DT><U>Function:</U> <B>point-marker</B>
<DD>この関数は、カレントバッファの現在のポイント位置を
指す新たに作成したマーカを返す。
see 節 <A HREF="elisp_30.html#SEC463">29.1 ポイント</A>。
例については、下記の<CODE>copy-marker</CODE>を参照。
</DL>
<P>

<A NAME="IDX2126"></A>
<DL>
<DT><U>Function:</U> <B>point-min-marker</B>
<DD>この関数は、バッファの参照可能部分の先頭を指す新たに作成したマーカを返す。
ナロイングしていなければ、これはバッファの先頭である。
see 節 <A HREF="elisp_30.html#SEC473">29.4 ナロイング</A>。
</DL>
<P>

<A NAME="IDX2127"></A>
<DL>
<DT><U>Function:</U> <B>point-max-marker</B>
<DD><A NAME="IDX2128"></A>
この関数は、バッファの参照可能部分の末尾を指す新たに作成したマーカを返す。
ナロイングしていなければ、これはバッファの末尾である。
see 節 <A HREF="elisp_30.html#SEC473">29.4 ナロイング</A>。
<P>

本章のソースファイル（の原文）を入れたバッファでの
この関数と<CODE>point-min-marker</CODE>の例を示す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(point-min-marker)
     => #&#60;marker at 1 in markers.texi&#62;
(point-max-marker)
     => #&#60;marker at 15573 in markers.texi&#62;

(narrow-to-region 100 200)
     => nil
(point-min-marker)
     => #&#60;marker at 100 in markers.texi&#62;
(point-max-marker)
     => #&#60;marker at 200 in markers.texi&#62;
</pre></td></tr></table></DL>
<P>

<A NAME="IDX2129"></A>
<DL>
<DT><U>Function:</U> <B>copy-marker</B> <I>marker-or-integer &#38;optional insertion-type</I>
<DD>引数としてマーカを渡されると、<CODE>copy-marker</CODE>は、
<VAR>marker-or-integer</VAR>が指すのと同じ
バッファとバッファ内位置を指す新たなマーカを返す。
引数として整数を渡されると、<CODE>copy-marker</CODE>は、
カレントバッファで位置<VAR>marker-or-integer</VAR>を指す新たなマーカを返す。
<P>

新たなマーカの挿入型は引数<VAR>insertion-type</VAR>で指定する。
see 節 <A HREF="elisp_31.html#SEC479">30.5 マーカの挿入型</A>。
<P>

渡された整数引数が1未満であると、<CODE>copy-marker</CODE>は、
カレントバッファでバッファの先頭を指す新たなマーカを返す。
渡された整数引数がバッファの長さより大きいと、<CODE>copy-marker</CODE>は、
バッファの末尾を指す新たなマーカを返す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(copy-marker 0)
     => #&#60;marker at 1 in markers.texi&#62;

(copy-marker 20000)
     => #&#60;marker at 7572 in markers.texi&#62;
</pre></td></tr></table><P>

<VAR>marker-or-integer</VAR>がマーカでも整数でもないと、エラーを通知する。
</DL>
<P>

2つの異なるマーカが、同じバッファの同じバッファ内位置であるか、
どちらもどこも指していないときには、
両者を（<CODE>eq</CODE>ではないが）<CODE>equal</CODE>とみなします。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq p (point-marker))
     => #&#60;marker at 2139 in markers.texi&#62;

(setq q (copy-marker p))
     => #&#60;marker at 2139 in markers.texi&#62;

(eq p q)
     => nil

(equal p q)
     => t
</pre></td></tr></table><P>

<A NAME="Information from Markers"></A>
<HR SIZE="6">
<br><A NAME="SEC478"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC477"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC479"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Information from Markers"></A>
<H2> 30.4 マーカの情報 </H2>
<!--docid::SEC478::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Information%20from%20Markers">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Information%20from%20Markers</a>"<br>
"texi/elisp21/マーカの情報"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%DE%A1%BC%A5%AB%A4%CE%BE%F0%CA%F3">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

本節では、マーカオブジェクトの構成要素を参照する関数について述べます。
<P>

<A NAME="IDX2130"></A>
<DL>
<DT><U>Function:</U> <B>marker-position</B> <I>marker</I>
<DD>この関数は、<VAR>marker</VAR>が指す位置を返す。
あるいは、<VAR>marker</VAR>がどこも指していなければ<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="IDX2131"></A>
<DL>
<DT><U>Function:</U> <B>marker-buffer</B> <I>marker</I>
<DD>この関数は、<VAR>marker</VAR>が指すバッファを返す。
あるいは、<VAR>marker</VAR>がどこも指していなければ<CODE>nil</CODE>を返す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq m (make-marker))
     => #&#60;marker in no buffer&#62;
(marker-position m)
     => nil
(marker-buffer m)
     => nil

(set-marker m 3770 (current-buffer))
     => #&#60;marker at 3770 in markers.texi&#62;
(marker-buffer m)
     => #&#60;buffer markers.texi&#62;
(marker-position m)
     => 3770
</pre></td></tr></table></DL>
<P>

<A NAME="Marker Insertion Types"></A>
<HR SIZE="6">
<br><A NAME="SEC479"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC478"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC480"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Marker Insertion Types"></A>
<H2> 30.5 マーカの挿入型 </H2>
<!--docid::SEC479::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Marker%20Insertion%20Types">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Marker%20Insertion%20Types</a>"<br>
"texi/elisp21/マーカの挿入型"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%DE%A1%BC%A5%AB%A4%CE%C1%DE%C6%FE%B7%BF">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

<A NAME="IDX2132"></A>
マーカが指す箇所に直接テキストを挿入すると、
マーカの再配置方法には2つの可能性、つまり、
挿入したテキストのまえに留まるか、あとにくるかのどちらかです。
マーカの<EM>挿入型</EM>（insertion type）を設定することで、
あるマーカではどちらを選ぶか指定できます。
<CODE>insert-before-markers</CODE>を使うとマーカの挿入型は無視され、
マーカは挿入したテキストのうしろにつねに再配置されることに注意してください。
<P>

<A NAME="IDX2133"></A>
<DL>
<DT><U>Function:</U> <B>set-marker-insertion-type</B> <I>marker type</I>
<DD><A NAME="IDX2134"></A>
この関数は、マーカ<VAR>marker</VAR>の挿入型を<VAR>type</VAR>とする。
<VAR>type</VAR>が<CODE>t</CODE>であると、
テキストが挿入されると<VAR>marker</VAR>はその位置へ進む。
<VAR>type</VAR>が<CODE>nil</CODE>であると、
テキストが挿入されても<VAR>marker</VAR>はその位置へ進まない。
</DL>
<P>

<A NAME="IDX2135"></A>
<DL>
<DT><U>Function:</U> <B>marker-insertion-type</B> <I>marker</I>
<DD><A NAME="IDX2136"></A>
この関数は、<VAR>marker</VAR>の現在の挿入型を報告する。
</DL>
<P>

<A NAME="Moving Markers"></A>
<HR SIZE="6">
<br><A NAME="SEC480"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC479"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC481"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Moving Markers"></A>
<H2> 30.6 マーカ位置の移動 </H2>
<!--docid::SEC480::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Moving%20Markers">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Moving%20Markers</a>"<br>
"texi/elisp21/マーカ位置の移動"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%DE%A1%BC%A5%AB%B0%CC%C3%D6%A4%CE%B0%DC%C6%B0">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

本節では、既存のマーカの位置を変更する方法について述べます。
これを行うときには、読者のプログラムの外側で
当該マーカが使われているかどうか、
使われているときには移動による効果はなにかを確実に理解してください。
さもないと、Emacsの別の部分で混乱を生じるかもしれません。
<P>

<A NAME="IDX2137"></A>
<DL>
<DT><U>Function:</U> <B>set-marker</B> <I>marker position &#38;optional buffer</I>
<DD>この関数は、<VAR>buffer</VAR>において<VAR>marker</VAR>を<VAR>position</VAR>へ移動する。
<VAR>buffer</VAR>を与えないと、デフォルトはカレントバッファである。
<P>

<VAR>position</VAR>が1未満であると、
<CODE>set-marker</CODE>は<VAR>marker</VAR>をバッファの先頭へ移動する。
<VAR>position</VAR>がバッファのサイズよりも大きいと、
<CODE>set-marker</CODE>は<VAR>marker</VAR>をバッファの末尾へ移動する。
<VAR>position</VAR>が<CODE>nil</CODE>であったりどこも指していないマーカであると、
<VAR>marker</VAR>はどこも指さないようにする。
<P>

戻り値は<VAR>marker</VAR>である。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq m (point-marker))
     => #&#60;marker at 4714 in markers.texi&#62;
(set-marker m 55)
     => #&#60;marker at 55 in markers.texi&#62;
(setq b (get-buffer "foo"))
     => #&#60;buffer foo&#62;
(set-marker m 0 b)
     => #&#60;marker at 1 in foo&#62;
</pre></td></tr></table></DL>
<P>

<A NAME="IDX2138"></A>
<DL>
<DT><U>Function:</U> <B>move-marker</B> <I>marker position &#38;optional buffer</I>
<DD>これは<CODE>set-marker</CODE>の別名である。
</DL>
<P>

<A NAME="The Mark"></A>
<HR SIZE="6">
<br><A NAME="SEC481"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC480"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC482"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="The Mark"></A>
<H2> 30.7 マーク </H2>
<!--docid::SEC481::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=The%20Mark">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=The%20Mark</a>"<br>
"texi/elisp21/マーク"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%DE%A1%BC%A5%AF">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX2139"></A>
<A NAME="IDX2140"></A>
<P>

各バッファの1つの特別なマーカを<EM>マーク</EM>（mark）として区別します。
これは、<CODE>kill-region</CODE>や<CODE>indent-rigidly</CODE>などのコマンド向けに
ユーザーのために位置を記録するものです。
Lispプログラムでは、ユーザーが使う可能性のある値だけをマークに設定し、
プログラムの内部向けにはけっしてマークを使いません。
たとえば、コマンド<CODE>replace-regexp</CODE>は、
置換を行うまえのポイント値をマークに設定します。
置換を完了したあとに、ユーザーが手軽にまえの位置に戻れるようにするためです。
<P>

多くのコマンドは、対話的に呼ばれるとポイントとマークのあいだの
テキストに作用するように設計されています。
読者がそのようなコマンドを書くときには、
マークを直接検査しないでください。
そのかわりに、`<SAMP>r</SAMP>'を指定した<CODE>interactive</CODE>を使います。
こうすると、
対話的に呼ばれるとポイントとマークの値がコマンドの引数に与えられますが、
別のLispプログラムからは引数を明示できます。
See 節 <A HREF="elisp_21.html#SEC285">20.2.2 <CODE>interactive</CODE>のコード文字</A>。
<P>

各バッファには、他のバッファのマークの値とは独立な
独自のマークの値があります。
バッファが作成されると、マークは存在しますがどこも指さない状態です。
これを『バッファのマークは欠如している』状態とみなします。
<P>

バッファでいったんマークが『存在』するようになれば、
マークが存在しなくなることは普通はありません。
しかし、暫定マーク（transient-mark）モードをオンにすると、
マークが<EM>不活性</EM>になることはあります。
すべてのバッファでつねにバッファローカルな変数<CODE>mark-active</CODE>が
マークが活性かどうかを表します。
その値が<CODE>nil</CODE>以外であるとマークは活性です。
コマンドで<CODE>deactivate-mark</CODE>に<CODE>nil</CODE>以外の値を設定すると、
エディタコマンドループに戻ったときにマークを不活性にするようにできます
（ただし、暫定マーク（transient-mark）モードがオンの場合に限る）。
<P>

暫定マーク（transient-mark）モードを使う主な目的は、
マークが活性であるとこのモードはリージョンを強調表示するからです。
See 節 <A HREF="elisp_38.html#SEC599">37. Emacsの画面表示</A>。
<P>

マークに加えて、各バッファには<EM>マークリング</EM>（mark ring）、
つまり、マークの以前の値を保持したリストがあります。
編集コマンドがマークを変更すると、
通常、編集コマンドはマークの古い値をマークリングに保存します。
変数<CODE>mark-ring-max</CODE>で、マークリングに収める要素の最大個数を指定します。
リストがこの長さに達すると、新たな要素を加えるたびに古い要素を削除します。
<P>

<A NAME="IDX2141"></A>
<DL>
<DT><U>Function:</U> <B>mark</B> <I>&#38;optional force</I>
<DD><A NAME="IDX2142"></A>
この関数は、カレントバッファのマーク位置を整数で返す。
<P>

マークが不活性であると、通常、<CODE>mark</CODE>はエラーを通知する。
しかし、<VAR>force</VAR>が<CODE>nil</CODE>以外であると<CODE>mark</CODE>はマーク位置を返すが、
当該バッファでマークが設定されたことがなければ<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="IDX2143"></A>
<DL>
<DT><U>Function:</U> <B>mark-marker</B>
<DD>この関数は、カレントバッファのマークを返す。
これは、Emacs内部のマーク位置を記録したマーカそのものであり、コピーではない。
したがって、このマーカの位置を変更すると、マークの位置に直接影響する。
この効果を望まない限り、そのようにしないこと。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq m (mark-marker))
     => #&#60;marker at 3420 in markers.texi&#62;
(set-marker m 100)
     => #&#60;marker at 100 in markers.texi&#62;
(mark-marker)
     => #&#60;marker at 100 in markers.texi&#62;
</pre></td></tr></table><P>

他のマーカと同様に、このマーカは任意のバッファでポイントを指すようにできる。
マークが指しているバッファ以外のバッファ内位置を指すことは勧めない。
そのようにすると、一貫性はあるが妙な結果を生じる。
</DL>
<P>

<A NAME="IDX2144"></A>
<DL>
<DT><U>Function:</U> <B>set-mark</B> <I>position</I>
<DD>この関数は、位置<VAR>position</VAR>にマークを設定し、マークを活性にする。
マークの古い値はマークリングに保存し<EM>ない</EM>。
<P>

<STRONG>注意：</STRONG><CODE> </CODE>ユーザーにマークが移動したことを示し、かつ、
まえのマーク位置を破棄したい場合にのみこの関数を使うこと。
通常、新たにマークを設定したときには、
古いマークを<CODE>mark-ring</CODE>に入れるべきである。
この理由から、ほとんどのアプリケーションでは、
<CODE>set-mark</CODE>ではなく<CODE>push-mark</CODE>と<CODE>pop-mark</CODE>を使うべきである。
<P>

Emacs Lispの初心者プログラマは、誤った目的にマークを使いがちである。
マークはユーザーの便宜のための位置を保存する。
編集コマンドは、
コマンドのユーザーレベルの機能の一部としてマークを変更する以外には、
マークを変更してはならない。
（変更する場合には、その効果を明文化しておくべきである。）
Lispプログラムの内部で使う位置を記録するには、Lisp変数に保存する。
たとえばつぎのようにする。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(let ((beg (point)))
  (forward-line 1)
  (delete-region beg (point))).
</pre></td></tr></table></DL>
<P>

<A NAME="IDX2145"></A>
<DL>
<DT><U>Function:</U> <B>push-mark</B> <I>&#38;optional position nomsg activate</I>
<DD>この関数は、カレントバッファのマークを<VAR>position</VAR>とし、
以前のマークのコピーを<CODE>mark-ring</CODE>へ入れる。
<VAR>position</VAR>が<CODE>nil</CODE>であると、ポイントの値を使う。
<CODE>push-mark</CODE>は<CODE>nil</CODE>を返す。
<P>

関数<CODE>push-mark</CODE>は、通常、マークを活性に<EM>しない</EM>。
活性にするには引数<VAR>activate</VAR>に<CODE>t</CODE>を指定する。
<P>

<VAR>nomsg</VAR>が<CODE>nil</CODE>であると、メッセージ`<SAMP>Mark set</SAMP>'を表示する。
</DL>
<P>

<A NAME="IDX2146"></A>
<DL>
<DT><U>Function:</U> <B>pop-mark</B>
<DD>この関数は、<CODE>mark-ring</CODE>から先頭要素を取り出し、
そのマークをカレントバッファの実際のマークとする。
バッファのポイントは移動しない。
また、<CODE>mark-ring</CODE>が空であるとなにもしない。
マークを不活性にする。
<P>

戻り値に意味はない。
</DL>
<P>

<A NAME="IDX2147"></A>
<DL>
<DT><U>User Option:</U> <B>transient-mark-mode</B>
<DD><A NAME="IDX2148"></A>
この変数が<CODE>nil</CODE>以外であると
暫定マーク（transient-mark）モードがオンであるが、
バッファを変更する各基本関数は<CODE>deactivate-mark</CODE>に設定する。
つまり、バッファを変更するコマンドは、通常、マークを不活性にする。
</DL>
<P>

<A NAME="IDX2149"></A>
<DL>
<DT><U>User Option:</U> <B>mark-even-if-inactive</B>
<DD>これが<CODE>nil</CODE>以外であると、
LispプログラムやEmacsユーザーは、マークが不活性であってもマークを使える。
このオプションは、暫定マーク（transient-mark）モードのふるまいに影響する。
このオプションが<CODE>nil</CODE>以外であると、
マークが不活性になるとリージョンの強調表示を止めるが、
マークを使うコマンドはマークが活性であるものとして動作する。
</DL>
<P>

<A NAME="IDX2150"></A>
<DL>
<DT><U>Variable:</U> <B>deactivate-mark</B>
<DD>編集コマンドがこの変数に<CODE>nil</CODE>以外を設定すると、
エディタコマンドループは（暫定マーク（transient-mark）モードがオンであると）
コマンドから戻るとマークを不活性にする。
コマンドが終了したらマークを不活性にするために、
バッファを変更するすべての基本関数は<CODE>deactivate-mark</CODE>に設定する。
</DL>
<P>

<A NAME="IDX2151"></A>
<DL>
<DT><U>Function:</U> <B>deactivate-mark</B>
<DD>この関数は、暫定マーク（transient-mark）モードが
オンであるとマークを不活性にする。
さもなければなにもしない。
</DL>
<P>

<A NAME="IDX2152"></A>
<DL>
<DT><U>Variable:</U> <B>mark-active</B>
<DD>この変数が<CODE>nil</CODE>以外であると、マークは活性である。
この変数は各バッファにおいてつねにバッファローカルである。
</DL>
<P>

<A NAME="IDX2153"></A>
<DL>
<DT><U>Variable:</U> <B>activate-mark-hook</B>
<DD><A NAME="IDX2154"></A>
<DT><U>Variable:</U> <B>deactivate-mark-hook</B>
<DD>これらのノーマルフックは、それぞれ、
マークが活性になったとき、不活性になったときに実行される。
マークが活性でありリージョンが変更されたときには、
フック<CODE>activate-mark-hook</CODE>はコマンドの終りでも実行される。
</DL>
<P>

<A NAME="IDX2155"></A>
<DL>
<DT><U>Variable:</U> <B>mark-ring</B>
<DD>このバッファローカルな変数の値は、
カレントバッファで保存したマークを最新のものから順に並べたリストである。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>mark-ring
=> (#&#60;marker at 11050 in markers.texi&#62; 
    #&#60;marker at 10832 in markers.texi&#62;
    <small>...</small>)
</pre></td></tr></table></DL>
<P>

<A NAME="IDX2156"></A>
<DL>
<DT><U>User Option:</U> <B>mark-ring-max</B>
<DD>この変数の値は、<CODE>mark-ring</CODE>の最大の大きさである。
これより多くのマークを<CODE>mark-ring</CODE>に積むと、
<CODE>push-mark</CODE>は新しいものを追加するときに古いものを削除する。
</DL>
<P>

<A NAME="The Region"></A>
<HR SIZE="6">
<br><A NAME="SEC482"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_31.html#SEC481"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_32.html#SEC483"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="The Region"></A>
<H2> 30.8 リージョン </H2>
<!--docid::SEC482::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=The%20Region">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=The%20Region</a>"<br>
"texi/elisp21/リージョン"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%EA%A1%BC%A5%B8%A5%E7%A5%F3">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX2157"></A>
<P>

ポイントとマークのあいだのテキストを<EM>リージョン</EM>（region）といいます。
さまざまな関数がポイントとマークで区切られたテキストに作用しますが、
リージョンそのものに特に関連した関数だけについてここで述べます。
<P>

<A NAME="IDX2158"></A>
<DL>
<DT><U>Function:</U> <B>region-beginning</B>
<DD>この関数は、リージョンの先頭の位置を（整数で）返す。
これは、ポイントかマークの小さいほうの位置である。
<P>

マークがどこも指していなければ、エラーを通知する。
</DL>
<P>

<A NAME="IDX2159"></A>
<DL>
<DT><U>Function:</U> <B>region-end</B>
<DD>この関数は、リージョンの末尾の位置を（整数で）返す。
これは、ポイントかマークの大きいほうの位置である。
<P>

マークがどこも指していなければ、エラーを通知する。
</DL>
<P>

関数<CODE>region-beginning</CODE>や<CODE>region-end</CODE>を使う必要がある
プログラムはほとんどないはずです。
リージョンに作用するように設計されたコマンドは、
普通、`<SAMP>r</SAMP>'を指定した<CODE>interactive</CODE>を使って
リージョンの先頭と末尾をみつけます。
これにより、Lispプログラムからは引数として境界を明示的に指定できます。
（See 節 <A HREF="elisp_21.html#SEC285">20.2.2 <CODE>interactive</CODE>のコード文字</A>。）
<A NAME="Text"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<a name="bottom"> </a>
<script type="text/javascript" src="style2.js"></script>
<div class="footer">
    <br>
    このページはMeadow (Emacs) の紹介ページです <br>
このWebページの各文書は自由にリンク・複製・再配布・改変していただいて構いません．
<br>ただし，複製・再配布・改変の場合は Meadow Memo のURLを記載しておいて下さい．<br>
<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=about%20link">Medow memoへのリンクについて</a>．<br>

間違い，要望等があれば<a href="mailto:akihisa@mail.ne.jp">akihisa@mail.ne.jp</a> か下記でどうぞ<br>

<br>

<FORM METHOD="post" ACTION="http://www.bookshelf.jp/cgi-bin/wwwmail.cgi" >
お名前：<INPUT TYPE="text" NAME="name" SIZE="30" MAXLENGTH="40" VALUE="ななしさん"><br>
メールアドレス：<INPUT TYPE="text" NAME="EMAIL" SIZE="25" MAXLENGTH="60" VALUE="secret@mail.adr"><br>
<input type="hidden" name="HPAGE" value="">
つっこみ：<br><TEXTAREA NAME="MESSAGE" ROWS="5" COLS="50">
</TEXTAREA><br><br>
<INPUT TYPE="submit" VALUE="送信">
<INPUT TYPE="reset" VALUE="クリア">
</FORM>

<br><A HREF="http://www.bookshelf.jp/cgi-bin/xct.cgi">ページ別カウンタ</a>
<br> Since 2002/12/13 <br>
</div>

</BODY>

</HTML>
