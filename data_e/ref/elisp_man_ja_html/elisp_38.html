<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML lang="ja">
<!-- Created on October, 1  2005 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html;CHARSET=euc-jp">
<META NAME="keywords" CONTENT="meadow,mule,emacs,lisp,elisp,gnus,setting,設定,unix,cygwin">
<META http-equiv="Content-Script-Type" content="text/javascript">
<META NAME="description" CONTENT="Meadowの設定を紹介するページです">
<TITLE>GNU Emacs Lispリファレンスマニュアル:  Emacsの画面表示</TITLE>

<META NAME="description" CONTENT="GNU Emacs Lispリファレンスマニュアル:  Emacsの画面表示">
<META NAME="keywords" CONTENT="GNU Emacs Lispリファレンスマニュアル:  Emacsの画面表示">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

<LINK REL="contents" HREF="elisp_toc.html#SEC_Contents">
<LINK REL="index" HREF="elisp_48.html#SEC681">
<LINK REL="next" HREF="elisp_39.html#SEC625">
<LINK REL="prev" HREF="elisp_37.html#SEC583">

<META http-equiv="Content-Style-Type" content="text/css">
<!-- 鶯と龜 ←日本語EUC誤判別対策用らしい; -->
<link rel="StyleSheet" href="../../../../soft/css/midnight.css" type="text/css" id="css1">
<script type="text/javascript" src="style1.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../soft/css/meadowmemo.css">

</HEAD>
<BODY LANG="ja" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">
<!--Infoseek Analyzer start-->
<script LANGUAGE="javascript">PgNo=6;</script>
<script src="http://js1.infoseek.co.jp/bin/57/00170.js"></script>
<noscript><a href="http://ax1.www.infoseek.co.jp/bin/go?0017057f" target="_blank">
<img src="http://ax1.www.infoseek.co.jp/bin/logo?0017057f" border=0></a></noscript>
<!--Infoseek Analyzer end-->
<a name="top"> </a>

<br><A NAME="SEC599"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_37.html#SEC598"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC600"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_37.html#SEC583"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_39.html#SEC625"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Display"></A>
<H1> 37. Emacsの画面表示 </H1>
<!--docid::SEC599::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Display">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Display</a>"<br>
"texi/elisp21/Emacsの画面表示"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2FEmacs%A4%CE%B2%E8%CC%CC%C9%BD%BC%A8">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

本章では、Emacsがユーザーに提示する画面表示に関連する
さまざまな機能について述べます。
<P>

<div class="menuindex"><SCRIPT language=JavaScript src="index37.js"></SCRIPT></div><noscript><BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC600">37.1 スクリーン全体の再表示</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Clearing the screen and redrawing everything on it.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC601">37.2 表示の切り詰め</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Folding or wrapping long text lines.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC602">37.3 エコー領域</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Where messages are displayed.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC603">37.4 不可視なテキスト</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Hiding part of the buffer text.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC604">37.5 選択表示</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Hiding part of the buffer text (the old way).</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC605">37.6 オーバレイ矢印</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Display of an arrow to indicate position.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC606">37.7 一時的な表示</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Displays that go away automatically.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC607">37.8 オーバレイ</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Use overlays to highlight parts of the buffer.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC610">37.9 表示幅</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How wide is a character or string.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC611">37.10 フェイス</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">A face defines a graphics appearance: font, color, etc.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC616">37.11 括弧を点滅する</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How Emacs shows the matching open parenthesis.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC617">37.12 反転表示</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Specifying how the screen looks.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC618">37.13 通常の画面表示慣習</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The usual conventions for displaying nonprinting chars.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC619">37.14 表示テーブル</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to specify other conventions.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC623">37.15 ベルを鳴らす</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Audible signal to the user.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC624">37.16 ウィンドウシステム</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Which window system is being used.</TD></TR>
</TABLE></BLOCKQUOTE></noscript>
<P>

<A NAME="Refresh Screen"></A>
<HR SIZE="6">
<br><A NAME="SEC600"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC599"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC601"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Refresh Screen"></A>
<H2> 37.1 スクリーン全体の再表示 </H2>
<!--docid::SEC600::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Refresh%20Screen">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Refresh%20Screen</a>"<br>
"texi/elisp21/スクリーン全体の再表示"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%B9%A5%AF%A5%EA%A1%BC%A5%F3%C1%B4%C2%CE%A4%CE%BA%C6%C9%BD%BC%A8">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

関数<CODE>redraw-frame</CODE>は、指定したフレーム（see 節 <A HREF="elisp_29.html#SEC434">28. フレーム</A>）の
内容全体を再表示します。
<P>

<A NAME="IDX2841"></A>
<DL>
<DT><U>Function:</U> <B>redraw-frame</B> <I>frame</I>
<DD>この関数は、フレーム<VAR>frame</VAR>をクリアしてから再表示する。
</DL>
<P>

より強力なのは<CODE>redraw-display</CODE>です。
<P>

<A NAME="IDX2842"></A>
<DL>
<DT><U>コマンド:</U> <B>redraw-display</B>
<DD>この関数は、すべての可視フレームをクリアしてから再表示する。
</DL>
<P>

ユーザー入力の処理のほうが再表示より絶対的に優先します。
入力があるときにこれらの関数を呼び出してもただちにはなにもしませんが、
入力をすべて処理し終えてから再表示します。
<P>

通常、Emacsを停止したり再開しても
スクリーン全体を再表示します。
Emacsのようなディスプレイ向けプログラムと通常の逐次表示向けに、
表示内容を個別に記録できる端末エミュレータもあります。
そのような端末を使っているときには、
再開時の再表示を禁止した場合もあります。
<P>

<A NAME="IDX2843"></A>
<DL>
<DT><U>Variable:</U> <B>no-redraw-on-reenter</B>
<DD><A NAME="IDX2844"></A>
<A NAME="IDX2845"></A>
この変数は、停止後に再開したあとで、
スクリーン全体を再表示するかどうかを制御する。
<CODE>nil</CODE>以外であると再描画の必要はないことを意味し、
<CODE>nil</CODE>であると再描画が必要であることを意味する。
デフォルトは<CODE>nil</CODE>である。
</DL>
<P>

<A NAME="Truncation"></A>
<HR SIZE="6">
<br><A NAME="SEC601"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC600"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC602"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Truncation"></A>
<H2> 37.2 表示の切り詰め </H2>
<!--docid::SEC601::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Truncation">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Truncation</a>"<br>
"texi/elisp21/表示の切り詰め"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%C9%BD%BC%A8%A4%CE%C0%DA%A4%EA%B5%CD%A4%E1">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX2846"></A>
<A NAME="IDX2847"></A>
<A NAME="IDX2848"></A>
<A NAME="IDX2849"></A>
<A NAME="IDX2850"></A>
<A NAME="IDX2851"></A>
<P>

テキスト行がウィンドウの右端を越えていると、
その行をつぎのスクリーン行へ継続するか、
スクリーン行1行に切り詰めます。
長いテキスト行を表示するために使われる追加のスクリーン行を
<EM>継続</EM>行と呼びます。
通常、ウィンドウの最右端のコラムに現れる`<SAMP>$</SAMP>'で切り詰めたことを示し、
`<SAMP>\</SAMP>'でつぎの行に『折り返した』こと、
つまり、<EM>継続している</EM>行であることを示します。
（表示テーブルで別の文字を指定できる。
<A HREF="elisp_38.html#SEC619">37.14 表示テーブル</A>を参照。）
<P>

継続することと詰め込みは別のことです。
継続はスクリーン上だけのことであり、バッファ内容は変わりません。
また、継続では単語の境界ではなく、正確にスクリーンの右端で
行を分けます。
See 節 <A HREF="elisp_32.html#SEC499">31.11 詰め込み</A>。
<P>

<A NAME="IDX2852"></A>
<DL>
<DT><U>User Option:</U> <B>truncate-lines</B>
<DD>このバッファローカルな変数は、
ウィンドウの右端を越える行をどのように表示するかを制御する。
デフォルトは<CODE>nil</CODE>であり継続を意味する。
値が<CODE>nil</CODE>以外であると、そのような行を切り詰める。
<P>

変数<CODE>truncate-partial-width-windows</CODE>が<CODE>nil</CODE>以外であると、
（フレーム内で）左右に並んだウィンドウでは、
<CODE>truncate-lines</CODE>の値に関わらずつねに切り詰る。
</DL>
<P>

<A NAME="IDX2853"></A>
<DL>
<DT><U>User Option:</U> <B>default-truncate-lines</B>
<DD>この変数は、<CODE>truncate-lines</CODE>のバッファローカルな値を持たない
バッファ向けの<CODE>truncate-lines</CODE>のデフォルト値である。
</DL>
<P>

<A NAME="IDX2854"></A>
<DL>
<DT><U>User Option:</U> <B>truncate-partial-width-windows</B>
<DD>この変数は、左右に並んだウィンドウ（see 節 <A HREF="elisp_28.html#SEC418">27.2 ウィンドウの分割</A>）において、
ウィンドウの右端を越える行の表示を制御する。
<CODE>nil</CODE>以外であると、そのような行を切り詰める。
さもなければ、<CODE>truncate-lines</CODE>に従って表示する。
</DL>
<P>

ウィンドウで水平方向にスクロールしている（see 節 <A HREF="elisp_28.html#SEC428">27.12 水平スクロール</A>）と、
強制的に切り詰めます。
<P>

継続や切り詰めを表す文字は、表示テーブルを使って変更できます。
See 節 <A HREF="elisp_38.html#SEC619">37.14 表示テーブル</A>。
<P>

バッファに<EM>とても</EM>長い行があるときにそれらの表示に継続行を使うと、
それによりEmacsの再表示が遅くなります。
コラム計算や字下げ関数も遅くなります。
そのような場合には、<CODE>cache-long-line-scans</CODE>に<CODE>t</CODE>を
設定するのがよいです。
<P>

<A NAME="IDX2855"></A>
<DL>
<DT><U>Variable:</U> <B>cache-long-line-scans</B>
<DD>この変数が<CODE>nil</CODE>以外であると、
字下げ／移動関数とEmacsの再表示において、
バッファを走査した結果をキャッシュし、
バッファが変更されていないときには
キャッシュを調べてバッファの対象領域の再走査を回避する。
<P>

キャッシュするようにすると、短い行の処理が多少遅くなる。
<P>

この変数は、すべてのバッファで自動的にバッファローカルである。
</DL>
<P>

<A NAME="The Echo Area"></A>
<HR SIZE="6">
<br><A NAME="SEC602"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC601"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC603"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="The Echo Area"></A>
<H2> 37.3 エコー領域 </H2>
<!--docid::SEC602::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=The%20Echo%20Area">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=The%20Echo%20Area</a>"<br>
"texi/elisp21/エコー領域"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%A8%A5%B3%A1%BC%CE%CE%B0%E8">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX2856"></A>
<A NAME="IDX2857"></A>
<P>

<EM>エコー領域</EM>（echo area）は、
基本関数<CODE>message</CODE>でメッセージを表示したり、
打鍵を表示するために使われます。
（活性な）ミニバッファはエコー領域と
同じスクリーン上の位置に現れますが、
エコー領域とミニバッファは同じものではありません。
<div class="cite">GNU Emacs マニュアル</div>には、
エコー領域とミニバッファがスクリーンの同じ箇所を使う際の
衝突を回避する規則が述べてあります
（see <a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=emacs21&node=Minibuffer">GNU Emacs マニュアル</a>）。
エラーメッセージもエコー領域に現れます。
See 節 <A HREF="elisp_10.html#SEC130">9.5.3 エラー</A>。
<P>

エコー領域に表示するには、
ストリーム（see 節 <A HREF="elisp_19.html#SEC263">18.5 出力関数</A>）として
<CODE>t</CODE>を指定したLisp表示関数を使うか、あるいはつぎのようにします。
<P>

<A NAME="IDX2858"></A>
<DL>
<DT><U>Function:</U> <B>message</B> <I>string &#38;rest arguments</I>
<DD>この関数は、エコー領域に1行のメッセージを表示する。
引数<VAR>string</VAR>は、言語Cの<CODE>printf</CODE>の制御文字列と同様である。
書式指定について詳しくは、<A HREF="elisp_5.html#SEC77">4.6 文字と文字列の変換</A>の
<CODE>format</CODE>を参照。
<CODE>message</CODE>は構築した文字列を返す。
<P>

バッチモードでは、<CODE>message</CODE>はメッセージテキストと改行を
標準エラーストリームへ出力する。
<P>

<VAR>string</VAR>が<CODE>nil</CODE>であると、
<CODE>message</CODE>はエコー領域をクリアする。
ミニバッファが活性であると、
これによりミニバッファの内容がスクリーンにただちに表示される。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(message "Minibuffer depth is %d."
         (minibuffer-depth))
 -| Minibuffer depth is 0.
=> "Minibuffer depth is 0."

---------- Echo Area ----------
Minibuffer depth is 0.
---------- Echo Area ----------
</pre></td></tr></table></DL>
<P>

<A NAME="IDX2859"></A>
<DL>
<DT><U>Function:</U> <B>message-or-box</B> <I>string &#38;rest arguments</I>
<DD>この関数は<CODE>message</CODE>と同様にメッセージを表示するが、
エコー領域のかわりに対話ボックスを使うこともある。
この関数がマウスを用いて起動されたコマンドから呼ばれたとき、
より正確には、<CODE>last-nonmenu-event</CODE>（see 節 <A HREF="elisp_21.html#SEC288">20.4 コマンドループからの情報</A>）が
<CODE>nil</CODE>かリストのいずれかであると、
メッセージを表示するために対話ボックスかポップアップメニューを用いる。
さもなければエコー領域を用いる。
（これは、同様な決定をくだす<CODE>y-or-n-p</CODE>の判定条件と同じである。
see 節 <A HREF="elisp_20.html#SEC277">19.6 Yes/Noの問い合わせ</A>。）
<P>

呼び出しの周りで<CODE>last-nonmenu-event</CODE>に適切な値を束縛することで、
マウスを使うかエコー領域を使うか強制できる。
</DL>
<P>

<A NAME="IDX2860"></A>
<DL>
<DT><U>Function:</U> <B>message-box</B> <I>string &#38;rest arguments</I>
<DD>この関数は<CODE>message</CODE>と同様にメッセージを表示するが、
可能な限り対話ボックス（やポップアップメニュー）を使う。
対話ボックスやポップアップメニューを扱えない端末などで
これらを使用できない場合には、
<CODE>message-box</CODE>は<CODE>message</CODE>と同様にエコー領域を使う。
</DL>
<P>

<A NAME="IDX2861"></A>
<DL>
<DT><U>Function:</U> <B>current-message</B>
<DD><A NAME="IDX2862"></A>
この関数は、エコー領域に現在表示されているメッセージを返す。
なければ<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="IDX2863"></A>
<DL>
<DT><U>Variable:</U> <B>cursor-in-echo-area</B>
<DD>この変数は、エコー領域にメッセージを表示しているときに
カーソルをどこに表示するかを制御する。
<CODE>nil</CODE>以外であると、メッセージの末尾にカーソルを表示する。
さもなければ、エコー領域にではなく、ポイント位置にカーソルを表示する。
<P>

この値は普通は<CODE>nil</CODE>である。
Lispプログラムはこれに<CODE>t</CODE>を短い期間だけ束縛する。
</DL>
<P>

<A NAME="IDX2864"></A>
<DL>
<DT><U>Variable:</U> <B>echo-area-clear-hook</B>
<DD><A NAME="IDX2865"></A>
このノーマルフックは、<CODE>(message nil)</CODE>や他の理由で
エコー領域をクリアするたびに実行される。
</DL>
<P>

エコー領域に表示したほとんどすべてのメッセージは
バッファ`<SAMP>*Messages*</SAMP>'にも記録されます。
<P>

<A NAME="IDX2866"></A>
<DL>
<DT><U>User Option:</U> <B>message-log-max</B>
<DD>この変数は、バッファ`<SAMP>*Messages*</SAMP>'に保持する行数を指定する。
値<CODE>t</CODE>は、保持する行数を制限しないことを意味する。
値<CODE>nil</CODE>は、メッセージをまったく記録しないことを意味する。
メッセージを表示しつつそれを記録しないようにするには
つぎのようにする。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(let (message-log-max)
  (message <small>...</small>))
</pre></td></tr></table></DL>
<P>

<A NAME="IDX2867"></A>
<DL>
<DT><U>Variable:</U> <B>echo-keystrokes</B>
<DD>この変数は、コマンド文字を表示するまでの経過時間を決定する。
この値は整数であり、表示し始めるまでに待つ秒数を指定する。
ユーザーが（<KBD>C-x</KBD>などの）プレフィックスキーを打ってから
つぎを打つまでにこの秒数だけ遅れがあると、
プレフィックスキーをエコー領域に表示する。
（いったんキー列の表示を始めると、
同じキー列の以降の文字すべてを表示する。）
<P>

値がゼロであると、コマンド入力を表示しない。
</DL>
<P>

<A NAME="Invisible Text"></A>
<HR SIZE="6">
<br><A NAME="SEC603"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC602"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC604"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Invisible Text"></A>
<H2> 37.4 不可視なテキスト </H2>
<!--docid::SEC603::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Invisible%20Text">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Invisible%20Text</a>"<br>
"texi/elisp21/不可視なテキスト"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%C9%D4%B2%C4%BB%EB%A4%CA%A5%C6%A5%AD%A5%B9%A5%C8">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

<A NAME="IDX2868"></A>
属性<CODE>invisible</CODE>で文字群を<EM>不可視</EM>にできます。
つまり、それらをスクリーンに表示されないようにするのです。
テキスト属性（see 節 <A HREF="elisp_32.html#SEC513">31.19 テキスト属性</A>）か
オーバレイの属性（see 節 <A HREF="elisp_38.html#SEC607">37.8 オーバレイ</A>）を使います。
<P>

もっとも単純な場合、
属性<CODE>invisible</CODE>が<CODE>nil</CODE>以外であると文字は見えなくなります。
これはデフォルトの場合、つまり、
<CODE>buffer-invisibility-spec</CODE>のデフォルト値を変更していない場合であり、
このようにして属性<CODE>invisible</CODE>は動作します。
<P>

より一般的には、変数<CODE>buffer-invisibility-spec</CODE>を使って、
属性<CODE>invisible</CODE>のどの値のものを不可視なテキストにするかを制御できます。
つまり、<CODE>invisible</CODE>の異なる値を与えて
テキストをあらかじめいくつかのグループに分類しておき、
そのあとで<CODE>buffer-invisibility-spec</CODE>の値を変更して
さまざまなグループを可視／不可視にします。
<P>

<CODE>buffer-invisibility-spec</CODE>で可視性を制御することは、
データベースの項目の一覧を表示するようなプログラムで特に有用です。
データベースの特定の項目だけを見るための
便利なフィルタコマンドを実装できます。
この変数に設定するのはとても速くでき、
変更すべき属性を探すためにバッファ内の全テキストを走査するよりも速いのです。
<P>

<A NAME="IDX2869"></A>
<DL>
<DT><U>Variable:</U> <B>buffer-invisibility-spec</B>
<DD>この変数は、属性<CODE>invisible</CODE>のどの種類を実際に
不可視な文字にするかを指定する。
<P>

<DL COMPACT>
<DT><CODE>t</CODE>
<DD>属性<CODE>invisible</CODE>が<CODE>nil</CODE>以外の文字を不可視にする。
これがデフォルト。
<P>

<DT>リスト
<DD>リストの各要素で不可視にする条件を指定する。
文字の属性<CODE>invisible</CODE>がこれらの条件の1つを満たすと、
その文字を不可視にする。
リストには2種類の要素がありうる。
<P>

<DL COMPACT>
<DT><CODE><VAR>atom</VAR></CODE>
<DD>文字の属性<CODE>invisible</CODE>の値が<VAR>atom</VAR>であるか、
そのリストのメンバに<VAR>atom</VAR>があると、
文字を不可視にする。
<P>

<DT><CODE>(<VAR>atom</VAR> . t)</CODE>
<DD>文字の属性<CODE>invisible</CODE>の値が<VAR>atom</VAR>であるか、
そのリストのメンバに<VAR>atom</VAR>があると、
文字を不可視にする。
さらに、その文字が行末にあり、直後に目に見える改行がある場合には、
`<SAMP><small>...</small></SAMP>'を表示する。
</DL>
</DL>
</DL>
<P>

<CODE>buffer-invisibility-spec</CODE>に要素を追加したり削除するために
2つの関数が特別にあります。
<P>

<A NAME="IDX2870"></A>
<DL>
<DT><U>Function:</U> <B>add-to-invisibility-spec</B> <I>element</I>
<DD><A NAME="IDX2871"></A>
（リストに<VAR>element</VAR>が既存でなければ）
<CODE>buffer-invisibility-spec</CODE>に要素<VAR>element</VAR>を追加する。
</DL>
<P>

<A NAME="IDX2872"></A>
<DL>
<DT><U>Function:</U> <B>remove-from-invisibility-spec</B> <I>element</I>
<DD><A NAME="IDX2873"></A>
<CODE>buffer-invisibility-spec</CODE>から要素<VAR>element</VAR>を削除する。
</DL>
<P>

<CODE>buffer-invisibility-spec</CODE>の使い方の慣習の1つに、
メジャーモードでは
<CODE>buffer-invisibility-spec</CODE>の1要素と属性<CODE>invisible</CODE>の値に
モード自体の名前を使うべきであるというのがあります。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;; `<SAMP><small>...</small></SAMP>'を表示したければ
(add-to-invisibility-spec '(my-symbol . t)) 
;; `<SAMP><small>...</small></SAMP>'を表示しくなければ
(add-to-invisibility-spec 'my-symbol) 

(overlay-put (make-overlay beginning end)
             'invisible 'my-symbol)

;; オーバレイを終了したら
(remove-from-invisibility-spec '(my-symbol . t))
;; 同じように
(remove-from-invisibility-spec 'my-symbol)
</pre></td></tr></table><P>

<A NAME="IDX2874"></A>
普通、テキストを操作したりポイントを移動するコマンドは、
テキストの可視性に注意しません。
ユーザーレベルの移動コマンドは、
<CODE>line-move-ignore-invisible</CODE>が<CODE>nil</CODE>以外であれば
不可視な改行を明示的に無視しますが、
それはそのように明示的にプログラムしてあるからにすぎません。
<P>

インクリメンタルサーチでは、
不可視なテキストを含む一致箇所では、
不可視なオーバレイを一時的にあるいは恒久的に可視にできます。
これを可能にするには、オーバレイの属性<CODE>isearch-open-invisible</CODE>が
<CODE>nil</CODE>以外である必要があります。
その属性の値は、オーバレイを引数として呼ばれる関数である必要があります。
その関数がオーバレイを恒久的に可視にします。
その関数は、探索から抜けるときに一致箇所が
オーバレイにまたがっているときに使われます。
<P>

探索中には、そのようなオーバレイは、
それらの属性<CODE>invisible</CODE>と<CODE>intangible</CODE>を一時的に変更することで
一時的に可視にされます。
特定のオーバレイに対して異なる扱いをしたければ、
属性<CODE>isearch-open-invisible-temporary</CODE>に関数を与えておきます。
その関数は2つの引数で呼ばれます。
第1引数はオーバレイ、
第2引数は、オーバレイを可視にする<CODE>t</CODE>、あるいは、
オーバレイを再度不可視にする<CODE>nil</CODE>です。
<P>

<A NAME="Selective Display"></A>
<HR SIZE="6">
<br><A NAME="SEC604"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC603"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC605"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Selective Display"></A>
<H2> 37.5 選択表示 </H2>
<!--docid::SEC604::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Selective%20Display">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Selective%20Display</a>"<br>
"texi/elisp21/選択表示"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%C1%AA%C2%F2%C9%BD%BC%A8">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX2875"></A>
<P>

<EM>選択表示</EM>とは、
スクリーン上の特定の行を隠すための関連する機能対を指します。
<P>

最初の変種は、明示的な選択表示で、
Lispプログラムで使用するために設計されています。
テキストを変更することでどの行を隠すかを制御します。
テキストを不可視にする機能（see 節 <A HREF="elisp_38.html#SEC603">37.4 不可視なテキスト</A>）は、
この機能で部分的に置き換えてあります。
<P>

2番目の変種は、字下げに基づいて自動的に隠す行を選択します。
この変種は、ユーザーレベルの機能であるように設計されています。
<P>

明示的な選択表示を制御するには、
改行（コントロールJ）を復帰（コントロールM）に置き換えます。
置換前の改行に続いていたそれまでの行は見えなくなります。
厳密にいえば、改行だけが行を区切るため、
一時的にはもう行ではなくなっているのです。
つまり、先行する行の一部になっているのです。
<P>

選択表示は、編集コマンドに直接には影響しません。
たとえば、<KBD>C-f</KBD>（<CODE>forward-char</CODE>）は
躊躇なく不可視なテキストの中へポイントを移動します。
しかし、改行文字を復帰文字に置換すると
影響を受ける編集コマンドもあります。
たとえば、<CODE>next-line</CODE>は、
改行だけを探すため不可視な行を飛び越してしまいます。
選択表示を使用するモードでは、
改行を考慮するようにコマンドを定義したり、
テキストの一部を可視／不可視にするコマンドを定義できます。
<P>

選択表示しているバッファをファイルに書き出すときには、
すべてのコントロールM（復帰）は改行として出力されます。
つまり、つぎにファイルを読み込むと不可視なものはなく、
普通に見えるのです。
選択表示の効果は、Emacsの内側だけで見えるのです。
<P>

<A NAME="IDX2876"></A>
<DL>
<DT><U>Variable:</U> <B>selective-display</B>
<DD>このバッファローカルな変数は、選択表示をオンにする。
つまり、行や行の一部を不可視にできる。
<P>

<UL>
<LI>
<CODE>selective-display</CODE>の値が<CODE>t</CODE>であると、
行内のコントロールM（復帰）以降の部分を表示しない。
これは明示的な選択表示である。
<P>

<LI>
<CODE>selective-display</CODE>の値が正整数であると、
字下げのコラム幅がその数より大きな行を表示しない。
</UL>
<P>

バッファのある部分が不可視であると、
垂直方向に移動するコマンドは、
その部分が存在しないがごとく動作し、
1つのコマンド<CODE>next-line</CODE>で任意個数の不可視行を飛び越えられる。
しかし、（<CODE>forward-char</CODE>などの）
文字単位の移動コマンドは不可視な部分を無視せず、
不可視な部分へのテキストの挿入／削除は可能である。
<P>

つぎの例では、<CODE>selective-display</CODE>の値を変えて
バッファ<CODE>foo</CODE>の<EM>見た目</EM>を示す。
バッファの<EM>内容</EM>に変更はない。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq selective-display nil)
     => nil

---------- Buffer: foo ----------
1 on this column
 2on this column
  3n this column
  3n this column
 2on this column
1 on this column
---------- Buffer: foo ----------

(setq selective-display 2)
     => 2

---------- Buffer: foo ----------
1 on this column
 2on this column
 2on this column
1 on this column
---------- Buffer: foo ----------
</pre></td></tr></table></DL>
<P>

<A NAME="IDX2877"></A>
<DL>
<DT><U>Variable:</U> <B>selective-display-ellipses</B>
<DD>このバッファローカルな変数が<CODE>nil</CODE>以外であると、
不可視なテキストが続く行末に`<SAMP><small>...</small></SAMP>'を表示する。
つぎの例は、上の例の続きである。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq selective-display-ellipses t)
     => t

---------- Buffer: foo ----------
1 on this column
 2on this column ...
 2on this column
1 on this column
---------- Buffer: foo ----------
</pre></td></tr></table><P>

表示テーブルを使って`<SAMP><small>...</small></SAMP>'にかわる別のテキストを指定できる。
see 節 <A HREF="elisp_38.html#SEC619">37.14 表示テーブル</A>。
</DL>
<P>

<A NAME="Overlay Arrow"></A>
<HR SIZE="6">
<br><A NAME="SEC605"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC604"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC606"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Overlay Arrow"></A>
<H2> 37.6 オーバレイ矢印 </H2>
<!--docid::SEC605::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Overlay%20Arrow">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Overlay%20Arrow</a>"<br>
"texi/elisp21/オーバレイ矢印"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%AA%A1%BC%A5%D0%A5%EC%A5%A4%CC%F0%B0%F5">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX2878"></A>
<P>

<EM>オーバレイ矢印</EM>（overlay arrow）は、
バッファの特定の行にユーザーの注意を向けるために有用です。
たとえば、デバッガとのインターフェイスを取るためのモードでは、
オーバレイ矢印で実行するコードの行を示します。
<P>

<A NAME="IDX2879"></A>
<DL>
<DT><U>Variable:</U> <B>overlay-arrow-string</B>
<DD>この変数は、特定の行に注意を向けるために表示する文字列を保持する。
矢印機能を使っていなければ<CODE>nil</CODE>である。
</DL>
<P>

<A NAME="IDX2880"></A>
<DL>
<DT><U>Variable:</U> <B>overlay-arrow-position</B>
<DD>この変数は、オーバレイ矢印を表示する箇所を表すマーカを保持する。
行頭を指すこと。
矢印のテキストはその行の先頭に現れ、
その場所に本来現れるべきテキストを隠す。
矢印は普通は短く、行には字下げがあるので、
重要なものは普通はなにも上書きされない。
<P>

オーバレイ文字列は、マーカが指すバッファでのみ表示される。
したがって、ある時点では、1つのバッファだけにオーバレイ矢印を表示できる。
</DL>
<P>

同様のことは、属性<CODE>before-string</CODE>のオーバレイを
作成してもできます。
See 節 <A HREF="elisp_38.html#SEC608">37.8.1 オーバレイ属性</A>。
<P>

<A NAME="Temporary Displays"></A>
<HR SIZE="6">
<br><A NAME="SEC606"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC605"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC607"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Temporary Displays"></A>
<H2> 37.7 一時的な表示 </H2>
<!--docid::SEC606::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Temporary%20Displays">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Temporary%20Displays</a>"<br>
"texi/elisp21/一時的な表示"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%B0%EC%BB%FE%C5%AA%A4%CA%C9%BD%BC%A8">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

一時的な表示は、
出力をバッファに置き編集目的にではなく
ユーザーに読むように提示するために
Lispプログラムが使います。
<P>

<A NAME="IDX2881"></A>
<DL>
<DT><U>Special Form:</U> <B>with-output-to-temp-buffer</B> <I>buffer-name forms<small>...</small></I>
<DD>この関数は、<VAR>buffer-name</VAR>という名前のバッファに
<VAR>forms</VAR>の任意の出力が挿入されるように準備して
<VAR>forms</VAR>を実行する。
そのバッファは適当なウィンドウに表示されるが、
そのバッファは選択されない。
<P>

文字列<VAR>buffer-name</VAR>は、既存である必要はない一時的なバッファを指定する。
引数は、バッファではなく文字列であること。
（問い合わせずに）はじめにバッファを消去し、
<CODE>with-output-to-temp-buffer</CODE>が終了すると未変更と印を付ける。
<P>

<CODE>with-output-to-temp-buffer</CODE>は、
<CODE>standard-output</CODE>に一時的なバッファを束縛し、
<VAR>forms</VAR>のフォーム群を評価する。
<VAR>forms</VAR>内で用いたLisp出力関数からの出力は
デフォルトでそのバッファに入る
（しかし、スクリーン表示やエコー領域のメッセージは、
用語の一般的な意味で『出力』であるが、
影響されない。）
see 節 <A HREF="elisp_19.html#SEC263">18.5 出力関数</A>。
<P>

<VAR>forms</VAR>の最後のフォームの値を返す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>---------- Buffer: foo ----------
 This is the contents of foo.
---------- Buffer: foo ----------

(with-output-to-temp-buffer "foo"
    (print 20)
    (print standard-output))
=> #&#60;buffer foo&#62;

---------- Buffer: foo ----------
20

#&#60;buffer foo&#62;

---------- Buffer: foo ----------
</pre></td></tr></table></DL>
<P>

<A NAME="IDX2882"></A>
<DL>
<DT><U>Variable:</U> <B>temp-buffer-show-function</B>
<DD>この変数が<CODE>nil</CODE>以外であると、
ヘルプバッファを表示するために
<CODE>with-output-to-temp-buffer</CODE>がこの値を関数として呼び出す。
関数は1つの引数、つまり、表示すべきバッファを受け取る。
<P>

この関数では、
<CODE>save-window-excursion</CODE>を使いウィンドウとバッファを選択した内側で、
<CODE>with-output-to-temp-buffer</CODE>が普通に行うように
<CODE>temp-buffer-show-hook</CODE>を呼び出すのがよい。
</DL>
<P>

<A NAME="IDX2883"></A>
<DL>
<DT><U>Variable:</U> <B>temp-buffer-show-hook</B>
<DD>このノーマルフックは、ヘルプバッファを表示後に
<CODE>with-output-to-temp-buffer</CODE>が実行する。
フックを実行するときには、
ヘルプバッファがカレントバッファであり、
それを表示しているウィンドウが選択されているウィンドウである。
</DL>
<P>

<A NAME="IDX2884"></A>
<DL>
<DT><U>Function:</U> <B>momentary-string-display</B> <I>string position &#38;optional char message</I>
<DD>この関数は、カレントバッファ内の位置<VAR>position</VAR>に
文字列<VAR>string</VAR>を瞬間的に表示する。
アンドゥリストやバッファの変更状態には影響しない。
<P>

瞬間的な表示は、つぎの入力イベントまで持続する。
つぎの入力イベントが<VAR>char</VAR>であると、
<CODE>momentary-string-display</CODE>はそれを無視して戻る。
さもなければ、そのイベントは入力として使われるように保存される。
したがって、<VAR>char</VAR>を打つと文字列の表示が単に消えるだけであるが、
（たとえば）<KBD>C-f</KBD>を打つと文字列の表示が消えるだけでなく
（たぶん）ポイントを進めることになる。
引数<VAR>char</VAR>はデフォルトでは空白である。
<P>

<CODE>momentary-string-display</CODE>の戻り値に意味はない。
<P>

文字列<VAR>string</VAR>にコントロール文字が含まれなければ、
属性<CODE>before-string</CODE>のオーバレイを作成（のちに削除）することで
より一般的な方法で同じことを行える。
see 節 <A HREF="elisp_38.html#SEC608">37.8.1 オーバレイ属性</A>。
<P>

<VAR>message</VAR>が<CODE>nil</CODE>以外であると、
<VAR>string</VAR>をバッファに表示中には、
<VAR>message</VAR>をエコー領域に表示する。
<CODE>nil</CODE>であると、デフォルトは
「継続するには文字<VAR>char</VAR>を打つこと」
といったメッセージである。
<P>

つぎの例では、ポイントは始めは2行目の先頭に位置している。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>---------- Buffer: foo ----------
This is the contents of foo.
-!-Second line.
---------- Buffer: foo ----------

(momentary-string-display
  "**** Important Message! ****"
  (point) ?\r
  "Type RET when done reading")
=> t

---------- Buffer: foo ----------
This is the contents of foo.
**** Important Message! ****Second line.
---------- Buffer: foo ----------

---------- Echo Area ----------
Type RET when done reading
---------- Echo Area ----------
</pre></td></tr></table></DL>
<P>

<A NAME="Overlays"></A>
<HR SIZE="6">
<br><A NAME="SEC607"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC606"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC608"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Overlays"></A>
<H2> 37.8 オーバレイ </H2>
<!--docid::SEC607::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Overlays">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Overlays</a>"<br>
"texi/elisp21/オーバレイ"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%AA%A1%BC%A5%D0%A5%EC%A5%A4">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX2885"></A>
<P>

ユーザーに提示するためにスクリーン上でのバッファのテキストの見た目を
変えるために<EM>オーバレイ</EM>（overlay）を使えます。
オーバレイは、特定のバッファに属するオブジェクトであり、
指定された開始位置と終了位置があります。
また、調べたり設定できる属性もあります。
これらの属性は、オーバレイの内側のテキストの表示に影響します。
<P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC608">37.8.1 オーバレイ属性</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to read and set properties.
			What properties do to the screen display.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC609">37.8.2 オーバレイの管理</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Creating, moving, finding overlays.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Overlay Properties"></A>
<HR SIZE="6">
<br><A NAME="SEC608"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC607"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC609"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Overlay Properties"></A>
<H3> 37.8.1 オーバレイ属性 </H3>
<!--docid::SEC608::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Overlay%20Properties">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Overlay%20Properties</a>"<br>
"texi/elisp21/オーバレイ属性"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%AA%A1%BC%A5%D0%A5%EC%A5%A4%C2%B0%C0%AD">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

オーバレイ属性はある意味でテキスト属性に似ていて、
どちらの属性でも文字の表示方法を変更できます。
しかし、多くの点で異なります。
テキスト属性は、テキストの一部であるとみなされますが、
オーバレイはテキストの一部とはみなしません。
したがって、さまざまなバッファや文字列のあいだでテキストをコピーしても
テキスト属性は保存されますが、オーバレイは保存されません。
バッファ内のテキスト属性を変更するとバッファを変更済みと印を付けますが、
オーバレイを移動したりその属性を変更しても
バッファの変更とは考えません。
テキスト属性の変更と異なり、
オーバレイの変更はバッファのアンドゥリストには記録されません。
比較のためにSee 節 <A HREF="elisp_32.html#SEC513">31.19 テキスト属性</A>。
<P>

<DL COMPACT>
<DT><CODE>priority</CODE>
<DD><A NAME="IDX2886"></A>
この属性の値（非負の数であること）は、
オーバレイの優先順位を決定する。
優先順位は、複数のオーバレイが同じ文字を覆い、
いずれも表示用のフェイスを指定している場合に意味を持つ。
<CODE>priority</CODE>の値の大きなものが他に優先し、
そのフェイス属性が他の低い順位の属性のフェイス属性に優先する。
<P>

現在、すべてのオーバレイ属性はテキスト属性に優先する。
負の優先順位の意味を決めかねているので、負の優先順位は避けてほしい。
<P>

<DT><CODE>window</CODE>
<DD><A NAME="IDX2887"></A>
属性<CODE>window</CODE>が<CODE>nil</CODE>以外であると、
オーバレイをそのウィンドウだけに適用する。
<P>

<DT><CODE>category</CODE>
<DD><A NAME="IDX2888"></A>
オーバレイに属性<CODE>category</CODE>があると、
それをオーバレイの<EM>カテゴリ</EM>（category）と呼ぶ。
これはシンボルであること。
シンボルの属性がオーバレイの属性のデフォルトの役割を果たす。
<P>

<DT><CODE>face</CODE>
<DD><A NAME="IDX2889"></A>
この属性は、テキストの表示方法、たとえば、
フォントや表示色を制御する。
その値は、フェイス名であるかフェイス名のリストである。
詳しくは、see 節 <A HREF="elisp_38.html#SEC611">37.10 フェイス</A>。
<P>

属性値がリストであると、その要素は、
<CODE>(foreground-color . <VAR>color-name</VAR>)</CODE>か
<CODE>(background-color . <VAR>color-name</VAR>)</CODE>の形でもよい。
これらの要素は、前景色だけや背景色だけを指定する。
したがって、使用する各色を表すフェイスを作成する必要はない。
<P>

<DT><CODE>mouse-face</CODE>
<DD><A NAME="IDX2890"></A>
この属性は、マウスがオーバレイの範囲に入っているときに
<CODE>face</CODE>のかわりに使われる。
<P>

<DT><CODE>modification-hooks</CODE>
<DD><A NAME="IDX2891"></A>
この属性の値は、オーバレイの内側の文字を変更したり、
オーバレイの内側にテキストを挿入したときに
呼び出される関数のリストである。
<P>

フック関数は、各変更の前後に呼び出される。
関数が受け取った情報を保存し呼び出しごとに比較すれば
バッファテキストにどのような変更が行われたかを正確に判定できる。
<P>

変更前に呼ばれるときには、各関数は4つの引数を受け取る。
オーバレイ、<CODE>nil</CODE>、変更対象のテキスト範囲の先頭と末尾である。
<P>

変更後に呼ばれるときには、各関数は5つの引数を受け取る。
オーバレイ、<CODE>t</CODE>、変更済みのテキスト範囲の先頭と末尾、
その範囲の変更前のテキストの長さである。
（挿入では変更前の長さはゼロである。
削除では変更前の長さは削除された文字数であり、
変更後の先頭位置と末尾位置は同じである。）
<P>

<DT><CODE>insert-in-front-hooks</CODE>
<DD><A NAME="IDX2892"></A>
この属性の値は、オーバレイの開始位置へのテキスト挿入の前後に
呼び出される関数のリストである。
呼び出し方法は<CODE>modification-hooks</CODE>の関数群と同じである。
<P>

<DT><CODE>insert-behind-hooks</CODE>
<DD><A NAME="IDX2893"></A>
この属性の値は、オーバレイの終了位置へのテキスト挿入の前後に
呼び出される関数のリストである。
呼び出し方法は<CODE>modification-hooks</CODE>の関数群と同じである。
<P>

<DT><CODE>invisible</CODE>
<DD><A NAME="IDX2894"></A>
属性<CODE>invisible</CODE>は、オーバレイ内のテキストを不可視にする。
つまり、それらはスクリーン上に現れない。
詳しくは、see 節 <A HREF="elisp_38.html#SEC603">37.4 不可視なテキスト</A>。
<P>

<DT><CODE>intangible</CODE>
<DD><A NAME="IDX2895"></A>
属性<CODE>intangible</CODE>は、オーバレイにおいて
テキスト属性<CODE>intangible</CODE>と同様に働く。
詳しくは、see 節 <A HREF="elisp_32.html#SEC517">31.19.4 特別な意味を持つ属性</A>。
<P>

<DT><CODE>isearch-open-invisible</CODE>
<DD>この属性は、インクリメンタルサーチに対して、
一致箇所がオーバレイに重なったときに
不可視なオーバレイを恒久的に可視にする方法を指示する。
see 節 <A HREF="elisp_38.html#SEC603">37.4 不可視なテキスト</A>。
<P>

<DT><CODE>isearch-open-invisible-temporary</CODE>
<DD>この属性は、インクリメンタルサーチに対して、
探索中に不可視なオーバレイを一時的に可視にする方法を指示する。
see 節 <A HREF="elisp_38.html#SEC603">37.4 不可視なテキスト</A>。
<P>

<DT><CODE>before-string</CODE>
<DD><A NAME="IDX2896"></A>
この属性の値は、オーバレイの先頭位置に追加表示する文字列である。
文字列はいかなる意味においてもバッファには現れず、
スクリーン上のみに現れる。
文字列は1コラムで表示される文字のみであること。
タブや改行を含むコントロール文字を含むと奇妙な結果を生じる。
<P>

<DT><CODE>after-string</CODE>
<DD><A NAME="IDX2897"></A>
この属性の値は、オーバレイの末尾位置に追加表示する文字列である。
文字列はいかなる意味においてもバッファには現れず、
スクリーン上のみに現れる。
文字列は1コラムで表示される文字のみであること。
タブや改行を含むコントロール文字を含むと奇妙な結果を生じる。
<P>

<DT><CODE>evaporate</CODE>
<DD><A NAME="IDX2898"></A>
この属性が<CODE>nil</CODE>以外であると、
オーバレイが空に（つまり覆う文字がなく）なると、
自動的にオーバレイを削除する。
<P>

<DT><CODE>local-map</CODE>
<DD><A NAME="IDX2899"></A>
<A NAME="IDX2900"></A>
この属性が<CODE>nil</CODE>以外であると、当該部分のテキストに対する
キーマップを指定する。
ポイントの直後の文字がオーバレイに入っていると、
属性の値はバッファローカルなキーマップに置き換わる。
see 節 <A HREF="elisp_22.html#SEC323">21.6 活性なキーマップ</A>。
</DL>
<P>

つぎは、オーバレイの属性を読み書きするための関数です。
<P>

<A NAME="IDX2901"></A>
<DL>
<DT><U>Function:</U> <B>overlay-get</B> <I>overlay prop</I>
<DD>この関数は、オーバレイ<VAR>overlay</VAR>に記録されている
属性<VAR>prop</VAR>の値をあれば返す。
<VAR>overlay</VAR>にそのような属性に対する値が記録されていなくても、
属性<CODE>category</CODE>がありそれがシンボルであれば、
そのシンボルの属性<VAR>prop</VAR>を使う。
さもなければ値は<CODE>nil</CODE>である。
</DL>
<P>

<A NAME="IDX2902"></A>
<DL>
<DT><U>Function:</U> <B>overlay-put</B> <I>overlay prop value</I>
<DD>この関数は、オーバレイ<VAR>overlay</VAR>に属性<VAR>prop</VAR>の値として
<VAR>value</VAR>を設定する。
<VAR>value</VAR>を返す。
</DL>
<P>

与えられた文字のオーバレイ属性とテキスト属性の両方を調べる
関数code{get-char-property}も参照してください。
See 節 <A HREF="elisp_32.html#SEC514">31.19.1 テキスト属性を調べる</A>。
<P>

<A NAME="Managing Overlays"></A>
<HR SIZE="6">
<br><A NAME="SEC609"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC608"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC610"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Managing Overlays"></A>
<H3> 37.8.2 オーバレイの管理 </H3>
<!--docid::SEC609::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Managing%20Overlays">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Managing%20Overlays</a>"<br>
"texi/elisp21/オーバレイの管理"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%AA%A1%BC%A5%D0%A5%EC%A5%A4%A4%CE%B4%C9%CD%FD">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

本節では、オーバレイを作成、削除、移動したり、
それらの内容を調べる関数について述べます。
<P>

<A NAME="IDX2903"></A>
<DL>
<DT><U>Function:</U> <B>make-overlay</B> <I>start end &#38;optional buffer front-advance rear-advance</I>
<DD>この関数は、バッファ<VAR>buffer</VAR>に属する
<VAR>start</VAR>から<VAR>end</VAR>までを覆うオーバレイを作成しそれを返す。
<VAR>start</VAR>と<VAR>end</VAR>のどちらもバッファ内位置を指定する
整数かマーカであること。
<VAR>buffer</VAR>を省略すると、カレントバッファにオーバレイを作成する。
<P>

引数<VAR>front-advance</VAR>と<VAR>rear-advance</VAR>は、
オーバレイの開始位置と終了位置における挿入型を指定する。
see 節 <A HREF="elisp_31.html#SEC479">30.5 マーカの挿入型</A>。
</DL>
<P>

<A NAME="IDX2904"></A>
<DL>
<DT><U>Function:</U> <B>overlay-start</B> <I>overlay</I>
<DD>この関数は、オーバレイ<VAR>overlay</VAR>の開始位置を整数で返す。
</DL>
<P>

<A NAME="IDX2905"></A>
<DL>
<DT><U>Function:</U> <B>overlay-end</B> <I>overlay</I>
<DD>この関数は、オーバレイ<VAR>overlay</VAR>の終了位置を整数で返す。
</DL>
<P>

<A NAME="IDX2906"></A>
<DL>
<DT><U>Function:</U> <B>overlay-buffer</B> <I>overlay</I>
<DD>この関数は、オーバレイ<VAR>overlay</VAR>が属するバッファを返す。
</DL>
<P>

<A NAME="IDX2907"></A>
<DL>
<DT><U>Function:</U> <B>delete-overlay</B> <I>overlay</I>
<DD>この関数は、オーバレイ<VAR>overlay</VAR>を削除する。
Lispオブジェクトとしてはオーバレイは存在し続けるが、
それが属したバッファとの対応付けは消失し、
表示上の効果もなくなる。
<P>

削除したオーバレイは恒久的に無意味ではない。
<CODE>move-overlay</CODE>を呼び出して新たなバッファ内位置をそれに与えられる。
</DL>
<P>

<A NAME="IDX2908"></A>
<DL>
<DT><U>Function:</U> <B>move-overlay</B> <I>overlay start end &#38;optional buffer</I>
<DD>この関数は、オーバレイ<VAR>overlay</VAR>をバッファ<VAR>buffer</VAR>に移し、
<VAR>start</VAR>から<VAR>end</VAR>を覆うようにする。
<VAR>start</VAR>と<VAR>end</VAR>のどちらもバッファ内位置を指定し、
整数かマーカである。
<VAR>buffer</VAR>を省略すると、オーバレイは同じバッファに留まる。
<P>

戻り値は<VAR>overlay</VAR>である。
<P>

これは、オーバレイの端を変更する唯一の正しい方法である。
オーバレイのマーカを手で修正しようとしないこと。
他の重要なデータ構造を更新しそこない、
いくつかのオーバレイを『失う』ことにもなりかねない。
</DL>
<P>

<A NAME="IDX2909"></A>
<DL>
<DT><U>Function:</U> <B>overlays-at</B> <I>pos</I>
<DD>この関数は、カレントバッファの位置<VAR>pos</VAR>を覆うすべての
オーバレイのリストを返す。
このリスト内の順番に意味はない。
オーバレイが位置<VAR>pos</VAR>かそのまえで始まり、かつ、
位置<VAR>pos</VAR>かそのうしろで終るときに、
オーバレイは位置<VAR>pos</VAR>を覆う。
</DL>
<P>

<A NAME="IDX2910"></A>
<DL>
<DT><U>Function:</U> <B>overlays-in</B> <I>beg end</I>
<DD><A NAME="IDX2911"></A>
この関数は、<VAR>beg</VAR>から<VAR>end</VAR>までの領域と
重なり合っているすべてのオーバレイのリストを返す。
『重なり合っている』とは、
少なくとも1文字がオーバレイに覆われていて、かつ、
その文字が指定された領域に入っていることを意味する。
しかし、空のオーバレイであっても
それが<VAR>beg</VAR>にあるか<VAR>beg</VAR>と<VAR>end</VAR>のあいだにあれば、
空のオーバレイも結果に含まれる。
</DL>
<P>

<A NAME="IDX2912"></A>
<DL>
<DT><U>Function:</U> <B>next-overlay-change</B> <I>pos</I>
<DD>この関数は、位置<VAR>pos</VAR>のうしろにある
オーバレイのつぎの開始位置か終了位置を返す。
</DL>
<P>

<A NAME="IDX2913"></A>
<DL>
<DT><U>Function:</U> <B>previous-overlay-change</B> <I>pos</I>
<DD>この関数は、位置<VAR>pos</VAR>のまえにある
オーバレイのまえの開始位置か終了位置を返す。
</DL>
<P>

<A NAME="Width"></A>
<HR SIZE="6">
<br><A NAME="SEC610"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC609"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC611"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Width"></A>
<H2> 37.9 表示幅 </H2>
<!--docid::SEC610::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Width">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Width</a>"<br>
"texi/elisp21/表示幅"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%C9%BD%BC%A8%C9%FD">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

すべての文字が同じ表示幅ではありませんから、
これらの関数で文字の表示幅を検査できます。
関連する関数については、<A HREF="elisp_32.html#SEC506">31.17.1 字下げ基本関数</A>とSee 節 <A HREF="elisp_30.html#SEC469">29.2.5 スクリーン行分の移動</A>
<P>

<A NAME="IDX2914"></A>
<DL>
<DT><U>Function:</U> <B>char-width</B> <I>char</I>
<DD><A NAME="IDX2915"></A>
この関数は、文字<VAR>char</VAR>を選択されているウィンドウで
カレントバッファに表示した場合のコラム幅を返す。
</DL>
<P>

<A NAME="IDX2916"></A>
<DL>
<DT><U>Function:</U> <B>string-width</B> <I>string</I>
<DD><A NAME="IDX2917"></A>
この関数は、文字列<VAR>string</VAR>を選択されているウィンドウで
カレントバッファに表示した場合のコラム幅を返す。
</DL>
<P>

<A NAME="IDX2918"></A>
<DL>
<DT><U>Function:</U> <B>truncate-string-to-width</B> <I>string width &#38;optional start-column padding</I>
<DD><A NAME="IDX2919"></A>
この関数は、幅<VAR>width</VAR>に収まる文字列<VAR>string</VAR>の部分を
新たな文字列として返す。
<P>

<VAR>string</VAR>が幅<VAR>width</VAR>に満たない場合、
<VAR>string</VAR>の終りで結果は終る。
<VAR>string</VAR>内の1つの複数コラム文字がコラム<VAR>width</VAR>を越える場合には、
その文字は結果に含めない。
したがって、結果は<VAR>width</VAR>より短くなりえるがそれを越えることはない。
<P>

省略可能な引数<VAR>start-column</VAR>は、開始コラムを指定する。
これが<CODE>nil</CODE>以外であると、文字列のはじめの
<VAR>start-column</VAR>コラムを結果から省く。
<VAR>string</VAR>内の1つの複数コラム文字がコラム<VAR>start-column</VAR>を越える場合には、
その文字は結果に含めない。
<P>

省略可能な引数<VAR>padding</VAR>が<CODE>nil</CODE>以外であると、
結果の文字列の先頭や末尾に付加して
ちょうど<VAR>width</VAR>コラムにするためのパディング文字である。
<VAR>width</VAR>より短くなる場合に
結果の末尾にパディング文字を使う。
複数コラム文字がコラム<VAR>start-column</VAR>を越える場合には、
結果の先頭にパディング文字を使う。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(truncate-string-to-width "\tab\t" 12 4)
     => "ab"
(truncate-string-to-width "\tab\t" 12 4 ?\ )
     => "    ab  "
</pre></td></tr></table></DL>
<P>

<A NAME="Faces"></A>
<HR SIZE="6">
<br><A NAME="SEC611"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC610"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC612"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Faces"></A>
<H2> 37.10 フェイス </H2>
<!--docid::SEC611::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Faces">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Faces</a>"<br>
"texi/elisp21/フェイス"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%D5%A5%A7%A5%A4%A5%B9">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX2920"></A>
<P>

<EM>フェイス</EM>（face）とは、図形的な属性、つまり、
フォント、前景色、背景色、下線
の名前付きの集合体です。
フェイスはスクリーン上のテキストの表示を制御します。
<P>

<A NAME="IDX2921"></A>
各フェイスには固有の<EM>フェイス番号</EM>（face number）があり、
Emacs内部の下位レベルでフェイスを区別するために使われます。
しかし、ほとんどの目的には、
Lispプログラムでは名前でフェイスを参照できます。
<P>

<A NAME="IDX2922"></A>
<DL>
<DT><U>Function:</U> <B>facep</B> <I>object</I>
<DD>この関数は、<VAR>object</VAR>がフェイスを指名するシンボル
（あるいは、フェイスデータを記録するために内部的に使われる種類のベクトル）
であると<CODE>t</CODE>を返す。
さもなければ<CODE>nil</CODE>を返す。
</DL>
<P>

各フェイス名はすべてのフレームで有効であり、
デフォルトではすべてのフレームで同じ意味を持ちます。
しかし、望みの1つのフレームで特定のフェイス名に
特定の意味を持たせることもできます。
<P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC612">37.10.1 標準フェイス</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The faces Emacs normally comes with.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC613">37.10.2 フェイスを定義する</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to define a face with <CODE>defface</CODE>.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC614">37.10.3 表示向けにフェイスを併合する</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How Emacs decides which face to use for a character.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC615">37.10.4 フェイスを扱う関数</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to define and examine faces.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Standard Faces"></A>
<HR SIZE="6">
<br><A NAME="SEC612"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC611"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC613"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Standard Faces"></A>
<H3> 37.10.1 標準フェイス </H3>
<!--docid::SEC612::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Standard%20Faces">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Standard%20Faces</a>"<br>
"texi/elisp21/標準フェイス"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%C9%B8%BD%E0%A5%D5%A5%A7%A5%A4%A5%B9">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

つぎの表はすべての標準フェイスとその用途です。
<P>

<DL COMPACT>
<DT><CODE>default</CODE>
<DD><A NAME="IDX2923"></A>
このフェイスは通常のテキストに対して使う。
<P>

<DT><CODE>modeline</CODE>
<DD><A NAME="IDX2924"></A>
このフェイスはモード行とメニューバーに対して使う。
<P>

<DT><CODE>region</CODE>
<DD><A NAME="IDX2925"></A>
このフェイスは、暫定マーク（transient-mark）モードでリージョンを
強調表示するために使う。
<P>

<DT><CODE>secondary-selection</CODE>
<DD><A NAME="IDX2926"></A>
このフェイスは、指定した任意の二次セレクションを示すために使う。
<P>

<DT><CODE>highlight</CODE>
<DD><A NAME="IDX2927"></A>
このフェイスは、さまざま目的向けに強調表示するために使う。
<P>

<DT><CODE>underline</CODE>
<DD><A NAME="IDX2928"></A>
このフェイスは、テキストに下線を引く。
<P>

<DT><CODE>bold</CODE>
<DD><A NAME="IDX2929"></A>
このフェイスは、可能ならば太字（bold）フォントを使う。
フレームのフォントに太字（bold）変種があればそれを使う。
太字変種を使用したい場合には、
太字フォント変種を有するデフォルトフォントを選ぶのは読者の責任である。
<P>

<DT><CODE>italic</CODE>
<DD><A NAME="IDX2930"></A>
このフェイスは、フレームのフォントに
斜体（italic）変種があればそれを使う。
<P>

<DT><CODE>bold-italic</CODE>
<DD><A NAME="IDX2931"></A>
このフェイスは、フレームのフォントに
太字斜体（bold-italic）変種があればそれを使う。
</DL>
<P>

<A NAME="Defining Faces"></A>
<HR SIZE="6">
<br><A NAME="SEC613"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC612"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC614"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Defining Faces"></A>
<H3> 37.10.2 フェイスを定義する </H3>
<!--docid::SEC613::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Defining%20Faces">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Defining%20Faces</a>"<br>
"texi/elisp21/フェイスを定義する"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%D5%A5%A7%A5%A4%A5%B9%A4%F2%C4%EA%B5%C1%A4%B9%A4%EB">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

新たなフェイスを定義する方法は、<CODE>defface</CODE>を使うことです。
これは、カスタマイズバッファ
（see <a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=emacs21&node=Easy%20Customization">GNU Emacs マニュアル</a>）
を用いてユーザーがカスタマイズできる
カスタマイズ項目（see 節 <A HREF="elisp_14.html#SEC182">13. カスタマイズ定義の書き方</A>）の一種を作成します。
<P>

<A NAME="IDX2932"></A>
<DL>
<DT><U>Macro:</U> <B>defface</B> <I>face spec doc [keyword value]...</I>
<DD><A NAME="IDX2933"></A>
<VAR>spec</VAR>に従ったデフォルトを持つカスタマイズ可能なフェイスとして
<VAR>face</VAR>を宣言する。
シンボル<VAR>face</VAR>をクォートしないこと。
引数<VAR>doc</VAR>は、フェイスの説明文字列を指定する。
<P>

<CODE>defface</CODE>を実行すると、<VAR>spec</VAR>に従ったフェイスを定義し、
ファイル`<TT>.emacs</TT>'から読み取った任意のカスタマイズを
<VAR>spec</VAR>の指定に優先させる。
<P>

<VAR>spec</VAR>の目的は、異なる種類の端末でフェイスがどのような
見た目になるかを指定することである。
<CODE>(<VAR>display</VAR> <VAR>atts</VAR>)</CODE>の形の要素から成る
連想リストであること。
要素のCARの<VAR>display</VAR>は端末の種類を指定する。
CDRの<VAR>atts</VAR>はフェイスの属性とその値のリストであり、
その種類の端末上でそのフェイスがどのように見えるかを指定する。
可能な属性は、<CODE>custom-face-attributes</CODE>の値で定義される。
<P>

<VAR>spec</VAR>の要素の<VAR>display</VAR>部分は、要素を適用するフレームを決定する。
<VAR>spec</VAR>の1つより多くの要素が指定されたフレームに一致する場合、
そのフレームに一致した最初の要素だけを用いる。
<VAR>display</VAR>には2つの可能性がある。
<P>

<DL COMPACT>
<DT><CODE>t</CODE>
<DD><VAR>spec</VAR>の要素はすべてのフレームで一致する。
したがって、<VAR>spec</VAR>の以降の要素をけっして使わない。
通常、<CODE>t</CODE>は<VAR>spec</VAR>の最後の（あるいは唯一）の要素に使う。
<P>

<DT>リスト
<DD><VAR>display</VAR>がリストであると、
各要素は<CODE>(<VAR>characteristic</VAR> <VAR>value</VAR><small>...</small>)</CODE>の形であること。
ここで、<VAR>characteristic</VAR>はフレームの分類方法であり、
<VAR>value</VAR>は<VAR>display</VAR>を適用すべき分類とみなす値である。
特性<VAR>characteristic</VAR>の可能な値はつぎのとおりである。
<P>

<DL COMPACT>
<DT><CODE>type</CODE>
<DD>フレームが使用するウィンドウシステムの種類であり、
<CODE>x</CODE>、<CODE>pc</CODE>（MS-DOSのコンソール）、
<CODE>w32</CODE>（MS Windows 9X/NT）、<CODE>tty</CODE>のいずれかである。
<P>

<DT><CODE>class</CODE>
<DD>フレームで扱える表示色の種類であり、
<CODE>color</CODE>、<CODE>grayscale</CODE>、<CODE>mono</CODE>のいずれかである。
<P>

<DT><CODE>background</CODE>
<DD>背景の種類であり、<CODE>light</CODE>か<CODE>dark</CODE>のいずれかである。
</DL>
<P>

<VAR>display</VAR>の1つの要素において、
指定された<VAR>characteristic</VAR>に
1つより多くの<VAR>value</VAR>を指定すると、
それらのいずれの値でも受け入れる。
<VAR>display</VAR>に1つより多くの要素がある場合、
各要素は異なる<VAR>characteristic</VAR>を指定すること。
そうすれば、フレームの<EM>各</EM>特性は
<VAR>display</VAR>に指定されたそのフレーム向けの
<VAR>value</VAR>の1つに一致するはずである。
</DL>
</DL>
<P>

標準フェイス<CODE>region</CODE>を<CODE>defface</CODE>で
定義するとつぎのようになります。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(defface region
         ((((class color) (background dark))
           (:background "blue"))
          (t (:background "gray")))
  "Used for displaying the region.")
</pre></td></tr></table><P>

内部的には<CODE>defface</CODE>は、
<CODE>defface</CODE>に指定されたフェイス属性の記録には
シンボルの属性<CODE>face-defface-spec</CODE>、
カスタマイズバッファでユーザーが保存した属性の記録には
<CODE>saved-face</CODE>、
説明文字列の記録には<CODE>face-documentation</CODE>を使います。
<P>

<A NAME="IDX2934"></A>
<A NAME="IDX2935"></A>
<DL>
<DT><U>User Option:</U> <B>frame-background-mode</B>
<DD>このオプションが<CODE>nil</CODE>以外であると、
フェイスの定義を解釈する際に用いる背景の型を指定する。
これが<CODE>dark</CODE>であると、
実際の背景色に関わらずEmacsはすべてのフレームの背景は暗いとみなす。
これが<CODE>light</CODE>であると、
Emacsはすべてのフレームの背景は明るいとみなす。
</DL>
<P>

<A NAME="Merging Faces"></A>
<HR SIZE="6">
<br><A NAME="SEC614"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC613"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC615"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Merging Faces"></A>
<H3> 37.10.3 表示向けにフェイスを併合する </H3>
<!--docid::SEC614::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Merging%20Faces">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Merging%20Faces</a>"<br>
"texi/elisp21/表示向けにフェイスを併合する"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%C9%BD%BC%A8%B8%FE%A4%B1%A4%CB%A5%D5%A5%A7%A5%A4%A5%B9%A4%F2%CA%BB%B9%E7%A4%B9%A4%EB">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

テキストの表示に使用するフェイスを指定する方法はつぎのとおりです。
<P>

<UL>
<LI>
デフォルトを使う。
各フレームには<EM>デフォルトのフェイス</EM>があり、
他のフェイスを指定していないすべてのテキストに使用される。
（Emacsの将来の版では、
すべてのテキスト向けのデフォルトに変更するかもしれない。）
<P>

<LI>
テキスト属性を使う。
文字は属性<CODE>face</CODE>を持てる。
それがある場合、そのフェイスで表示される。
see 節 <A HREF="elisp_32.html#SEC517">31.19.4 特別な意味を持つ属性</A>。
<P>

文字に属性<CODE>mouse-face</CODE>がある場合は、
マウスが文字に『十分近い』ときには属性<CODE>face</CODE>のかわりにそれを使う。
<P>

<LI>
オーバレイを使う。
オーバレイは属性<CODE>face</CODE>や<CODE>mouse-face</CODE>を持てる。
そのオーバレイが覆うすべてのテキストに適用される。
<P>

<LI>
活性なリージョンを使う。
暫定マーク（transient-mark）モードでは、
リージョンを特定のフェイス（下記の<CODE>region-face</CODE>を参照）
で強調表示する。
<P>

<LI>
特別な字形を使う。
各字形では特定のフェイス番号を指定できる。
see 節 <A HREF="elisp_38.html#SEC622">37.14.3 字形</A>。
</UL>
<P>

ある文字に対してこれらのさまざまな指定が
1つより多くのフェイスを指定する場合、
Emacsは指定されたさまざまなフェイスの属性を併合します。
特別な字形のフェイスが最初です。
適切ならば、つぎはリージョンの強調表示のフェイスです。
そのつぎはオーバレイのフェイスの属性、
さらにテキスト属性のフェイスが続き、
最後はデフォルトのフェイスです。
<P>

複数のオーバレイが1つの文字を覆う場合、
高い優先順位のオーバレイが低いものに優先します。
See 節 <A HREF="elisp_38.html#SEC607">37.8 オーバレイ</A>。
<P>

フォントや表示色のような属性がうえのどれでも指定されていない場合には、
フレーム独自のフォントや表示色を使います。
<P>

<A NAME="Face Functions"></A>
<HR SIZE="6">
<br><A NAME="SEC615"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC614"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC616"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Face Functions"></A>
<H3> 37.10.4 フェイスを扱う関数 </H3>
<!--docid::SEC615::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Face%20Functions">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Face%20Functions</a>"<br>
"texi/elisp21/フェイスを扱う関数"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%D5%A5%A7%A5%A4%A5%B9%A4%F2%B0%B7%A4%A6%B4%D8%BF%F4">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

フェイスの属性で指定できるのは、フォント、前景色、背景色、下線です。
フェイスでは値<CODE>nil</CODE>を指定することでこれらを未指定にできます。
<P>

以下は、フェイスを作成したり変更する基本関数です。
<P>

<A NAME="IDX2936"></A>
<DL>
<DT><U>Function:</U> <B>make-face</B> <I>name</I>
<DD>この関数は、すべての属性を<CODE>nil</CODE>とした
<VAR>name</VAR>という名前の新たなフェイスを定義する。
<VAR>name</VAR>という名前のフェイスが既存ならばなにもしない。
</DL>
<P>

<A NAME="IDX2937"></A>
<DL>
<DT><U>Function:</U> <B>face-list</B>
<DD>この関数は、定義済みのすべてのフェイス名のリストを返す。
</DL>
<P>

<A NAME="IDX2938"></A>
<DL>
<DT><U>Function:</U> <B>copy-face</B> <I>old-face new-name &#38;optional frame new-frame</I>
<DD>この関数は、既存の<VAR>old-face</VAR>という名前のフェイスのコピーとして
フェイス<VAR>new-name</VAR>を定義する。
<VAR>new-name</VAR>が既存でなければ、フェイス<VAR>new-name</VAR>を作成する。
<P>

省略可能な引数フレーム<VAR>frame</VAR>を指定すると、
この関数はそのフレームだけに適用する。
さもなければ、各フレームにおいて個別に、
そのフレームの<VAR>old-face</VAR>の属性を
同じフレームの<VAR>new-face</VAR>にコピーする。
<P>

省略可能な引数フレーム<VAR>new-frame</VAR>を指定すると、
<CODE>copy-face</CODE>は
フレーム<VAR>frame</VAR>の<VAR>old-face</VAR>の属性を
フレーム<VAR>new-frame</VAR>の<VAR>new-face</VAR>にコピーする。
</DL>
<P>

以下の関数を使って既存のフレームの属性を変更できます。
フレーム<VAR>frame</VAR>を指定すると、そのフレームだけに影響します。
さもなければ、新たなフレームに適用されるデフォルトに加えて
すべてのフレームに影響します。
<P>

<A NAME="IDX2939"></A>
<DL>
<DT><U>Function:</U> <B>set-face-foreground</B> <I>face color &#38;optional frame</I>
<DD><A NAME="IDX2940"></A>
<DT><U>Function:</U> <B>set-face-background</B> <I>face color &#38;optional frame</I>
<DD>これらの関数は、フェイス<VAR>face</VAR>の前景色（あるいは背景色）として
<VAR>color</VAR>を設定する。
引数<VAR>color</VAR>は、表示色名の文字列であること。
<P>

白黒スクリーンでは、濃淡は点猫パターンで実現する。
</DL>
<P>

<A NAME="IDX2941"></A>
<DL>
<DT><U>Function:</U> <B>set-face-stipple</B> <I>face pattern &#38;optional frame</I>
<DD>この関数は、フェイス<VAR>face</VAR>の背景点猫パターンとして
<VAR>pattern</VAR>を設定する。
引数<VAR>pattern</VAR>は、Xサーバーで定義された背景点猫パターンの名前であること。
あるいは、点猫を使わないことを意味する<CODE>nil</CODE>であること。
<P>

白黒階調の特定の濃淡を扱うために自動的に点猫パターンを使うため、
普通は点猫パターンに注意する必要はない。
</DL>
<P>

<A NAME="IDX2942"></A>
<DL>
<DT><U>Function:</U> <B>set-face-font</B> <I>face font &#38;optional frame</I>
<DD>この関数は、フェイス<VAR>face</VAR>のフォントを設定する。
引数<VAR>font</VAR>は、読者のシステムの正しいフォント名か
Emacsのフォントセット名（see 節 <A HREF="elisp_29.html#SEC458">28.20 フォントセット</A>）の文字列であること。
フォントを明示的に設定するとつねに正確にそれを使うため、
太字（bold）や斜体（italic）の属性の効果は消失することに注意。
</DL>
<P>

<A NAME="IDX2943"></A>
<DL>
<DT><U>Function:</U> <B>set-face-bold-p</B> <I>face bold-p &#38;optional frame</I>
<DD><A NAME="IDX2944"></A>
この関数は、フェイス<VAR>face</VAR>の太字（bold）の属性を設定する。
<CODE>nil</CODE>以外は太字あり、<CODE>nil</CODE>は太字なしを意味する。
</DL>
<P>

<A NAME="IDX2945"></A>
<DL>
<DT><U>Function:</U> <B>set-face-italic-p</B> <I>face italic-p &#38;optional frame</I>
<DD><A NAME="IDX2946"></A>
この関数は、フェイス<VAR>face</VAR>の斜体（italic）の属性を設定する。
<CODE>nil</CODE>以外は斜体あり、<CODE>nil</CODE>は斜体なしを意味する。
</DL>
<P>

<A NAME="IDX2947"></A>
<DL>
<DT><U>Function:</U> <B>set-face-underline-p</B> <I>face underline-p &#38;optional frame</I>
<DD>この関数は、フェイス<VAR>face</VAR>の下線の属性を設定する。
<CODE>nil</CODE>以外は下線あり、<CODE>nil</CODE>は下線なしを意味する。
</DL>
<P>

<A NAME="IDX2948"></A>
<DL>
<DT><U>Function:</U> <B>invert-face</B> <I>face &#38;optional frame</I>
<DD>フェイス<VAR>face</VAR>の前景色と背景色を入れ換える。
フェイスに前景色と背景色の両者が設定されていないと、
その前景色と背景色にはデフォルトの背景色と前景色を設定する。
</DL>
<P>

つぎの関数は、フェイスの属性を調べます。
フレーム<VAR>frame</VAR>を指定しない場合、
新たなフレーム向けのデフォルトのデータを参照します。
<P>

<A NAME="IDX2949"></A>
<DL>
<DT><U>Function:</U> <B>face-foreground</B> <I>face &#38;optional frame</I>
<DD><A NAME="IDX2950"></A>
<DT><U>Function:</U> <B>face-background</B> <I>face &#38;optional frame</I>
<DD>この関数は、フェイス<VAR>face</VAR>の前景色（あるいは背景色）を
文字列で返す。
</DL>
<P>

<A NAME="IDX2951"></A>
<DL>
<DT><U>Function:</U> <B>face-stipple</B> <I>face &#38;optional frame</I>
<DD>この関数は、フェイス<VAR>face</VAR>の背景点猫パターンの名前を返す。
なければ<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="IDX2952"></A>
<DL>
<DT><U>Function:</U> <B>face-font</B> <I>face &#38;optional frame</I>
<DD>この関数はフェイス<VAR>face</VAR>のフォントの名前を返す。
</DL>
<P>

<A NAME="IDX2953"></A>
<DL>
<DT><U>Function:</U> <B>face-bold-p</B> <I>face &#38;optional frame</I>
<DD><A NAME="IDX2954"></A>
この関数はフェイス<VAR>face</VAR>の太字（bold）属性を返す。
</DL>
<P>

<A NAME="IDX2955"></A>
<DL>
<DT><U>Function:</U> <B>face-italic-p</B> <I>face &#38;optional frame</I>
<DD><A NAME="IDX2956"></A>
この関数はフェイス<VAR>face</VAR>の斜体（italic）属性を返す。
</DL>
<P>

<A NAME="IDX2957"></A>
<DL>
<DT><U>Function:</U> <B>face-underline-p</B> <I>face &#38;optional frame</I>
<DD>この関数はフェイス<VAR>face</VAR>の下線属性を返す。
</DL>
<P>

<A NAME="IDX2958"></A>
<DL>
<DT><U>Function:</U> <B>face-id</B> <I>face</I>
<DD>この関数はフェイス<VAR>face</VAR>のフェイス番号を返す。
</DL>
<P>

<A NAME="IDX2959"></A>
<DL>
<DT><U>Function:</U> <B>face-documentation</B> <I>face</I>
<DD><A NAME="IDX2960"></A>
この関数はフェイス<VAR>face</VAR>の説明文字列を返す。
なければ<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="IDX2961"></A>
<DL>
<DT><U>Function:</U> <B>face-equal</B> <I>face1 face2 &#38;optional frame</I>
<DD>この関数は、フェイス<VAR>face1</VAR>と<VAR>face2</VAR>が
表示上の同じ属性を持てば<CODE>t</CODE>を返す。
</DL>
<P>

<A NAME="IDX2962"></A>
<DL>
<DT><U>Function:</U> <B>face-differs-from-default-p</B> <I>face &#38;optional frame</I>
<DD>この関数は、フェイス<VAR>face</VAR>の表示がデフォルトのフェイスの表示と
異なる場合には<CODE>t</CODE>を返す。
フェイスの各属性がデフォルトフェイスの対応する属性に等しいか
（デフォルトから継承すること意味する）<CODE>nil</CODE>であると、
フェイスはデフォルトのフェイスと『等しい』とみなす。
</DL>
<P>

<A NAME="IDX2963"></A>
<DL>
<DT><U>Variable:</U> <B>region-face</B>
<DD>この変数の値は、リージョンが活性（暫定マーク（transient-mark）モードのみ）
の場合にリージョン内の文字の表示に使用するフェイス番号を指定する。
リージョン内の文字では、これが指定するフェイスが
テキスト属性やオーバレイのすべてのフェイスに優先する。
暫定マーク（transient-mark）モードについて詳しくは、see 節 <A HREF="elisp_31.html#SEC481">30.7 マーク</A>。
<P>

通常、値は<CODE>region</CODE>という名前のフェイスのフェイス番号である。
</DL>
<P>

<A NAME="IDX2964"></A>
<A NAME="IDX2965"></A>
<DL>
<DT><U>Function:</U> <B>frame-update-face-colors</B> <I>frame</I>
<DD>この関数は、フレーム<VAR>frame</VAR>の前景色や背景色を変更後に
フレーム<VAR>frame</VAR>上のフェイスの表示を更新する。
</DL>
<P>

<A NAME="Blinking"></A>
<HR SIZE="6">
<br><A NAME="SEC616"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC615"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC617"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Blinking"></A>
<H2> 37.11 括弧を点滅する </H2>
<!--docid::SEC616::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Blinking">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Blinking</a>"<br>
"texi/elisp21/括弧を点滅する"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%B3%E7%B8%CC%A4%F2%C5%C0%CC%C7%A4%B9%A4%EB">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX2966"></A>
<A NAME="IDX2967"></A>
<A NAME="IDX2968"></A>
<A NAME="IDX2969"></A>
<P>

本節では、ユーザーが閉じ括弧を挿入したときに
Emacsが対応する開き括弧を指し示す機構について述べます。
<P>

<A NAME="IDX2970"></A>
<DL>
<DT><U>Variable:</U> <B>blink-paren-function</B>
<DD>この変数の値は、閉じ括弧構文の文字が挿入されるたびに
呼び出される（引数なしの）関数であること。
<CODE>blink-paren-function</CODE>の値が<CODE>nil</CODE>であると、なにもしない。
</DL>
<P>

<A NAME="IDX2971"></A>
<DL>
<DT><U>User Option:</U> <B>blink-matching-paren</B>
<DD>この変数が<CODE>nil</CODE>であると、<CODE>blink-matching-open</CODE>はなにもしない。
</DL>
<P>

<A NAME="IDX2972"></A>
<DL>
<DT><U>User Option:</U> <B>blink-matching-paren-distance</B>
<DD>この変数は、対応する括弧の走査を諦めるまでの最大距離を指定する。
</DL>
<P>

<A NAME="IDX2973"></A>
<DL>
<DT><U>User Option:</U> <B>blink-matching-delay</B>
<DD>この関数は、対応する括弧にカーソルを留める秒数を指定する。
秒未満を指定してもしばしば結果は良好であるが、
デフォルトはすべてのシステムで動作する1である。
</DL>
<P>

<A NAME="IDX2974"></A>
<DL>
<DT><U>コマンド:</U> <B>blink-matching-open</B>
<DD>この関数は、<CODE>blink-paren-function</CODE>のデフォルト値である。
閉じ括弧構文の文字のうしろにポイントがあることを仮定し、
カーソルを対応する開き括弧へ一時的に移動する。
その文字がスクリーン上になければ、
その文字が現れる文脈をエコー領域に表示する。
遅れが大きくならないように、
<CODE>blink-matching-paren-distance</CODE>文字より離れては探さない。
<P>

つぎは、この関数を明示的に呼び出す例である。
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>(defun interactive-blink-matching-open ()
  "Indicate momentarily the start of sexp before point."
  (interactive)
  (let ((blink-matching-paren-distance
         (buffer-size))
        (blink-matching-paren t))
    (blink-matching-open)))
</FONT></pre></td></tr></table></DL>
<P>

<A NAME="Inverse Video"></A>
<HR SIZE="6">
<br><A NAME="SEC617"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC616"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC618"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Inverse Video"></A>
<H2> 37.12 反転表示 </H2>
<!--docid::SEC617::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Inverse%20Video">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Inverse%20Video</a>"<br>
"texi/elisp21/反転表示"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%C8%BF%C5%BE%C9%BD%BC%A8">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX2975"></A>
<P>

<A NAME="IDX2976"></A>
<DL>
<DT><U>User Option:</U> <B>inverse-video</B>
<DD><A NAME="IDX2977"></A>
この変数は、スクリーン上のすべてのテキストに
反転表示を使うかどうかを制御する。
<CODE>nil</CODE>以外は使うことを意味し、
<CODE>nil</CODE>は使わないことを意味する。
デフォルトは<CODE>nil</CODE>である。
</DL>
<P>

<A NAME="IDX2978"></A>
<DL>
<DT><U>User Option:</U> <B>mode-line-inverse-video</B>
<DD>この変数は、モード行に反転表示を使うかどうかを制御する。
<CODE>nil</CODE>以外であると、モード行を反転表示する。
さもなければ、テキストと同様にモード行を普通に表示する。
デフォルトは<CODE>t</CODE>である。
<P>

ウィンドウフレームでは、
<CODE>modeline</CODE>という名前のフェイスを使ってモード行を表示する。
このフェイスは、変更していなければ、デフォルトフェイスの反転表示である。
</DL>
<P>

<A NAME="Usual Display"></A>
<HR SIZE="6">
<br><A NAME="SEC618"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC617"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC619"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Usual Display"></A>
<H2> 37.13 通常の画面表示慣習 </H2>
<!--docid::SEC618::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Usual%20Display">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Usual%20Display</a>"<br>
"texi/elisp21/通常の画面表示慣習"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%C4%CC%BE%EF%A4%CE%B2%E8%CC%CC%C9%BD%BC%A8%B4%B7%BD%AC">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

通常の画面表示慣習は、各文字コードをどのように表示するかを定義します。
表示テーブル（see 節 <A HREF="elisp_38.html#SEC619">37.14 表示テーブル</A>）を設定すれば、
これらの慣習を無効にできます。
通常の画面表示慣習をつぎに示します。
<P>

<UL>
<LI>
文字コード32から126は、字形コード32から126に対応付ける。
これは各文字をそのまま表示することを普通は意味する。
<P>

<LI>
文字コード9は水平タブである。
<CODE>tab-width</CODE>で決定される位置まで空白として表示する。
<P>

<LI>
文字コード10は改行である。
<P>

<LI>
0から31の範囲とコード127のコードすべてには、
<CODE>ctl-arrow</CODE>の値に従って2つの表示方法の一方を使う。
<CODE>ctl-arrow</CODE>が<CODE>nil</CODE>以外であると、
これらのコードを2つの字形列に対応付け、
最初の字形は`<SAMP>^</SAMP>'のASCIIコードである。
（表示テーブルで`<SAMP>^</SAMP>'のかわりに使う字形を指定できる。）
さもなければ、これらは128から255の範囲のコードと同様に対応付ける。
<P>

<LI>
文字コード128から255は、4つの字形列に対応付ける。
つまり、最初の字形は`<SAMP>\</SAMP>'のASCIIコード、
残りは文字コードを8進数表示した数字文字である。
（表示テーブルで`<SAMP>\</SAMP>'のかわりに使う字形を指定できる。）
<P>

<LI>
256を越えるマルチバイト文字コードは、そのまま表示する。
あるいは、端末に表示できない文字は、疑問符か白抜きの箱で表示する。
</UL>
<P>

通常の画面表示慣習は、たとえ表示テーブルがあっても、
活性な表示テーブルにおいてその文字に対する項目が<CODE>nil</CODE>であるような
文字すべてに適用されます。
したがって、表示テーブルを設定するときには、
特別なふるまいをさせたい文字だけを指定すればよいのです。
<P>

これらの変数は、特定の文字群のスクリーンへの表示方法に影響します。
これらは文字が占めるコラム数を変化させるので、
字下げ関数にも影響します。
これらの変数は、モード行の表示方法にも影響します。
新たな値を用いてモード行の再表示を強制したいときには、
関数<CODE>force-mode-line-update</CODE>（see 節 <A HREF="elisp_23.html#SEC350">22.3 モード行の書式</A>）を
呼び出します。
<P>

<A NAME="IDX2979"></A>
<DL>
<DT><U>User Option:</U> <B>ctl-arrow</B>
<DD><A NAME="IDX2980"></A>
このバッファローカルな変数は、
コントロール文字の表示方法を制御する。
<CODE>nil</CODE>以外であると、`<SAMP>^A</SAMP>'のように
カレットに続けて文字を表示する。
<CODE>nil</CODE>であると、`<SAMP>\001</SAMP>'のように
バックスラッシュに続けて3桁の8進数字で表示する。
</DL>
<P>

<A NAME="IDX2981"></A>
<DL>
<DT><U>Variable:</U> <B>default-ctl-arrow</B>
<DD>この変数の値は、<CODE>ctl-arrow</CODE>を書き換えていないバッファ向けの
<CODE>ctl-arrow</CODE>のデフォルト値である。
see 節 <A HREF="elisp_11.html#SEC153">10.10.3 バッファローカル変数のデフォルト値</A>。
</DL>
<P>

<A NAME="IDX2982"></A>
<DL>
<DT><U>User Option:</U> <B>tab-width</B>
<DD>この変数の値は、Emacsのバッファ内のタブ文字の表示に使う
タブストップの間隔である。
デフォルトは8である。
この機能は、コマンド<CODE>tab-to-tab-stop</CODE>で設定する
ユーザー設定可能なタブストップとはまったく独立であることに注意。
see 節 <A HREF="elisp_32.html#SEC510">31.17.5 調整可能な『タブストップ』</A>。
</DL>
<P>

<A NAME="Display Tables"></A>
<HR SIZE="6">
<br><A NAME="SEC619"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC618"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC620"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Display Tables"></A>
<H2> 37.14 表示テーブル </H2>
<!--docid::SEC619::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Display%20Tables">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Display%20Tables</a>"<br>
"texi/elisp21/表示テーブル"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%C9%BD%BC%A8%A5%C6%A1%BC%A5%D6%A5%EB">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

<A NAME="IDX2983"></A>
<EM>表示テーブル</EM>（display table）機能を使って、
すべての可能な文字コードのスクリーンへの表示方法を制御できます。
これは、ASCII文字集合にない文字を用いる
ヨーロッパの言語を表示するのに有用です。
<P>

表示テーブルは、各文字コードを<EM>字形</EM>（glyph）の列に対応付けます。
各字形は、スクリーン上で1文字を占める像です。
<EM>字形テーブル</EM>（glyph table）を使えば、
読者の端末に各字形を表示する方法を定義することもできます。
<P>

表示テーブルは、モード行の表示方法にも影響します。
新たな表示テーブルを用いてモード行の再表示を強制したいときには、
関数<CODE>force-mode-line-update</CODE>（see 節 <A HREF="elisp_23.html#SEC350">22.3 モード行の書式</A>）を
呼び出します。
<P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC620">37.14.1 表示テーブルの書式</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">What a display table consists of.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC621">37.14.2 活性な表示テーブル</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How Emacs selects a display table to use.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_38.html#SEC622">37.14.3 字形</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to define a glyph, and what glyphs mean.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Display Table Format"></A>
<HR SIZE="6">
<br><A NAME="SEC620"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC619"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC621"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Display Table Format"></A>
<H3> 37.14.1 表示テーブルの書式 </H3>
<!--docid::SEC620::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Display%20Table%20Format">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Display%20Table%20Format</a>"<br>
"texi/elisp21/表示テーブルの書式"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%C9%BD%BC%A8%A5%C6%A1%BC%A5%D6%A5%EB%A4%CE%BD%F1%BC%B0">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

表示テーブルは、実際にはサブタイプが<CODE>display-table</CODE>である
文字テーブル（see 節 <A HREF="elisp_7.html#SEC99">6.6 文字テーブル</A>）です。
<P>

<A NAME="IDX2984"></A>
<DL>
<DT><U>Function:</U> <B>make-display-table</B>
<DD>表示テーブルを作成して返す。
テーブルのすべての要素の初期値は<CODE>nil</CODE>である。
</DL>
<P>

表示テーブルの通常の要素は、文字コードで添字付けします。
添字<VAR>c</VAR>の要素は、文字コード<VAR>c</VAR>の表示方法を指定します。
値は<CODE>nil</CODE>であるか、字形の値のベクトル（see 節 <A HREF="elisp_38.html#SEC622">37.14.3 字形</A>）です。
要素が<CODE>nil</CODE>であると、その文字を通常の画面表示慣習
（see 節 <A HREF="elisp_38.html#SEC618">37.13 通常の画面表示慣習</A>）に従って表示する指定です。
<P>

表示テーブルを使って改行文字の表示を変更すると、
バッファ全体は長い1つの『行』として表示されます。
<P>

表示テーブルには6つの『追加スロット』もあり、
それらは特別な目的を果たします。
それらの意味をつぎに示します。
スロットの内容が<CODE>nil</CODE>であると、
そのスロットに対して以下に述べる
デフォルトを使うことを意味します。
<P>

<DL COMPACT>
<DT>0
<DD>切り詰めたスクリーン行の末尾に使う字形
（デフォルトは`<SAMP>$</SAMP>'）。
see 節 <A HREF="elisp_38.html#SEC622">37.14.3 字形</A>。
<DT>1
<DD>継続している行の末尾に使う字形
（デフォルトは`<SAMP>\</SAMP>'）。
<DT>2
<DD>文字を8進数文字コードで表示したことを表す字形
（デフォルトは`<SAMP>\</SAMP>'）。
<DT>3
<DD>コントロール文字を表す字形
（デフォルトは`<SAMP>^</SAMP>'）。
<DT>4
<DD>符可視な行があることを表す字形のベクトル
（デフォルトは`<SAMP>...</SAMP>'）。
see 節 <A HREF="elisp_38.html#SEC604">37.5 選択表示</A>。
<DT>5
<DD>左右に隣り合ったウィンドウの境界に使う字形
（デフォルトは`<SAMP>|</SAMP>'）。
see 節 <A HREF="elisp_28.html#SEC418">27.2 ウィンドウの分割</A>。
</DL>
<P>

たとえば、<CODE>ctl-arrow</CODE>に<CODE>nil</CODE>以外の値を設定した効果を
模倣する表示テーブルの作成方法をつぎに示します。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq disptab (make-display-table))
(let ((i 0))
  (while (&#60; i 32)
    (or (= i ?\t) (= i ?\n)
        (aset disptab i (vector ?^ (+ i 64))))
    (setq i (1+ i)))
  (aset disptab 127 (vector ?^ ??)))
</pre></td></tr></table><P>

<A NAME="IDX2985"></A>
<DL>
<DT><U>Function:</U> <B>display-table-slot</B> <I>display-table slot</I>
<DD><A NAME="IDX2986"></A>
この関数は表示テーブル<VAR>display-table</VAR>の
追加スロット<VAR>slot</VAR>の値を返す。
引数<VAR>slot</VAR>は0から5までの数であるか、
スロット名（シンボル）であること。
正しいシンボルは、<CODE>truncation</CODE>、<CODE>wrap</CODE>、
<CODE>escape</CODE>、<CODE>control</CODE>、<CODE>selective-display</CODE>、
<CODE>vertical-border</CODE>である。
</DL>
<P>

<A NAME="IDX2987"></A>
<DL>
<DT><U>Function:</U> <B>set-display-table-slot</B> <I>display-table slot value</I>
<DD><A NAME="IDX2988"></A>
この関数は表示テーブル<VAR>display-table</VAR>の
追加スロット<VAR>slot</VAR>に値<VAR>value</VAR>を保存する。
引数<VAR>slot</VAR>は0から5までの数であるか、
スロット名（シンボル）であること。
正しいシンボルは、<CODE>truncation</CODE>、<CODE>wrap</CODE>、
<CODE>escape</CODE>、<CODE>control</CODE>、<CODE>selective-display</CODE>、
<CODE>vertical-border</CODE>である。
</DL>
<P>

<A NAME="Active Display Table"></A>
<HR SIZE="6">
<br><A NAME="SEC621"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC620"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC622"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Active Display Table"></A>
<H3> 37.14.2 活性な表示テーブル </H3>
<!--docid::SEC621::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Active%20Display%20Table">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Active%20Display%20Table</a>"<br>
"texi/elisp21/活性な表示テーブル"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%B3%E8%C0%AD%A4%CA%C9%BD%BC%A8%A5%C6%A1%BC%A5%D6%A5%EB">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX2989"></A>
<P>

各ウィンドウに表示テーブルを指定でき、
各バッファにも表示テーブルを指定できます。
バッファ<VAR>b</VAR>がウィンドウ<VAR>w</VAR>に表示されているとき、
ウィンドウ<VAR>w</VAR>に表示テーブルがあればそれを使って表示します。
さもなければ、バッファ<VAR>b</VAR>に表示テーブルがあればそれを使います。
それ以外では、標準の表示テーブルがあればそれを使います。
選択されている表示テーブルを<EM>活性な</EM>表示テーブルと呼びます。
<P>

<A NAME="IDX2990"></A>
<DL>
<DT><U>Function:</U> <B>window-display-table</B> <I>window</I>
<DD>この関数は、ウィンドウ<VAR>window</VAR>の表示テーブルを返す。
<VAR>window</VAR>に表示テーブルが割り付けられていなければ<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="IDX2991"></A>
<DL>
<DT><U>Function:</U> <B>set-window-display-table</B> <I>window table</I>
<DD>この関数は、ウィンドウ<VAR>window</VAR>の表示テーブルとして
<VAR>table</VAR>を設定する。
引数<VAR>table</VAR>は、表示テーブルであるか<CODE>nil</CODE>であること。
</DL>
<P>

<A NAME="IDX2992"></A>
<DL>
<DT><U>Variable:</U> <B>buffer-display-table</B>
<DD>この変数はすべてのバッファで自動的にバッファローカルである。
バッファでの値は、そのバッファに対して用いる表示テーブルを指定する。
それが<CODE>nil</CODE>であると、バッファに表示テーブルを
割り付けていないことを意味する。
</DL>
<P>

<A NAME="IDX2993"></A>
<DL>
<DT><U>Variable:</U> <B>standard-display-table</B>
<DD>この変数の値はデフォルトの表示テーブルであり、
ウィンドウに表示テーブルがなく
そのウィンドウのバッファにも表示テーブルがない場合に使われる。
この変数はデフォルトでは<CODE>nil</CODE>である。
</DL>
<P>

特定のウィンドウにおいて使用する表示テーブルがない場合には、
つまり、ウィンドウで未指定であり、そのバッファでも未指定であり、
<CODE>standard-display-table</CODE>が<CODE>nil</CODE>である場合には、
そのウィンドウ内のすべての文字コードには通常の画面表示慣習を使います。
See 節 <A HREF="elisp_38.html#SEC618">37.13 通常の画面表示慣習</A>。
<P>

<A NAME="Glyphs"></A>
<HR SIZE="6">
<br><A NAME="SEC622"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC621"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC623"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Glyphs"></A>
<H3> 37.14.3 字形 </H3>
<!--docid::SEC622::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Glyphs">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Glyphs</a>"<br>
"texi/elisp21/字形"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%BB%FA%B7%C1">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

<A NAME="IDX2994"></A>
<EM>字形</EM>（glyph）は、文字を一般化したものです。
スクリーン上で1文字を占める像を表します。
文字と同様に、字形はLispでは整数で表現します。
<P>

<A NAME="IDX2995"></A>
字形としての各整数の意味は、字形テーブルで定義されます。
これは変数<CODE>glyph-table</CODE>の値です。
<P>

<A NAME="IDX2996"></A>
<DL>
<DT><U>Variable:</U> <B>glyph-table</B>
<DD>この変数の値は、現在の字形テーブルである。
これはベクトルであること。
<VAR>g</VAR>番目の要素は、字形コード<VAR>g</VAR>を定義する。
値がベクトルではなく<CODE>nil</CODE>であると、
すべての字形は単純（下記参照）である。
</DL>
<P>

字形テーブルの要素として可能な型はつぎのとおりです。
<P>

<DL COMPACT>
<DT><VAR>string</VAR>
<DD>この字形を出力するために端末へ<VAR>string</VAR>の文字群を送出する。
これは文字端末では使えるがウィンドウシステムでは使えない。
<P>

<DT><VAR>integer</VAR>
<DD>この字形コードを字形コード<VAR>integer</VAR>の別称として定義する。
字形に対してフェイスコードを指定するために別称を使うことができる。
下記参照。
<P>

<DT><CODE>nil</CODE>
<DD>この字形は単純である。
通常の端末では、字形コード mod 524288 は出力すべき文字である。
ウィンドウシステムでは、字形コード mod 524288 は出力すべき文字あり、
字形コードを524288で除した値は出力中に使用すべきフェイス番号
（see 節 <A HREF="elisp_38.html#SEC615">37.10.4 フェイスを扱う関数</A>）である。
（524288は
2**19。）
see 節 <A HREF="elisp_38.html#SEC611">37.10 フェイス</A>。
</DL>
<P>

字形コードが字形テーブルの長さに等しいか大きいと、
そのコードは自動的に単純とします。
<P>

<A NAME="Beeping"></A>
<HR SIZE="6">
<br><A NAME="SEC623"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC622"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC624"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Beeping"></A>
<H2> 37.15 ベルを鳴らす </H2>
<!--docid::SEC623::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Beeping">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Beeping</a>"<br>
"texi/elisp21/ベルを鳴らす"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%D9%A5%EB%A4%F2%CC%C4%A4%E9%A4%B9">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX2997"></A>
<P>

本節では、ユーザーの注意を引くためにEmacsにベルを鳴らせる
（あるいはスクリーンを点滅させる）方法について述べます。
ベルを鳴らす頻度はなるべく控えめにしてください。
頻繁にベルが鳴るとわずらわしいものです。
エラーを通知するほうがふさわしいときには、
単にベルを鳴らさないように注意してください。
（see 節 <A HREF="elisp_10.html#SEC130">9.5.3 エラー</A>。）
<P>

<A NAME="IDX2998"></A>
<DL>
<DT><U>Function:</U> <B>ding</B> <I>&#38;optional do-not-terminate</I>
<DD><A NAME="IDX2999"></A>
この関数は、ベルを鳴らすかスクリーンを点滅する
（下記の<CODE>visible-bell</CODE>を参照）。
また、<VAR>do-not-terminate</VAR>が<CODE>nil</CODE>であると
現在実行中のキーボードマクロを終了する。
</DL>
<P>

<A NAME="IDX3000"></A>
<DL>
<DT><U>Function:</U> <B>beep</B> <I>&#38;optional do-not-terminate</I>
<DD><CODE>ding</CODE>の同義語。
</DL>
<P>

<A NAME="IDX3001"></A>
<DL>
<DT><U>User Option:</U> <B>visible-bell</B>
<DD>この変数は、ベルを鳴らすかわりにスクリーンを点滅させるかどうかを決定する。
<CODE>nil</CODE>以外であると点滅するを意味し、
<CODE>nil</CODE>であると点滅しないを意味する。
これは、ウィンドウシステムを用いている場合か、
端末のtermcapの定義にビジュアルベル機能（`<SAMP>vb</SAMP>'）がある
文字端末で有効である。
</DL>
<P>

<A NAME="IDX3002"></A>
<DL>
<DT><U>Variable:</U> <B>ring-bell-function</B>
<DD><A NAME="IDX3003"></A>
これが<CODE>nil</CODE>以外であると、
Emacsに『ベルを鳴らす』方法を指定する。
この値は、引数なしの関数であること。
</DL>
<P>

<A NAME="Window Systems"></A>
<HR SIZE="6">
<br><A NAME="SEC624"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_38.html#SEC623"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_39.html#SEC625"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Window Systems"></A>
<H2> 37.16 ウィンドウシステム </H2>
<!--docid::SEC624::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Window%20Systems">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Window%20Systems</a>"<br>
"texi/elisp21/ウィンドウシステム"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6%A5%B7%A5%B9%A5%C6%A5%E0">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

Emacsはいくつかのウィンドウシステムで、
特にXウィンドウシステムで動作します。
EmacsもXも用語『ウィンドウ』を使いますが、用法は異なります。
Emacsの1つのフレームは、Xでは1つのウィンドウです。
Emacsの個々のウィンドウについては、Xはまったくわかりません。
<P>

<A NAME="IDX3004"></A>
<DL>
<DT><U>Variable:</U> <B>window-system</B>
<DD>この変数は、Emacsが動作しているウィンドウシステムの種類を
Lispプログラムに伝える。
可能な値はつぎのとおりである。
<P>

<DL COMPACT>
<DT><CODE>x</CODE>
<DD><A NAME="IDX3005"></A>
Xを用いて表示している。
<DT><CODE>pc</CODE>
<DD>MSDOSを用いて表示している。
<DT><CODE>w32</CODE>
<DD>Windows NTかWindows 95を用いて表示している。
<DT><CODE>nil</CODE>
<DD>文字ベースの端末を用いて表示している。
</DL>
</DL>
<P>

<A NAME="IDX3006"></A>
<DL>
<DT><U>Variable:</U> <B>window-setup-hook</B>
<DD>この変数は、Emacsが初期化ファイルを処理したあとに実行する
ノーマルフックである。
読者のファイル`<TT>.emacs</TT>'、（あれば）デフォルトの初期化ファイル、
端末固有のLispコードをすべてロードし、
フック<CODE>term-setup-hook</CODE>を実行し終えてから、
このフック実行する。
<P>

このフックは内部目的用であり、
ウィンドウシステムとの通信を設定し、最初のウィンドウを作成する。
ユーザーが干渉すべきではない。
</DL>
<A NAME="Calendar"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<a name="bottom"> </a>
<script type="text/javascript" src="style2.js"></script>
<div class="footer">
    <br>
    このページはMeadow (Emacs) の紹介ページです <br>
このWebページの各文書は自由にリンク・複製・再配布・改変していただいて構いません．
<br>ただし，複製・再配布・改変の場合は Meadow Memo のURLを記載しておいて下さい．<br>
<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=about%20link">Medow memoへのリンクについて</a>．<br>

間違い，要望等があれば<a href="mailto:akihisa@mail.ne.jp">akihisa@mail.ne.jp</a> か下記でどうぞ<br>

<br>

<FORM METHOD="post" ACTION="http://www.bookshelf.jp/cgi-bin/wwwmail.cgi" >
お名前：<INPUT TYPE="text" NAME="name" SIZE="30" MAXLENGTH="40" VALUE="ななしさん"><br>
メールアドレス：<INPUT TYPE="text" NAME="EMAIL" SIZE="25" MAXLENGTH="60" VALUE="secret@mail.adr"><br>
<input type="hidden" name="HPAGE" value="">
つっこみ：<br><TEXTAREA NAME="MESSAGE" ROWS="5" COLS="50">
</TEXTAREA><br><br>
<INPUT TYPE="submit" VALUE="送信">
<INPUT TYPE="reset" VALUE="クリア">
</FORM>

<br><A HREF="http://www.bookshelf.jp/cgi-bin/xct.cgi">ページ別カウンタ</a>
<br> Since 2002/12/13 <br>
</div>

</BODY>

</HTML>
