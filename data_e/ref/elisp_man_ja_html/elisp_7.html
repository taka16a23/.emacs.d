<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML lang="ja">
<!-- Created on October, 1  2005 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html;CHARSET=euc-jp">
<META NAME="keywords" CONTENT="meadow,mule,emacs,lisp,elisp,gnus,setting,設定,unix,cygwin">
<META http-equiv="Content-Script-Type" content="text/javascript">
<META NAME="description" CONTENT="Meadowの設定を紹介するページです">
<TITLE>GNU Emacs Lispリファレンスマニュアル:  シーケンス、配列、ベクトル</TITLE>

<META NAME="description" CONTENT="GNU Emacs Lispリファレンスマニュアル:  シーケンス、配列、ベクトル">
<META NAME="keywords" CONTENT="GNU Emacs Lispリファレンスマニュアル:  シーケンス、配列、ベクトル">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

<LINK REL="contents" HREF="elisp_toc.html#SEC_Contents">
<LINK REL="index" HREF="elisp_48.html#SEC681">
<LINK REL="next" HREF="elisp_8.html#SEC101">
<LINK REL="prev" HREF="elisp_6.html#SEC81">

<META http-equiv="Content-Style-Type" content="text/css">
<!-- 鶯と龜 ←日本語EUC誤判別対策用らしい; -->
<link rel="StyleSheet" href="../../../../soft/css/midnight.css" type="text/css" id="css1">
<script type="text/javascript" src="style1.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../soft/css/meadowmemo.css">

</HEAD>
<BODY LANG="ja" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">
<!--Infoseek Analyzer start-->
<script LANGUAGE="javascript">PgNo=6;</script>
<script src="http://js1.infoseek.co.jp/bin/57/00170.js"></script>
<noscript><a href="http://ax1.www.infoseek.co.jp/bin/go?0017057f" target="_blank">
<img src="http://ax1.www.infoseek.co.jp/bin/logo?0017057f" border=0></a></noscript>
<!--Infoseek Analyzer end-->
<a name="top"> </a>

<br><A NAME="SEC93"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_6.html#SEC92"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_7.html#SEC94"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_6.html#SEC81"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_8.html#SEC101"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Sequences Arrays Vectors"></A>
<H1> 6. シーケンス、配列、ベクトル </H1>
<!--docid::SEC93::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Sequences%20Arrays%20Vectors">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Sequences%20Arrays%20Vectors</a>"<br>
"texi/elisp21/シーケンス、配列、ベクトル"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%B7%A1%BC%A5%B1%A5%F3%A5%B9%A1%A2%C7%DB%CE%F3%A1%A2%A5%D9%A5%AF%A5%C8%A5%EB">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX384"></A>
<P>

<EM>シーケンス</EM>（sequence）型とは、Lispの2つの異なる型の和であることを
思い出してください。
いいかえれば、任意のリストはシーケンスであり、
任意の配列もシーケンスです。
すべてのシーケンスに共通する性質は、
それぞれ、要素の順序付けた集まりであるということです。
<P>

<EM>配列</EM>（array）は、各要素ごとに1つ1つスロットを用意してある
単一の基本オブジェクトです。
すべての要素は一定時間内に参照できますが、既存の配列の長さは変更できません。
文字列、ベクトル、文字テーブル、ブールベクトルは、配列型の4つの型です。
<P>

リストは、要素を並べたものですが、
単一の基本オブジェクトではありません。
コンスセルから作られていて、1つの要素あたり1つのセルがあります。
<VAR>n</VAR>番目の要素を探すには、<VAR>n</VAR>個のコンスセルを調べる必要があるので、
リストの先頭から遠い要素を参照するには余計に時間がかかります。
しかし、リストには要素を追加したり削除したりできます。
<P>

以下の図は、これらの型の関係を示します。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>　　　　　┌────────────────────────┐
　　　　　│　　　　　　シーケンス　　　　　　　　　　　　　│
　　　　　│┌───┐　┌───────────────┐　│
　　　　　││　　　│　│　　　　　　　　　　　　　　　│　│
　　　　　││リスト│　│　　　　　　配列　　　　　　　│　│
　　　　　││　　　│　│　┌────┐　┌───┐　　│　│
　　　　　││　　　│　│　│　　　　│　│　　　｜　　│　│
　　　　　│└───┘　│　│ベクトル│　│文字列｜　　│　│
　　　　　│　　　　　　│　│　　　　│　│　　　｜　　│　│
　　　　　│　　　　　　│　└────┘　└───┘　　│　│
　　　　　│　　　　　　│　┌────┐　┌────┐　│　│
　　　　　│　　　　　　│　│文字　　│　│ブール　│　│　│
　　　　　│　　　　　　│　│テーブル│　│ベクトル│　│　│
　　　　　│　　　　　　│　└────┘　└────┘　│　│
　　　　　│　　　　　　└───────────────┘　│
　　　　　└────────────────────────┘
</pre></td></tr></table><P>

ベクトルやリストの要素は、どんなLispオブジェクトでもかまいません。
文字列の要素はすべて文字です。
<P>

<div class="menuindex"><SCRIPT language=JavaScript src="index6.js"></SCRIPT></div><noscript><BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_7.html#SEC94">6.1 シーケンス</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Functions that accept any kind of sequence.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_7.html#SEC95">6.2 配列</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Characteristics of arrays in Emacs Lisp.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_7.html#SEC96">6.3 配列操作関数</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Functions specifically for arrays.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_7.html#SEC97">6.4 ベクトル</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Special characteristics of Emacs Lisp vectors.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_7.html#SEC98">6.5 ベクトル向け関数</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Functions specifically for vectors.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_7.html#SEC99">6.6 文字テーブル</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to work with char-tables.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_7.html#SEC100">6.7 ブールベクトル</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to work with bool-vectors.</TD></TR>
</TABLE></BLOCKQUOTE></noscript>
<P>

<A NAME="Sequence Functions"></A>
<HR SIZE="6">
<br><A NAME="SEC94"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_7.html#SEC93"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_7.html#SEC95"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Sequence Functions"></A>
<H2> 6.1 シーケンス </H2>
<!--docid::SEC94::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Sequence%20Functions">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Sequence%20Functions</a>"<br>
"texi/elisp21/シーケンス"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%B7%A1%BC%A5%B1%A5%F3%A5%B9">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

Emacs Lispでは、<EM>シーケンス</EM>（sequence）とはリストか配列のことです。
すべてのシーケンスに共通する性質は、
要素の順序付けた集まりであるということです。
本節では任意のシーケンスを受け付ける関数を説明します。
<P>

<A NAME="IDX385"></A>
<DL>
<DT><U>Function:</U> <B>sequencep</B> <I>object</I>
<DD><VAR>object</VAR>が、リスト、ベクトル、あるいは、文字列ならば<CODE>t</CODE>を返し、
さもなければ<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="IDX386"></A>
<DL>
<DT><U>Function:</U> <B>length</B> <I>sequence</I>
<DD><A NAME="IDX387"></A>
<A NAME="IDX388"></A>
<A NAME="IDX389"></A>
<A NAME="IDX390"></A>
<A NAME="IDX391"></A>
<A NAME="IDX392"></A>
<A NAME="IDX393"></A>
<A NAME="IDX394"></A>
この関数は<VAR>sequence</VAR>内の要素の個数を返す。
<VAR>sequence</VAR>が（最後のCDRが<CODE>nil</CODE>ではないため）
リストではないコンスセルであると、
エラー<CODE>wrong-type-argument</CODE>を通知する。
<P>

関連する関数<CODE>safe-length</CODE>については、see 節 <A HREF="elisp_6.html#SEC85">5.4 リストの要素の参照</A>。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(length '(1 2 3))
    => 3
(length ())
    => 0
(length "foobar")
    => 6
(length [1 2 3])
    => 3
(length (make-bool-vector 5 nil))
    => 5
</pre></td></tr></table></DL>
<P>

<A NAME="IDX395"></A>
<DL>
<DT><U>Function:</U> <B>elt</B> <I>sequence index</I>
<DD><A NAME="IDX396"></A>
<A NAME="IDX397"></A>
この関数は<VAR>index</VAR>で添字付けされる<VAR>sequence</VAR>の要素を返す。
<VAR>index</VAR>の正当な値は、0から<VAR>sequence</VAR>の長さより1小さい範囲の
整数である。
<VAR>sequence</VAR>がリストである場合には、
範囲外の<VAR>index</VAR>に対しては<CODE>nil</CODE>を返す。
さもなければエラー<CODE>args-out-of-range</CODE>を引き起こす。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(elt [1 2 3 4] 2)
     => 3
(elt '(1 2 3 4) 2)
     => 3
;; <CODE>string</CODE>を用いて<CODE>elt</CODE>が返す文字を明確にする
(string (elt "1234" 2))
     => "3"
(elt [1 2 3 4] 4)
     error--> Args out of range: [1 2 3 4], 4
(elt [1 2 3 4] -1)
     error--> Args out of range: [1 2 3 4], -1
</pre></td></tr></table><P>

この関数は、<CODE>aref</CODE>（see 節 <A HREF="elisp_7.html#SEC96">6.3 配列操作関数</A>）や
<CODE>nth</CODE>（see 節 <A HREF="elisp_6.html#SEC85">5.4 リストの要素の参照</A>）を汎用にしたものである。
</DL>
<P>

<A NAME="IDX398"></A>
<DL>
<DT><U>Function:</U> <B>copy-sequence</B> <I>sequence</I>
<DD><A NAME="IDX399"></A>
<A NAME="IDX400"></A>
<VAR>sequence</VAR>のコピーを返す。
コピーは、もとのシーケンスと同じ型のオブジェクトであり、
同じ要素が同じ順序で入っている。
<P>

コピーに新たな要素を格納しても、もとの<VAR>sequence</VAR>には影響せず、
その逆もそうである。
しかし、新たなシーケンスの要素はコピーしていない。
つまり、それらはもとの要素と同一（<CODE>eq</CODE>）である。
したがって、シーケンスのコピーにおいて、
それらの要素の内部を変更すると、もとのシーケンスでもその変更がわかる。
<P>

シーケンスがテキスト属性を持つ文字列である場合には、
コピーの中の属性リストそのものもコピーであり、
もとの属性リストを共有するのではない。
しかし、属性の実際の値は共有される。
<P>

シーケンスをコピーする別の方法については、
<A HREF="elisp_6.html#SEC86">5.5 コンスセルとリストの構築</A>の<CODE>append</CODE>、<A HREF="elisp_5.html#SEC74">4.3 文字列の作成</A>の<CODE>concat</CODE>、
<A HREF="elisp_7.html#SEC97">6.4 ベクトル</A>の<CODE>vconcat</CODE>を参照。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq bar '(1 2))
     => (1 2)
(setq x (vector 'foo bar))
     => [foo (1 2)]
(setq y (copy-sequence x))
     => [foo (1 2)]

(eq x y)
     => nil
(equal x y)
     => t
(eq (elt x 1) (elt y 1))
     => t

;; 1つのシーケンスの1つの要素を置き換える
(aset x 0 'quux)
x => [quux (1 2)]
y => [foo (1 2)]

;; 共有された要素の内部を修正する
(setcar (aref x 1) 69)
x => [quux (69 2)]
y => [foo (69 2)]
</pre></td></tr></table></DL>
<P>

<A NAME="Arrays"></A>
<HR SIZE="6">
<br><A NAME="SEC95"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_7.html#SEC94"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_7.html#SEC96"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Arrays"></A>
<H2> 6.2 配列 </H2>
<!--docid::SEC95::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Arrays">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Arrays</a>"<br>
"texi/elisp21/配列"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%C7%DB%CE%F3">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX401"></A>
<P>

<EM>配列</EM>（array）オブジェクトには、配列の要素と呼ばれる
Lispオブジェクトを保持するためのスロットがいくつかあります。
配列の任意の要素は一定時間で参照できます。
一方、リストの要素の参照には、
リスト内でのその要素の位置に比例した時間が必要です。
<P>

Emacsには4つの型の配列があり、すべて1次元です。
<EM>文字列</EM>（strings）、<EM>ベクトル</EM>（vectors）、
<EM>ブールベクトル</EM>（bool-vectors）、<EM>文字テーブル</EM>（char-tables）です。
ベクトルは汎用の配列であり、
その要素は任意のLispオブジェクトでかまいません。
文字列は特化された配列であり、その要素は文字（つまり、0から255までの整数）で
ある必要があります。
配列のそれぞれの型には、独自の入力構文があります。
<A HREF="elisp_3.html#SEC34">2.3.8 文字列型</A>とSee 節 <A HREF="elisp_3.html#SEC39">2.3.9 ベクトル型</A>。
<P>

配列の4つの型すべてには、以下の性質があります。
<P>

<UL>
<LI>
配列の最初の要素は添字0であり、2番目の要素は添字1であり、といった具合。
これを<EM>ゼロ原点</EM>（zero-origin）の添字付けと呼ぶ。
たとえば、4要素の配列の添字は、0、1、2、そして、3。
<P>

<LI>
配列の長さは、いったん作成すると固定される。
既存配列の長さは変更できない。
<P>

<LI>
配列は、評価上は定数である。
いいかえれば、それ自身に評価される。
<P>

<LI>
配列要素の参照や変更は、それぞれ、
関数<CODE>aref</CODE>や<CODE>aset</CODE>で行う
（see 節 <A HREF="elisp_7.html#SEC96">6.3 配列操作関数</A>）。
</UL>
<P>

文字テーブル以外の配列を作成するときには、
その長さを指定する必要があります。
文字テーブルの長さは指定できません。
というのは、その長さは文字コードの範囲で決まるからです。
<P>

原理的には、テキスト文字の配列が必要ならば文字列かベクトルを使います。
実用上は、以下の4つの理由から、そのような場合には文字列を使います。
<P>

<UL>
<LI>
同じ要素のベクトルの1/4の領域を専有するだけ。
<P>

<LI>
文字列の表示方法は、その内容をテキストとして明確に示す。
<P>

<LI>
文字列は、テキスト属性を保持できる。
see 節 <A HREF="elisp_32.html#SEC513">31.19 テキスト属性</A>。
<P>

<LI>
Emacsの特化された編集機能や入出力機能の多くは、
文字列だけを受け付ける。
たとえば、文字のベクトルをバッファには挿入できないが、
文字列ならば挿入できる。
see 節 <A HREF="elisp_5.html#SEC71">4. 文字列と文字</A>。
</UL>
<P>

一方、（キー列のような）キーボード入力文字の配列には、
ベクトルが必要です。
というのは、キーボード入力文字の多くは、文字列に納まる範囲外だからです。
See 節 <A HREF="elisp_21.html#SEC305">20.6.1 キー列の入力</A>。
<P>

<A NAME="Array Functions"></A>
<HR SIZE="6">
<br><A NAME="SEC96"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_7.html#SEC95"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_7.html#SEC97"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Array Functions"></A>
<H2> 6.3 配列操作関数 </H2>
<!--docid::SEC96::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Array%20Functions">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Array%20Functions</a>"<br>
"texi/elisp21/配列操作関数"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%C7%DB%CE%F3%C1%E0%BA%EE%B4%D8%BF%F4">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

本節では任意の配列型を受け付ける関数を説明します。
<P>

<A NAME="IDX402"></A>
<DL>
<DT><U>Function:</U> <B>arrayp</B> <I>object</I>
<DD>この関数は<VAR>object</VAR>が配列
（つまり、ベクトル、文字列、ブールベクトル、あるいは、文字テーブル）ならば、
<CODE>t</CODE>を返す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(arrayp [a])
     => t
(arrayp "asdf")
     => t
(arrayp (syntax-table))    ;; 文字テーブル
     => t
</pre></td></tr></table></DL>
<P>

<A NAME="IDX403"></A>
<DL>
<DT><U>Function:</U> <B>aref</B> <I>array index</I>
<DD><A NAME="IDX404"></A>
この関数は<VAR>array</VAR>の<VAR>index</VAR>番目の要素を返す。
最初の要素の添字は0。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq primes [2 3 5 7 11 13])
     => [2 3 5 7 11 13]
(aref primes 4)
     => 11
(aref "abcdefg" 1)
     => 98           ; `<SAMP>b</SAMP>'は、ASCIIコード98
</pre></td></tr></table><P>

<A HREF="elisp_7.html#SEC94">6.1 シーケンス</A>の関数<CODE>elt</CODE>も参照。
</DL>
<P>

<A NAME="IDX405"></A>
<DL>
<DT><U>Function:</U> <B>aset</B> <I>array index object</I>
<DD>この関数は配列<VAR>array</VAR>の<VAR>index</VAR>番目の要素に<VAR>object</VAR>を設定する。
<VAR>object</VAR>を返す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq w [foo bar baz])
     => [foo bar baz]
(aset w 0 'fu)
     => fu
w
     => [fu bar baz]

(setq x "asdfasfd")
     => "asdfasfd"
(aset x 3 ?Z)
     => 90
x
     => "asdZasfd"
</pre></td></tr></table><P>

<VAR>array</VAR>が文字列であり、かつ、<VAR>object</VAR>が文字でなければ、
結果はエラー<CODE>wrong-type-argument</CODE>となる。
<VAR>array</VAR>が文字列であり、かつ、<VAR>object</VAR>が文字であっても、
現在<CODE>(aref <VAR>object</VAR> <VAR>index</VAR>)</CODE>に保存されている文字のバイト数と
<VAR>object</VAR>が使うバイト数が異なれば、やはり、エラーとなる。
see 節 <A HREF="elisp_33.html#SEC535">32.7 文字の分割</A>。
</DL>
<P>

<A NAME="IDX406"></A>
<DL>
<DT><U>Function:</U> <B>fillarray</B> <I>array object</I>
<DD>この関数は、配列<VAR>array</VAR>を<VAR>object</VAR>で埋め、
<VAR>array</VAR>の各要素が<VAR>object</VAR>となるようにする。
<VAR>array</VAR>を返す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq a [a b c d e f g])
     => [a b c d e f g]
(fillarray a 0)
     => [0 0 0 0 0 0 0]
a
     => [0 0 0 0 0 0 0]
(setq s "When in the course")
     => "When in the course"
(fillarray s ?-)
     => "------------------"
</pre></td></tr></table><P>

<VAR>array</VAR>が文字列であり、かつ、<VAR>object</VAR>が文字でなければ、
結果はエラー<CODE>wrong-type-argument</CODE>になる。
</DL>
<P>

配列であることが既知のオブジェクトに対しては、
汎用のシーケンス関数<CODE>copy-sequence</CODE>や<CODE>length</CODE>がしばしば有用です。
See 節 <A HREF="elisp_7.html#SEC94">6.1 シーケンス</A>。
<P>

<A NAME="Vectors"></A>
<HR SIZE="6">
<br><A NAME="SEC97"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_7.html#SEC96"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_7.html#SEC98"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Vectors"></A>
<H2> 6.4 ベクトル </H2>
<!--docid::SEC97::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Vectors">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Vectors</a>"<br>
"texi/elisp21/ベクトル"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%D9%A5%AF%A5%C8%A5%EB">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX407"></A>
<P>

Lispの配列は、ほとんどの言語の配列と同様に、
その要素を一定時間で参照可能なメモリのブロックです。
<EM>ベクトル</EM>（vector）は指定長の汎用配列です。
その要素はどんなLispオブジェクトでもかまいません。
（対照的に、文字列は要素としては文字だけを保持する。）
Emacsでは、オブジェクト配列obarray（シンボルのベクトル）、
キーマップ（コマンドのベクトル）の一部にベクトルを使っています。
これらは、内部的には、バイトコード関数の表現の一部にも使っています。
そのような関数を表示すると、その中にベクトルがあるのがわかります。
<P>

Emacs Lispでは、ベクトルの要素の添字は0から始まります。
<P>

ベクトルは要素を角括弧で囲んで表示します。
したがって、要素がシンボル<CODE>a</CODE>、<CODE>b</CODE>、<CODE>a</CODE>であるベクトルは、
<CODE>[a b a]</CODE>と表示されます。
Lispへの入力では同じようにベクトルを書きます。
<P>

文字列や数と同様に、評価上、ベクトルは定数とみなします。
それを評価した結果は、同じベクトルです。
この評価では、ベクトルの要素を評価したり調べたりはしません。
<P>

以下は、これらの原理を例示するものです。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq avector [1 two '(three) "four" [five]])
     => [1 two (quote (three)) "four" [five]]
(eval avector)
     => [1 two (quote (three)) "four" [five]]
(eq avector (eval avector))
     => t
</pre></td></tr></table><P>

<A NAME="Vector Functions"></A>
<HR SIZE="6">
<br><A NAME="SEC98"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_7.html#SEC97"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_7.html#SEC99"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Vector Functions"></A>
<H2> 6.5 ベクトル向け関数 </H2>
<!--docid::SEC98::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Vector%20Functions">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Vector%20Functions</a>"<br>
"texi/elisp21/ベクトル向け関数"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%D9%A5%AF%A5%C8%A5%EB%B8%FE%A4%B1%B4%D8%BF%F4">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

ベクトルに関連した関数はつぎのとおりです。
<P>

<A NAME="IDX408"></A>
<DL>
<DT><U>Function:</U> <B>vectorp</B> <I>object</I>
<DD>この関数は、<VAR>object</VAR>がベクトルならば<CODE>t</CODE>を返す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(vectorp [a])
     => t
(vectorp "asdf")
     => nil
</pre></td></tr></table></DL>
<P>

<A NAME="IDX409"></A>
<DL>
<DT><U>Function:</U> <B>vector</B> <I>&#38;rest objects</I>
<DD>この関数は、引数<VAR>objects</VAR>を要素とするベクトルを作成しそれを返す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(vector 'foo 23 [bar baz] "rats")
     => [foo 23 [bar baz] "rats"]
(vector)
     => []
</pre></td></tr></table></DL>
<P>

<A NAME="IDX410"></A>
<DL>
<DT><U>Function:</U> <B>make-vector</B> <I>length object</I>
<DD>この関数は、各要素を<VAR>object</VAR>に初期化した
<VAR>length</VAR>個の要素から成る新たなベクトルを返す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq sleepy (make-vector 9 'Z))
     => [Z Z Z Z Z Z Z Z Z]
</pre></td></tr></table></DL>
<P>

<A NAME="IDX411"></A>
<DL>
<DT><U>Function:</U> <B>vconcat</B> <I>&#38;rest sequences</I>
<DD><A NAME="IDX412"></A>
<A NAME="IDX413"></A>
この関数は、<VAR>sequences</VAR>のすべての要素を入れた新たなベクトルを返す。
引数<VAR>sequences</VAR>は、リスト、ベクトル、文字列を含む任意の配列でよい。
<VAR>sequences</VAR>を指定しないと空ベクトルを返す。
<P>

その値は、既存のベクトルと<CODE>eq</CODE>でない新たに作成したベクトルである。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq a (vconcat '(A B C) '(D E F)))
     => [A B C D E F]
(eq a (vconcat a))
     => nil
(vconcat)
     => []
(vconcat [A B C] "aa" '(foo (6 7)))
     => [A B C 97 97 foo (6 7)]
</pre></td></tr></table><P>

関数<CODE>vconcat</CODE>は、引数としてバイトコード関数でも受け付ける。
これは、バイトコード関数オブジェクトの全内容を簡単に参照できるように
するための特別な機能である。
see 節 <A HREF="elisp_16.html#SEC206">15.6 バイトコード関数オブジェクト</A>。
<P>

関数<CODE>vconcat</CODE>は、引数として整数も受け付ける。
整数はその10進の表示表現の文字列に変換してから、
その文字列を整数のかわりに使う。
<STRONG>この機能を使わないでほしい。
削除する予定である。
読者がこの機能を使っていたら、今すぐプログラムを直すこと！</STRONG><CODE> </CODE>
整数をこのような10進数に変換する正しい方法は、
<CODE>format</CODE>（see 節 <A HREF="elisp_5.html#SEC78">4.7 文字列の書式付け</A>）や
<CODE>number-to-string</CODE>（see 節 <A HREF="elisp_5.html#SEC77">4.6 文字と文字列の変換</A>）を使うことである。
<P>

他の連結関数については、
<A HREF="elisp_12.html#SEC166">11.6 マップ関数</A>の<CODE>mapconcat</CODE>、
<A HREF="elisp_5.html#SEC74">4.3 文字列の作成</A>の<CODE>concat</CODE>、
<A HREF="elisp_6.html#SEC86">5.5 コンスセルとリストの構築</A>の<CODE>append</CODE>を参照。
</DL>
<P>

関数<CODE>append</CODE>は、ベクトルを同じ要素から成るリストへ変換する便利な方法です
（see 節 <A HREF="elisp_6.html#SEC86">5.5 コンスセルとリストの構築</A>）。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq avector [1 two (quote (three)) "four" [five]])
     => [1 two (quote (three)) "four" [five]]
(append avector nil)
     => (1 two (quote (three)) "four" [five])
</pre></td></tr></table><P>

<A NAME="Char-Tables"></A>
<HR SIZE="6">
<br><A NAME="SEC99"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_7.html#SEC98"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_7.html#SEC100"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Char-Tables"></A>
<H2> 6.6 文字テーブル </H2>
<!--docid::SEC99::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Char-Tables">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Char-Tables</a>"<br>
"texi/elisp21/文字テーブル"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%CA%B8%BB%FA%A5%C6%A1%BC%A5%D6%A5%EB">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX414"></A>
<A NAME="IDX415"></A>
<P>

文字テーブルはベクトルによく似ていますが、
文字コードで添字付けする点が異なります。
修飾子を伴わない任意の正当な文字コードは、文字テーブルの添字に使えます。
文字テーブルの要素は、任意の配列のように、<CODE>aref</CODE>や<CODE>aset</CODE>で
参照できます。
さらに、文字テーブルでは、
特定の文字コードには対応しない追加データを保持するための<EM>追加スロット</EM>を
保持できます。
評価時には、文字テーブルは定数です。
<P>

<A NAME="IDX416"></A>
各文字テーブルには、シンボルである<EM>サブタイプ</EM>（subtype）があります。
サブタイプには2つの目的があります。
異なる使い方をする文字テーブルを区別するためと、
追加スロットの個数を制御するためです。
たとえば、表示テーブルはサブタイプが<CODE>display-table</CODE>である
文字テーブルであり、
構文テーブルはサブタイプが<CODE>syntax-table</CODE>である文字テーブルです。
正当なサブタイプには、<CODE>char-table-extra-slots</CODE>属性があるはずで、
その値は0から10までの整数です。
この整数が文字テーブルの<EM>追加スロット</EM>の個数を指定します。
<P>

<A NAME="IDX417"></A>
文字テーブルは、別の文字テーブルである<EM>親</EM>を持てます。
その場合、特定の文字<VAR>c</VAR>に対する文字テーブルの指定が<CODE>nil</CODE>のときには、
親において指定された値を継承します。
いいかえれば、<VAR>char-table</VAR>自体に<CODE>nil</CODE>を指定してあると、
<CODE>(aref <VAR>char-table</VAR> <VAR>c</VAR>)</CODE>は、
<VAR>char-table</VAR>の親の値を返します。
<P>

<A NAME="IDX418"></A>
文字テーブルは、<EM>デフォルト値</EM>も持てます。
その場合、文字テーブルが指定する値が<CODE>nil</CODE>であると、
<CODE>(aref <VAR>char-table</VAR> <VAR>c</VAR>)</CODE>はデフォルト値を返します。
<P>

<A NAME="IDX419"></A>
<DL>
<DT><U>Function:</U> <B>make-char-table</B> <I>subtype &#38;optional init</I>
<DD><A NAME="IDX420"></A>
サブタイプが<VAR>subtype</VAR>である新たに作成した文字テーブルを返す。
各要素を<VAR>init</VAR>で初期化する。
なお、<VAR>init</VAR>のデフォルトは<CODE>nil</CODE>である。
文字テーブル作成後には、文字テーブルのサブタイプは変更できない。
<P>

文字テーブルの長さを指定する引数はない。
なぜなら、すべての文字テーブルでは、
任意の正当な文字コードを添字として使えるからである。
</DL>
<P>

<A NAME="IDX421"></A>
<DL>
<DT><U>Function:</U> <B>char-table-p</B> <I>object</I>
<DD><A NAME="IDX422"></A>
この関数は、<VAR>object</VAR>が文字テーブルならば<CODE>t</CODE>を返し、
さもなければ<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="IDX423"></A>
<DL>
<DT><U>Function:</U> <B>char-table-subtype</B> <I>char-table</I>
<DD><A NAME="IDX424"></A>
この関数は<VAR>char-table</VAR>のサブタイプを表すシンボルを返す。
</DL>
<P>

<A NAME="IDX425"></A>
<DL>
<DT><U>Function:</U> <B>set-char-table-default</B> <I>char-table new-default</I>
<DD><A NAME="IDX426"></A>
この関数は<VAR>char-table</VAR>のデフォルト値を<VAR>new-default</VAR>にする。
<P>

文字テーブルのデフォルト値を参照するための特別な関数はない。
それには<CODE>(char-table-range <VAR>char-table</VAR> nil)</CODE>を使う。
</DL>
<P>

<A NAME="IDX427"></A>
<DL>
<DT><U>Function:</U> <B>char-table-parent</B> <I>char-table</I>
<DD><A NAME="IDX428"></A>
この関数は<VAR>char-table</VAR>の親を返す。
親は、<CODE>nil</CODE>であるか他の文字テーブルである。
</DL>
<P>

<A NAME="IDX429"></A>
<DL>
<DT><U>Function:</U> <B>set-char-table-parent</B> <I>char-table new-parent</I>
<DD><A NAME="IDX430"></A>
この関数は<VAR>char-table</VAR>の親を<VAR>new-parent</VAR>にする。
</DL>
<P>

<A NAME="IDX431"></A>
<DL>
<DT><U>Function:</U> <B>char-table-extra-slot</B> <I>char-table n</I>
<DD><A NAME="IDX432"></A>
この関数は<VAR>char-table</VAR>の追加スロット<VAR>n</VAR>の内容を返す。
文字テーブル内の追加スロットの個数はそのサブタイプで決まる。
</DL>
<P>

<A NAME="IDX433"></A>
<DL>
<DT><U>Function:</U> <B>set-char-table-extra-slot</B> <I>char-table n value</I>
<DD><A NAME="IDX434"></A>
この関数は<VAR>char-table</VAR>の追加スロット<VAR>n</VAR>に<VAR>value</VAR>を格納する。
</DL>
<P>

文字テーブルでは、1つの文字コードに対して1つの要素値を指定できます。
また、文字集合全体に対して1つの値を指定することもできます。
<P>

<A NAME="IDX435"></A>
<DL>
<DT><U>Function:</U> <B>char-table-range</B> <I>char-table range</I>
<DD><A NAME="IDX436"></A>
これは、<VAR>char-table</VAR>において文字範囲<VAR>range</VAR>に指定されている値を返す。
<VAR>range</VAR>として可能なものは以下のとおり。
<P>

<DL COMPACT>
<DT><CODE>nil</CODE>
<DD>デフォルト値を指す。
<P>

<DT><VAR>char</VAR>
<DD>（<VAR>char</VAR>が正当な文字コードであると仮定して）
文字<VAR>char</VAR>に対する要素を指す。
<P>

<DT><VAR>charset</VAR>
<DD>文字集合<VAR>charset</VAR>全体に対して指定してある値を指す
（see 節 <A HREF="elisp_33.html#SEC533">32.5 文字集合</A>）。
<P>

<DT><VAR>generic-char</VAR>
<DD>文字集合に対する汎用文字を表す。
引数として汎用文字を指定することは、文字集合名を指定することと同値。
汎用文字の説明は、see 節 <A HREF="elisp_33.html#SEC535">32.7 文字の分割</A>。
</DL>
</DL>
<P>

<A NAME="IDX437"></A>
<DL>
<DT><U>Function:</U> <B>set-char-table-range</B> <I>char-table range value</I>
<DD><A NAME="IDX438"></A>
この関数は文字範囲<VAR>range</VAR>に対する<VAR>char-table</VAR>の値を設定する。
<VAR>range</VAR>として可能なものは以下のとおり。
<P>

<DL COMPACT>
<DT><CODE>nil</CODE>
<DD>デフォルト値を指す。
<P>

<DT><CODE>t</CODE>
<DD>文字コードの範囲全体を指す。
<P>

<DT><VAR>char</VAR>
<DD>（<VAR>char</VAR>が正当な文字コードであると仮定して）
文字<VAR>char</VAR>に対する要素を指す。
<P>

<DT><VAR>charset</VAR>
<DD>文字集合<VAR>charset</VAR>全体に対して指定してある値を指す
（see 節 <A HREF="elisp_33.html#SEC533">32.5 文字集合</A>）。
<P>

<DT><VAR>generic-char</VAR>
<DD>文字集合に対する汎用文字を表す。
引数として汎用文字を指定することは、文字集合名を指定することと同値。
汎用文字の説明は、see 節 <A HREF="elisp_33.html#SEC535">32.7 文字の分割</A>。
</DL>
</DL>
<P>

<A NAME="IDX439"></A>
<DL>
<DT><U>Function:</U> <B>map-char-table</B> <I>function char-table</I>
<DD><A NAME="IDX440"></A>
この関数は、<VAR>char-table</VAR>の各要素について<VAR>function</VAR>を呼び出す。
<VAR>function</VAR>をキーと値の2つの引数で呼び出す。
キーは<CODE>char-table-range</CODE>に対する可能な<VAR>range</VAR>引数であり、
正当な文字か汎用文字である。
値は<CODE>(char-table-range <VAR>char-table</VAR> <VAR>key</VAR>)</CODE>である。
<P>

全体として、<VAR>function</VAR>に渡すキー・値の対は、
<VAR>char-table</VAR>に格納されたすべての値を表す。
<P>

戻り値はつねに<CODE>nil</CODE>である。
この関数が有用であるようにするには、
<VAR>function</VAR>には副作用があるべきである。
たとえば、つぎは構文テーブルの各要素の調べ方である。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(let (accumulator)
  (map-char-table
   #'(lambda (key value)
       (setq accumulator
             (cons (list key value) accumulator)))
   (syntax-table))
  accumulator)
=>
((475008 nil) (474880 nil) (474752 nil) (474624 nil)
 ... (5 (3)) (4 (3)) (3 (3)) (2 (3)) (1 (3)) (0 (3)))
</pre></td></tr></table></DL>
<P>

<A NAME="Bool-Vectors"></A>
<HR SIZE="6">
<br><A NAME="SEC100"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_7.html#SEC99"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_8.html#SEC101"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Bool-Vectors"></A>
<H2> 6.7 ブールベクトル </H2>
<!--docid::SEC100::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Bool-Vectors">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Bool-Vectors</a>"<br>
"texi/elisp21/ブールベクトル"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%D6%A1%BC%A5%EB%A5%D9%A5%AF%A5%C8%A5%EB">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX441"></A>
<P>

ブールベクトルはベクトルによく似ていますが、
<CODE>t</CODE>と<CODE>nil</CODE>の値だけを保存できる点が異なります。
ブールベクトルの要素に<CODE>nil</CODE>以外の値を保存しようとすると、
その効果は<CODE>t</CODE>を保存することになります。
すべての配列と同様に、ブールベクトルの添字は0から始まり、
ブールベクトルをいったん作成すると長さは変更できません。
評価時には、ブールベクトルは定数です。
<P>

ブールベクトルを操作する特別な関数は2つあります。
それに加えて、他の種類の配列を扱う関数でも操作できます。
<P>

<A NAME="IDX442"></A>
<DL>
<DT><U>Function:</U> <B>make-bool-vector</B> <I>length initial</I>
<DD><A NAME="IDX443"></A>
<VAR>initial</VAR>に初期化した長さ<VAR>length</VAR>の新たなブールベクトルを返す。
</DL>
<P>

<A NAME="IDX444"></A>
<DL>
<DT><U>Function:</U> <B>bool-vector-p</B> <I>object</I>
<DD><A NAME="IDX445"></A>
<VAR>object</VAR>がブールベクトルであれば<CODE>t</CODE>を返し、
さもなければ<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="Symbols"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<a name="bottom"> </a>
<script type="text/javascript" src="style2.js"></script>
<div class="footer">
    <br>
    このページはMeadow (Emacs) の紹介ページです <br>
このWebページの各文書は自由にリンク・複製・再配布・改変していただいて構いません．
<br>ただし，複製・再配布・改変の場合は Meadow Memo のURLを記載しておいて下さい．<br>
<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=about%20link">Medow memoへのリンクについて</a>．<br>

間違い，要望等があれば<a href="mailto:akihisa@mail.ne.jp">akihisa@mail.ne.jp</a> か下記でどうぞ<br>

<br>

<FORM METHOD="post" ACTION="http://www.bookshelf.jp/cgi-bin/wwwmail.cgi" >
お名前：<INPUT TYPE="text" NAME="name" SIZE="30" MAXLENGTH="40" VALUE="ななしさん"><br>
メールアドレス：<INPUT TYPE="text" NAME="EMAIL" SIZE="25" MAXLENGTH="60" VALUE="secret@mail.adr"><br>
<input type="hidden" name="HPAGE" value="">
つっこみ：<br><TEXTAREA NAME="MESSAGE" ROWS="5" COLS="50">
</TEXTAREA><br><br>
<INPUT TYPE="submit" VALUE="送信">
<INPUT TYPE="reset" VALUE="クリア">
</FORM>

<br><A HREF="http://www.bookshelf.jp/cgi-bin/xct.cgi">ページ別カウンタ</a>
<br> Since 2002/12/13 <br>
</div>

</BODY>

</HTML>
