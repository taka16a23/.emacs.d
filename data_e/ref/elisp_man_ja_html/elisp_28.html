<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML lang="ja">
<!-- Created on October, 1  2005 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html;CHARSET=euc-jp">
<META NAME="keywords" CONTENT="meadow,mule,emacs,lisp,elisp,gnus,setting,設定,unix,cygwin">
<META http-equiv="Content-Script-Type" content="text/javascript">
<META NAME="description" CONTENT="Meadowの設定を紹介するページです">
<TITLE>GNU Emacs Lispリファレンスマニュアル:  ウィンドウ</TITLE>

<META NAME="description" CONTENT="GNU Emacs Lispリファレンスマニュアル:  ウィンドウ">
<META NAME="keywords" CONTENT="GNU Emacs Lispリファレンスマニュアル:  ウィンドウ">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

<LINK REL="contents" HREF="elisp_toc.html#SEC_Contents">
<LINK REL="index" HREF="elisp_48.html#SEC681">
<LINK REL="next" HREF="elisp_29.html#SEC434">
<LINK REL="prev" HREF="elisp_27.html#SEC403">

<META http-equiv="Content-Style-Type" content="text/css">
<!-- 鶯と龜 ←日本語EUC誤判別対策用らしい; -->
<link rel="StyleSheet" href="../../../../soft/css/midnight.css" type="text/css" id="css1">
<script type="text/javascript" src="style1.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../soft/css/meadowmemo.css">

</HEAD>
<BODY LANG="ja" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">
<!--Infoseek Analyzer start-->
<script LANGUAGE="javascript">PgNo=6;</script>
<script src="http://js1.infoseek.co.jp/bin/57/00170.js"></script>
<noscript><a href="http://ax1.www.infoseek.co.jp/bin/go?0017057f" target="_blank">
<img src="http://ax1.www.infoseek.co.jp/bin/logo?0017057f" border=0></a></noscript>
<!--Infoseek Analyzer end-->
<a name="top"> </a>

<br><A NAME="SEC416"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_27.html#SEC415"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC417"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_27.html#SEC403"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_29.html#SEC434"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Windows"></A>
<H1> 27. ウィンドウ </H1>
<!--docid::SEC416::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Windows">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Windows</a>"<br>
"texi/elisp21/ウィンドウ"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

本章では、Emacsのウィンドウに関したほとんどの関数と変数について述べます。
ウィンドウにどのようにテキストが表示されるかに関しては、
<A HREF="elisp_38.html#SEC599">37. Emacsの画面表示</A>を参照してください。
<P>

<div class="menuindex"><SCRIPT language=JavaScript src="index27.js"></SCRIPT></div><noscript><BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC417">27.1 Emacsウィンドウの基本概念</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Basic information on using windows.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC418">27.2 ウィンドウの分割</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Splitting one window into two windows.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC419">27.3 ウィンドウの削除</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Deleting a window gives its space to other windows.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC420">27.4 ウィンドウの選択</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The selected window is the one that you edit in.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC421">27.5 ウィンドウの巡回順序</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Moving around the existing windows.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC422">27.6 バッファとウィンドウ</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Each window displays the contents of a buffer.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC423">27.7 ウィンドウへのバッファの表示</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Higher-lever functions for displaying a buffer
                              and choosing a window for it.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC424">27.8 表示ウィンドウを選ぶ</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to choose a window for displaying a buffer.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC425">27.9 ウィンドウとポイント</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Each window has its own location of point.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC426">27.10 ウィンドウの開始位置</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The display-start position controls which text
                              is on-screen in the window.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC427">27.11 垂直スクロール</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Moving text up and down in the window.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC428">27.12 水平スクロール</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Moving text sideways on the window.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC429">27.13 ウィンドウサイズ</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Accessing the size of a window.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC430">27.14 ウィンドウサイズの変更</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Changing the size of a window.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC431">27.15 座標とウィンドウ</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Converting coordinates to windows.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC432">27.16 ウィンドウ構成</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Saving and restoring the state of the screen.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="elisp_28.html#SEC433">27.17 ウィンドウのスクロールとサイズ変更向けのフック</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Hooks for scrolling, window size changes,
                              redisplay going past a certain point,
                              or window configuration changes.</TD></TR>
</TABLE></BLOCKQUOTE></noscript>
<P>

<A NAME="Basic Windows"></A>
<HR SIZE="6">
<br><A NAME="SEC417"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC416"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC418"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Basic Windows"></A>
<H2> 27.1 Emacsウィンドウの基本概念 </H2>
<!--docid::SEC417::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Basic%20Windows">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Basic%20Windows</a>"<br>
"texi/elisp21/Emacsウィンドウの基本概念"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2FEmacs%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6%A4%CE%B4%F0%CB%DC%B3%B5%C7%B0">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX1797"></A>
<A NAME="IDX1798"></A>
<P>

Emacsの<EM>ウィンドウ</EM>（window）は、
バッファを表示するスクリーン上の物理的な領域のことです。
この用語は、Emacs Lispにおいて、当該物理領域を表す
Lispオブジェクトを意味するためにも使います。
どちらの意味かは文脈から明らかなはずです。
<P>

Emacsではウィンドウをフレームにまとめています。
フレームは、Emacsが使えるスクリーンの領域を表します。
各フレームには少なくとも1つのウィンドウがつねにありますが、
フレームは上下や左右に重なり合わない複数のEmacsのウィンドウに分割できます。
<P>

ある時点では、各フレームには<EM>フレームの選択されている</EM>ウィンドウと
区別されるウィンドウがたった1つだけあります。
フレームのカーソルはそのようなウィンドウに現れます。
ある時点では、1つのフレームが選択されているフレームであり、
当該フレームで選択されているウィンドウが<EM>選択されているウィンドウ</EM>です。
選択されているウィンドウのバッファが、
（<CODE>set-buffer</CODE>を使った場合を除いて）普通はカレントバッファです。
See 節 <A HREF="elisp_27.html#SEC405">26.2 カレントバッファ <EM>(2003/10/30)</EM></A>。
<P>

実用上、ウィンドウは、それがフレームに表示されている期間だけ存在します。
フレームからいったん取りさると、（ウィンドウへの参照が残っているとしても）
ウィンドウは実質的には削除され使えません。
保存したウィンドウ構成を復元する以外に、
スクリーンから消えたウィンドウを戻す方法はありません。
（see 節 <A HREF="elisp_28.html#SEC419">27.3 ウィンドウの削除</A>。）
<P>

各ウィンドウにはつぎの属性があります。
<P>

<UL>
<LI>
ウィンドウを含んでいるフレーム
<P>

<LI>
ウィンドウの高さ
<P>

<LI>
ウィンドウの幅
<P>

<LI>
スクリーンやフレームを基準にしたウィンドウの隅
<P>

<LI>
ウィンドウが表示しているバッファ
<P>

<LI>
ウィンドウの左上隅に対応するバッファ内の位置
<P>

<LI>
コラム単位の水平方向のスクロール量
<P>

<LI>
ポイント
<P>

<LI>
マーク
<P>

<LI>
どの程度最近にウィンドウが選択されたか
</UL>
<P>

<A NAME="IDX1799"></A>
複数のバッファを同時に見られるようにユーザーは複数のウィンドウを作ります。
さまざまな理由でLispライブラリは複数のウィンドウを使いますが、
そのほとんどは、関連する情報を表示するためです。
たとえば、rmailでは、あるウィンドウのサマリバッファで移動すると、
別のウィンドウでは対応するメッセージを表示します。
<P>

Emacsにおける『ウィンドウ』の意味は、
Xのような汎用目的のウィンドウシステムにおける意味に似ていますが、
同一ではありません。
Xウィンドウシステムは、スクリーン上にXのウィンドウを配置します。
Emacsは、1つか複数のXのウィンドウをフレームとして使い、
それらをEmacsのウィンドウに分割します。
文字端末でEmacsを使うと、
Emacsは端末のクリーン全体を1つのフレームとして扱います。
<P>

<A NAME="IDX1800"></A>
<A NAME="IDX1801"></A>
<A NAME="IDX1802"></A>
ほとんどのウィンドウシステムは、任意に重ね合わさったウィンドウを扱えます。
対照的に、Emacsのウィンドウは<EM>タイル型</EM>です。
つまり、互いに重なり合うことはなく、
スクリーンやフレームの全面に敷き詰められます。
Emacsが新たなウィンドウを作成する方法や
ウィンドウサイズの変更方法に起因するのですが、
Emacsのフレームを任意の形にウィンドウで敷き詰めることは、
実際には必ずしも可能であるとは限りません。
<A HREF="elisp_28.html#SEC418">27.2 ウィンドウの分割</A>とSee 節 <A HREF="elisp_28.html#SEC429">27.13 ウィンドウサイズ</A>。
<P>

ウィンドウのバッファの内容がどのようにウィンドウに表示されるかについては、
See 節 <A HREF="elisp_38.html#SEC599">37. Emacsの画面表示</A>。
<P>

<A NAME="IDX1803"></A>
<DL>
<DT><U>Function:</U> <B>windowp</B> <I>object</I>
<DD>この関数は、<VAR>object</VAR>がウィンドウであれば<CODE>t</CODE>を返す。
</DL>
<P>

<A NAME="Splitting Windows"></A>
<HR SIZE="6">
<br><A NAME="SEC418"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC417"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC419"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Splitting Windows"></A>
<H2> 27.2 ウィンドウの分割 </H2>
<!--docid::SEC418::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Splitting%20Windows">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Splitting%20Windows</a>"<br>
"texi/elisp21/ウィンドウの分割"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6%A4%CE%CA%AC%B3%E4">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX1804"></A>
<A NAME="IDX1805"></A>
<P>

ここで述べる関数は、ウィンドウを2つに分割するための基本関数です。
上位レベルの2つの関数、<CODE>pop-to-buffer</CODE>と<CODE>display-buffer</CODE>も
ウィンドウを分割しますが、
つねに分割するとは限りません（see 節 <A HREF="elisp_28.html#SEC423">27.7 ウィンドウへのバッファの表示</A>）。
<P>

ここに述べる関数は、引数にはバッファを受け付けません。
分割されたウィンドウの2つの『部分』には、分割前に表示されていたのと
同じバッファが始めは表示されます。
<P>

<A NAME="IDX1806"></A>
<DL>
<DT><U>コマンド:</U> <B>split-window</B> <I>&#38;optional window size horizontal</I>
<DD>この関数は<VAR>window</VAR>を2つのウィンドウに分割する。
もとのウィンドウ<VAR>window</VAR>は、選択されているウィンドウであり続けるが、
以前のスクリーン領域の一部を占めるだけである。
残りの部分は新たに作成されたウィンドウが占め、
そのウィンドウがこの関数の値として返される。
<P>

<VAR>horizontal</VAR>が<CODE>nil</CODE>以外であると、<VAR>window</VAR>は左右に分かれる。
もとのウィンドウ<VAR>window</VAR>は左端の<VAR>size</VAR>コラムに留まり、
残りのコラムは新たなウィンドウに与えられる。
さもなければ、ウィンドウは上下に分かれ、
<VAR>window</VAR>は上側の<VAR>size</VAR>行に留まり、
残りの行は新たなウィンドウに与えられる。
したがって、もとのウィンドウは左側か上側にあり、
新たなウィンドウは右側か下側にある。
<P>

<VAR>window</VAR>を省略したり<CODE>nil</CODE>であると、
選択されているウィンドウを分割する。
<VAR>size</VAR>を省略したり<CODE>nil</CODE>であると、
<VAR>window</VAR>を均等に分ける。
（余分な行は新たなウィンドウに与える。）
<CODE>split-window</CODE>が対話的に呼び出されると、
すべての引数は<CODE>nil</CODE>である。
<P>

つぎの例では、50行×80コラムのスクリーン上の1つのウィンドウを分割する。
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>(setq w (selected-window))
     => #&#60;window 8 on windows.texi&#62;
(window-edges)          ; 順に
     => (0 0 80 50)     ;   左端--上端--右端--下端

;; 作成したウィンドウを返す
(setq w2 (split-window w 15))
     => #&#60;window 28 on windows.texi&#62;
(window-edges w2)
     => (0 15 80 50)    ; 下側のウィンドウの上端は15行目
(window-edges w)
     => (0 0 80 15)     ; 上側のウィンドウ
</FONT></pre></td></tr></table><P>

スクリーンはつぎのようになる。
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>　　　┌──────┐
　　　│　　　　　　│ 0行目
　　　│　　　ｗ　　│
　　　│　　　　　　│
　　　├──────┤
　　　│　　　　　　│15行目
　　　│　　　ｗ２　│
　　　│　　　　　　│
　　　└──────┘
　　　　　　　　　　　50行目
コラム0         コラム80
</FONT></pre></td></tr></table><P>

つぎに上側のウィンドウを左右に分割する。
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>(setq w3 (split-window w 35 t))
     => #&#60;window 32 on windows.texi&#62;
(window-edges w3)
     => (35 0 80 15)  ; 左端は35コラム目
(window-edges w)
     => (0 0 35 15)   ; 右端は35コラム目
(window-edges w2)
     => (0 15 80 50)  ; 下側のウィンドウは未変更
</FONT></pre></td></tr></table><P>

スクリーンはつぎのようになる。
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>   コラム35
　　　┌─┬────┐
　　　│　│　　　　│ 0行目
　　　│ｗ│　ｗ３　│
　　　│　│　　　　│
　　　├─┴────┤
　　　│　　　　　　│15行目
　　　│　　　ｗ２　│
　　　│　　　　　　│
　　　└──────┘
　　　　　　　　　　　50行目
コラム0         コラム80
</FONT></pre></td></tr></table><P>

通常、Emacsは左右に並んだウィンドウの境界を
スクロールバー（see 節 <A HREF="elisp_29.html#SEC440">Scroll Bars</A>）か
文字`<SAMP>|</SAMP>'で表す。
表示テーブルで境界に別の文字を指定できる。
<A HREF="elisp_38.html#SEC619">37.14 表示テーブル</A>を参照。
</DL>
<P>

<A NAME="IDX1807"></A>
<DL>
<DT><U>コマンド:</U> <B>split-window-vertically</B> <I>size</I>
<DD>この関数は、選択されているウィンドウを上下に2つに分割する。
上側が選択されているウィンドウのままで、<VAR>size</VAR>行の大きさになる。
（<VAR>size</VAR>が負であると、下側のウィンドウが- <VAR>size</VAR>行になり、
上側のウィンドウは残りになる。
しかし、それでも上側が選択されているウィンドウである。）
<P>

この関数は<CODE>split-window</CODE>の単なるインターフェイスである。
その完全な関数定義はつぎのとおりである。
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>(defun split-window-vertically (&#38;optional arg)
  "Split current window into two windows, <small>...</small>"
  (interactive "P")
  (split-window nil (and arg (prefix-numeric-value arg))))
</FONT></pre></td></tr></table></DL>
<P>

<A NAME="IDX1808"></A>
<DL>
<DT><U>コマンド:</U> <B>split-window-horizontally</B> <I>size</I>
<DD>この関数は、選択されているウィンドウを左右に2つに分割し、
選択されているウィンドウには<VAR>size</VAR>コラム残す。
<P>

この関数は<CODE>split-window</CODE>の単なるインターフェイスである。
<CODE>split-window-horizontally</CODE>の完全な関数定義は
（説明文字列を除けば）つぎのとおりである。
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>(defun split-window-horizontally (&#38;optional arg)
  "Split selected window into two windows, side by side..."
  (interactive "P")
  (split-window nil (and arg (prefix-numeric-value arg)) t))
</FONT></pre></td></tr></table></DL>
<P>

<A NAME="IDX1809"></A>
<DL>
<DT><U>Function:</U> <B>one-window-p</B> <I>&#38;optional no-mini all-frames</I>
<DD>この関数は、ウィンドウがたった1つしかなければ<CODE>nil</CODE>以外を返す。
引数<VAR>no-mini</VAR>が<CODE>nil</CODE>以外であると、
ミニバッファが活性であってもそれを数えないことを意味する。
さもなければ、ミニバッファが活性であればそれも総ウィンドウ個数に数えて
1と比較する。
<P>

引数<VAR>all-frames</VAR>は、どのフレームを対象にするかを指定する。
指定できる値とその意味はつぎのとおりである。
<P>

<DL COMPACT>
<DT><CODE>nil</CODE>
<DD>選択されているフレームのウィンドウに加えて、
ミニバッファがどこに置かれていようと
当該フレームが使っているミニバッファを数える。
<P>

<DT><CODE>t</CODE>
<DD>既存のすべてのフレームのウィンドウを数える。
<P>

<DT><CODE>visible</CODE>
<DD>すべての可視フレームのすべてのウィンドウを数える。
<P>

<DT>0
<DD>すべての可視フレームやアイコンになっているフレームの
すべてのウィンドウを数える。
<P>

<DT>その他
<DD>選択されているフレームだけでウィンドウを正確に数える。
</DL>
</DL>
<P>

<A NAME="Deleting Windows"></A>
<HR SIZE="6">
<br><A NAME="SEC419"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC418"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC420"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Deleting Windows"></A>
<H2> 27.3 ウィンドウの削除 </H2>
<!--docid::SEC419::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Deleting%20Windows">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Deleting%20Windows</a>"<br>
"texi/elisp21/ウィンドウの削除"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6%A4%CE%BA%EF%BD%FC">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX1810"></A>
<P>

ウィンドウを削除するある種の関数を呼び出して
ウィンドウを<EM>削除</EM>しない限り、
ウィンドウはそのフレームに表示され続けます。
削除されたウィンドウがスクリーンに現れることはありませんが、
それを参照するものがある限りLispオブジェクトととしては
存在し続けます。
保存したウィンドウ構成（see 節 <A HREF="elisp_28.html#SEC432">27.16 ウィンドウ構成</A>）を復元する以外には、
ウィンドウの削除は取り消せません。
ウィンドウ構成を復元すると、
その構成に含まれないウィンドウはすべて削除されます。
<P>

ウィンドウを削除すると、それが使っていた場所は
近接する兄弟ウィンドウの1つに与えられます。
<P>

<A NAME="IDX1811"></A>
<DL>
<DT><U>Function:</U> <B>window-live-p</B> <I>window</I>
<DD>この関数は、<VAR>window</VAR>が削除されていると<CODE>nil</CODE>を返し、
さもなければ<CODE>t</CODE>を返す。
<P>

<STRONG>警告：</STRONG><CODE> </CODE>
削除されたウィンドウを正しいものとして使うと、
誤った情報や重大なエラーを引き起こす。
</DL>
<P>

<A NAME="IDX1812"></A>
<DL>
<DT><U>コマンド:</U> <B>delete-window</B> <I>&#38;optional window</I>
<DD>この関数は、ディスプレイから<VAR>window</VAR>を取りさり、<CODE>nil</CODE>を返す。
<VAR>window</VAR>を省略すると、選択されているウィンドウを削除する。
<CODE>delete-window</CODE>を呼び出したときにたった1つのウィンドウしかないと
エラーを通知する。
</DL>
<P>

<A NAME="IDX1813"></A>
<DL>
<DT><U>コマンド:</U> <B>delete-other-windows</B> <I>&#38;optional window</I>
<DD>この関数は、<VAR>window</VAR>のフレームにある他のウィンドウを削除して
<VAR>window</VAR>を当該フレームで唯一のウィンドウにする。
<VAR>window</VAR>を省略したり<CODE>nil</CODE>であると、
選択されているウィンドウをデフォルトで使う。
<P>

これは<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="IDX1814"></A>
<DL>
<DT><U>コマンド:</U> <B>delete-windows-on</B> <I>buffer &#38;optional frame</I>
<DD>この関数は、<VAR>buffer</VAR>を表示しているすべてのウィンドウを削除する。
<VAR>buffer</VAR>を表示しているウィンドウがなければなにもしない。
<P>

<CODE>delete-windows-on</CODE>はフレームを1つ1つ処理する。
フレームに異なるバッファを表示しているウィンドウが複数ある場合、
それらのうちで<VAR>buffer</VAR>を表示しているものを削除し、
他のものは空いた領域を埋めるために拡張される。
あるフレームのすべてのウィンドウ（たった1つのウィンドウである場合も含む）
が<VAR>buffer</VAR>を表示している場合、当該フレームは、
<CODE>other-buffer</CODE>で選ばれる別のバッファを表示する
1つのウィンドウだけになる。
see 節 <A HREF="elisp_27.html#SEC411">26.8 バッファリスト <EM>(2003/10/30)</EM></A>。
<P>

引数<VAR>frame</VAR>は、どのフレームを対象にするかを指定する。
この関数は、すべてのウィンドウを走査する他の関数と同じようには
<VAR>frame</VAR>を使わない。
特に、<CODE>t</CODE>と<CODE>nil</CODE>の値の意味は他の関数とは逆である。
以下に詳細を示す。
<P>

<UL>
<LI>
<CODE>nil</CODE>であると、すべてのフレームを対象にする。
<LI>
<CODE>t</CODE>であると、選択されているフレームを対象にする。
<LI>
<CODE>visible</CODE>であると、すべての可視フレームを対象にする。
<LI>
0であると、すべての可視フレームやアイコンになっているフレームを対象にする。
<LI>
フレームであると、当該フレームを対象にする。
</UL>
<P>

この関数はつねに<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="Selecting Windows"></A>
<HR SIZE="6">
<br><A NAME="SEC420"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC419"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC421"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Selecting Windows"></A>
<H2> 27.4 ウィンドウの選択 </H2>
<!--docid::SEC420::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Selecting%20Windows">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Selecting%20Windows</a>"<br>
"texi/elisp21/ウィンドウの選択"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6%A4%CE%C1%AA%C2%F2">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX1815"></A>
<P>

ウィンドウを選択すると、当該ウィンドウのバッファがカレントバッファになり、
カーソルがそのウィンドウに現れます。
<P>

<A NAME="IDX1816"></A>
<DL>
<DT><U>Function:</U> <B>selected-window</B>
<DD>この関数は、選択されているウィンドウを返す。
カーソルが表示され多くのコマンドが作用するウィンドウがそれである。
</DL>
<P>

<A NAME="IDX1817"></A>
<DL>
<DT><U>Function:</U> <B>select-window</B> <I>window</I>
<DD>この関数は、<VAR>window</VAR>を選択されているウィンドウにする。
すると、カーソルは（再表示すると）<VAR>window</VAR>に現れる。
<VAR>window</VAR>に表示されているバッファがただちにカレントバッファになる。
<P>

戻り値は<VAR>window</VAR>である。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq w (next-window))
(select-window w)
     => #&#60;window 65 on windows.texi&#62;
</pre></td></tr></table></DL>
<P>

<A NAME="IDX1818"></A>
<DL>
<DT><U>Macro:</U> <B>save-selected-window</B> <I>forms<small>...</small></I>
<DD>このマクロは、選択されているウィンドウを記録して、
<VAR>forms</VAR>を順に実行し、
もとの選択されているウィンドウに戻す。
<P>

このマクロは、ウィンドウサイズ、配置、内容に関して
いっさいなにも保存したり復元しないので、
<VAR>forms</VAR>がそれらを変更するとその変更は持続する。
<P>

ある時点で、各フレームにはフレームの選択されているウィンドウがある。
このマクロは、選択されているウィンドウ<EM>だけ</EM>を保存し、
他のフレームについてはなにも保存しない。
<VAR>forms</VAR>が別のフレームを選択して
そのフレームの選択されているウィンドウを変更すると、その変更は持続する。
</DL>
<P>

<A NAME="IDX1819"></A>
以下の関数は、さまざま条件でスクリーン上のウィンドウの1つを選びます。
<P>

<A NAME="IDX1820"></A>
<DL>
<DT><U>Function:</U> <B>get-lru-window</B> <I>&#38;optional frame</I>
<DD>この関数は、もっとも昔に『使われた』
（つまり選択されていた）ウィンドウを返す。
選択されているウィンドウはつねにもっとも最近に使われたウィンドウである。
<P>

ウィンドウがたった1つであると、
選択されているウィンドウが
もっとも昔に使われたウィンドウであることもありうる。
新たに作成されたウィンドウは、選択されるまではもっとも昔に
使われたウィンドウになる。
ミニバッファ用ウィンドウは候補にはならない。
<P>

引数<VAR>frame</VAR>は、どのウィンドウを対象とするかを制御する。
<P>

<UL>
<LI>
<CODE>nil</CODE>であると、選択されているフレームのウィンドウを対象とする。
<LI>
<CODE>t</CODE>であると、すべてのフレームのウィンドウを対象とする。
<LI>
<CODE>visible</CODE>であると、
すべての可視フレームのウィンドウを対象とする。
<LI>
0であると、すべての可視フレームやアイコンになっているフレーム
のウィンドウを対象にする。
<LI>
フレームであると、当該フレームのウィンドウを対象にする。
</UL>
</DL>
<P>

<A NAME="IDX1821"></A>
<DL>
<DT><U>Function:</U> <B>get-largest-window</B> <I>&#38;optional frame</I>
<DD>この関数は、もっとも大きな領域（高さ×幅）のウィンドウを返す。
左右に並んだウィンドウがなければ、
これがもっとも行数を持つウィンドウである。
ミニバッファ用ウィンドウは候補にはならない。
<P>

同じ大きさのウィンドウが2つある場合、
この関数は、選択されているウィンドウから始めて
ウィンドウの巡回順序（次節参照）で最初のウィンドウを返す。
<P>

引数<VAR>frame</VAR>は、ウィンドウのどのような集まりを対象にするかを指定する。
うえの<CODE>get-lru-window</CODE>を参照。
</DL>
<P>

<A NAME="Cyclic Window Ordering"></A>
<HR SIZE="6">
<br><A NAME="SEC421"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC420"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC422"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Cyclic Window Ordering"></A>
<H2> 27.5 ウィンドウの巡回順序 </H2>
<!--docid::SEC421::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Cyclic%20Window%20Ordering">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Cyclic%20Window%20Ordering</a>"<br>
"texi/elisp21/ウィンドウの巡回順序"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6%A4%CE%BD%E4%B2%F3%BD%E7%BD%F8">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX1822"></A>
<A NAME="IDX1823"></A>
<A NAME="IDX1824"></A>
<P>

つぎのウィンドウを選択するためにコマンド<KBD>C-x o</KBD>（<CODE>other-window</CODE>）を
使うと、スクリーン上のすべてのウィンドウをある巡回順序で巡ります。
ウィンドウのある構成において、この順序は変わりません。
これを<EM>ウィンドウの巡回順序</EM>（cyclic ordering of windows）と呼びます。
<P>

この順番は一般に上から下、左から右になります。
しかし、ウィンドウを分割した順番に依存して、
下や右が最初になることもあります。
<P>

最初に上下に分割してつぎに左右に分割すると、
順番は、フレームの上側で左から右、フレームのその下では左から右
といった具合になります。
最初に左右に分割すると、
順番は、フレームの左側で上から下といった具合になります。
一般に、ウィンドウ木のあるレベルで分割された各兄弟の中では、
順番は、左から右、あるいは、上から下になります。
<P>

<A NAME="IDX1825"></A>
<DL>
<DT><U>Function:</U> <B>next-window</B> <I>&#38;optional window minibuf all-frames</I>
<DD><A NAME="IDX1826"></A>
この関数は、ウィンドウの巡回順序において<VAR>window</VAR>のつぎの
ウィンドウを返す。
これは、<VAR>window</VAR>が選択されているときに
<KBD>C-x o</KBD>が選択するであろうウィンドウである。
<VAR>window</VAR>が唯一の可視ウィンドウであると、
この関数は<VAR>window</VAR>を返す。
<VAR>window</VAR>を省略すると、デフォルトは選択されているウィンドウである。
<P>

引数<VAR>minibuf</VAR>の値は、ミニバッファを
ウィンドウの順序に含めるかどうかを決定する。
<VAR>minibuf</VAR>が<CODE>nil</CODE>であると、
ミニバッファが活性であるときにはミニバッファを含める。
これは<KBD>C-x o</KBD>のふるまいである。
（ミニバッファが使われているあいだは、
ミニバッファ用ウィンドウは活性である。
see 節 <A HREF="elisp_20.html#SEC265">19. ミニバッファ</A>。）
<P>

<VAR>minibuf</VAR>が<CODE>t</CODE>であると、
ミニバッファが活性でなくても巡回順序にミニバッファ用ウィンドウを含める。
<P>

<VAR>minibuf</VAR>が<CODE>t</CODE>でも<CODE>nil</CODE>でもないと、
活性であってもミニバッファ用ウィンドウを含めない。
<P>

引数<VAR>all-frames</VAR>は、どのフレームを対象にするかを指定する。
可能な値とその意味を以下に示す。
<P>

<DL COMPACT>
<DT><CODE>nil</CODE>
<DD><VAR>window</VAR>のフレームのすべてのウィンドウに加えて、
ミニバッファがどこに置かれていようと
当該フレームが使っているミニバッファを対象にする。
<P>

<DT><CODE>t</CODE>
<DD>既存のすべてのフレームのすべてのウィンドウを対象にする。
<P>

<DT><CODE>visible</CODE>
<DD>すべての可視フレームのすべてのウィンドウを対象にする。
（結果が有用であるためには、可視フレームに<VAR>window</VAR>があること）
<P>

<DT>0
<DD>すべての可視フレームやアイコンになっているフレームの
すべてのウィンドウを対象にする。
<P>

<DT>その他
<DD><VAR>window</VAR>のフレームだけのウィンドウを正確に対象にする。
</DL>
<P>

つぎの例では、2つのウィンドウがあり、
どちらもバッファ`<SAMP>windows.texi</SAMP>'を表示していると仮定する。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(selected-window)
     => #&#60;window 56 on windows.texi&#62;
(next-window (selected-window))
     => #&#60;window 52 on windows.texi&#62;
(next-window (next-window (selected-window)))
     => #&#60;window 56 on windows.texi&#62;
</pre></td></tr></table></DL>
<P>

<A NAME="IDX1827"></A>
<DL>
<DT><U>Function:</U> <B>previous-window</B> <I>&#38;optional window minibuf all-frames</I>
<DD>この関数は、ウィンドウの巡回順序において<VAR>window</VAR>のまえの
ウィンドウを返す。
他の引数は、<CODE>next-window</CODE>と同様に、
どのようなウィンドウを巡回に含めるかを指定する。
</DL>
<P>

<A NAME="IDX1828"></A>
<DL>
<DT><U>コマンド:</U> <B>other-window</B> <I>count</I>
<DD>この関数は、ウィンドウの巡回順序において<VAR>count</VAR>番目うしろの
ウィンドウを選択する。
<VAR>count</VAR>が負であると、巡回順序において
-<VAR>count</VAR>番目まえのウィンドウに戻る。
この関数は<CODE>nil</CODE>を返す。
<P>

対話的に呼び出すと、<VAR>count</VAR>は数値前置引数である。
</DL>
<P>

<A NAME="IDX1829"></A>
<DL>
<DT><U>Function:</U> <B>walk-windows</B> <I>proc &#38;optional minibuf all-frames</I>
<DD>この関数は、各ウィンドウごとに当該ウィンドウを唯一の引数として
<VAR>proc</VAR>を呼び出してすべてのウィンドウを巡る。
<P>

省略可能な引数<VAR>minibuf</VAR>と<VAR>all-frames</VAR>は、
走査するウィンドウの集まりを指定する。
詳しくは上記の<CODE>next-window</CODE>を参照。
</DL>
<P>

<A NAME="Buffers and Windows"></A>
<HR SIZE="6">
<br><A NAME="SEC422"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC421"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC423"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Buffers and Windows"></A>
<H2> 27.6 バッファとウィンドウ </H2>
<!--docid::SEC422::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Buffers%20and%20Windows">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Buffers%20and%20Windows</a>"<br>
"texi/elisp21/バッファとウィンドウ"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%D0%A5%C3%A5%D5%A5%A1%A4%C8%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX1830"></A>
<A NAME="IDX1831"></A>
<A NAME="IDX1832"></A>
<P>

本節では、ウィンドウを調べたり、
正確に制御してウィンドウにバッファを表示する低レベルの関数について述べます。
使用するウィンドウを探したりそれにバッファを指定する関連する関数については、
See 節 <A HREF="elisp_28.html#SEC423">27.7 ウィンドウへのバッファの表示</A>。
そこに述べた関数は本節の関数より簡単に使えますが、
それらはウィンドウを選んだり作ったりするときに発見的手法を使います。
完全に制御する必要があるときには、本節の関数を使います。
<P>

<A NAME="IDX1833"></A>
<DL>
<DT><U>Function:</U> <B>set-window-buffer</B> <I>window buffer-or-name</I>
<DD>この関数は、<VAR>window</VAR>の内容として<VAR>buffer-or-name</VAR>を表示するようにする。
この関数は<CODE>nil</CODE>を返す。
これは、ウィンドウに表示するバッファを切り替える
もっとも基本の基本関数であり、
他の切り替え関数はこの関数を呼び出す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(set-window-buffer (selected-window) "foo")
     => nil
</pre></td></tr></table></DL>
<P>

<A NAME="IDX1834"></A>
<DL>
<DT><U>Function:</U> <B>window-buffer</B> <I>&#38;optional window</I>
<DD>この関数は、<VAR>window</VAR>に表示しているバッファを返す。
<VAR>window</VAR>を省略すると、この関数は選択されているウィンドウのバッファを返す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(window-buffer)
     => #&#60;buffer windows.texi&#62;
</pre></td></tr></table></DL>
<P>

<A NAME="IDX1835"></A>
<DL>
<DT><U>Function:</U> <B>get-buffer-window</B> <I>buffer-or-name &#38;optional all-frames</I>
<DD>この関数は、現在<VAR>buffer-or-name</VAR>を表示しているウィンドウを返す。
そのようなウィンドウがなければ<CODE>nil</CODE>を返す。
そのようなウィンドウが複数ある場合、
ウィンドウの巡回順序において選択されているウィンドウから始めて
最初にみつかったウィンドウを返す。
see 節 <A HREF="elisp_28.html#SEC421">27.5 ウィンドウの巡回順序</A>。
<P>

引数<VAR>all-frames</VAR>は、どのウィンドウを対象とするかを制御する。
<P>

<UL>
<LI>
<CODE>nil</CODE>であると、選択されているフレームのウィンドウを対象とする。
<LI>
<CODE>t</CODE>であると、すべてのフレームのウィンドウを対象とする。
<LI>
<CODE>visible</CODE>であると、
すべての可視フレームのすべてのウィンドウを対象にする。
<LI>
0であると、すべての可視フレームやアイコンになっているフレーム
のウィンドウを対象にする。
<LI>
フレームであると、当該フレームのウィンドウを対象にする。
</UL>
</DL>
<P>

<A NAME="IDX1836"></A>
<DL>
<DT><U>Function:</U> <B>get-buffer-window-list</B> <I>buffer-or-name &#38;optional minibuf all-frames</I>
<DD>この関数は、現在<VAR>buffer-or-name</VAR>を表示している
すべてのウィンドウのリストを返す。
<P>

省略可能な2つの引数は、<CODE>next-window</CODE>（see 節 <A HREF="elisp_28.html#SEC421">27.5 ウィンドウの巡回順序</A>）の
省略可能な引数と同様に働き、
<CODE>get-buffer-window</CODE>の省略可能な単一の引数と同じでは<EM>ない</EM>。
<CODE>get-buffer-window</CODE>を他の関数と互換性があるように
将来変更すべきなのであろう。
<P>

引数<VAR>all-frames</VAR>は、どのウィンドウを対象とするかを制御する。
<P>

<UL>
<LI>
<CODE>nil</CODE>であると、選択されているフレームのウィンドウを対象とする。
<LI>
<CODE>t</CODE>であると、すべてのフレームのウィンドウを対象とする。
<LI>
<CODE>visible</CODE>であると、
すべての可視フレームのすべてのウィンドウを対象にする。
<LI>
0であると、すべての可視フレームやアイコンになっているフレーム
のウィンドウを対象にする。
<LI>
フレームであると、当該フレームのウィンドウを対象にする。
</UL>
</DL>
<P>

<A NAME="IDX1837"></A>
<DL>
<DT><U>Variable:</U> <B>buffer-display-time</B>
<DD><A NAME="IDX1838"></A>
この変数は、バッファがウィンドウで見えるようになった最後の時刻を記録する。
この変数は各バッファでつねにバッファローカルであり、
<CODE>set-window-buffer</CODE>は、呼ばれるたびに
指定されたバッファのこの変数に<CODE>(current-time)</CODE>を設定する
（see 節 <A HREF="elisp_40.html#SEC647">39.5 時刻</A>）。
バッファが初めて作られると、<CODE>buffer-display-time</CODE>は値<CODE>nil</CODE>で始まる。
</DL>
<P>

<A NAME="Displaying Buffers"></A>
<HR SIZE="6">
<br><A NAME="SEC423"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC422"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC424"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Displaying Buffers"></A>
<H2> 27.7 ウィンドウへのバッファの表示 </H2>
<!--docid::SEC423::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Displaying%20Buffers">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Displaying%20Buffers</a>"<br>
"texi/elisp21/ウィンドウへのバッファの表示"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6%A4%D8%A4%CE%A5%D0%A5%C3%A5%D5%A5%A1%A4%CE%C9%BD%BC%A8">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX1839"></A>
<A NAME="IDX1840"></A>
<P>

本節では、ウィンドウを自動的に選びそれに指定したバッファを表示する
便利な関数について述べます。
これらの関数は、ある状況では、既存のウィンドウを分割します。
ウィンドウを選ぶ際の発見的手法を制御する変数についても述べます。
より正確に制御するための低レベルの関数については、
See 節 <A HREF="elisp_28.html#SEC422">27.6 バッファとウィンドウ</A>。
これらの関数はすべて<CODE>set-window-buffer</CODE>を呼び出して動作します。
<P>

バッファをカレントバッファにしてLispプログラムで参照したり変更できるように
するためには、本節の関数を使わないでください。
これらはその目的には強力すぎます。
ウィンドウのバッファの表示をユーザーにとっては迷惑で驚くようなものに
変更してしまうからです。
そのかわりに、ウィンドウのバッファの表示には影響せずに
バッファをプログラムから参照するためにカレントバッファにする
<CODE>set-buffer</CODE>と<CODE>save-current-buffer</CODE>（see 節 <A HREF="elisp_27.html#SEC405">26.2 カレントバッファ <EM>(2003/10/30)</EM></A>）を
使います。
<P>

<A NAME="IDX1841"></A>
<DL>
<DT><U>コマンド:</U> <B>switch-to-buffer</B> <I>buffer-or-name &#38;optional norecord</I>
<DD>この関数は、<VAR>buffer-or-name</VAR>をカレントバッファにし、
さらに、選択されているウィンドウに当該バッファを表示する。
つまり、人間が当該バッファを見ることができるようになり、
以降のキーボードコマンドは当該バッファに適用される。
<VAR>buffer-or-name</VAR>をカレントバッファにするが
選択されているウィンドウには表示しない<CODE>set-buffer</CODE>と比較してほしい。
see 節 <A HREF="elisp_27.html#SEC405">26.2 カレントバッファ <EM>(2003/10/30)</EM></A>。
<P>

<VAR>buffer-or-name</VAR>が既存のバッファを指定しなければ、
その名前の新たなバッファが作成される。
新たなバッファのメジャーモードは変数<CODE>default-major-mode</CODE>に
従って設定される。
see 節 <A HREF="elisp_23.html#SEC343">22.1.3 メジャーモードの選択方法</A>。
<P>

通常、指定したバッファはバッファリスト
（選択されているフレームのバッファリストとフレーム独立のバッファリストの
両方）の先頭に置かれる。
これは、<CODE>other-buffer</CODE>の動作に影響する。
しかし、<VAR>norecord</VAR>が<CODE>nil</CODE>以外であると、これを行わない。
see 節 <A HREF="elisp_27.html#SEC411">26.8 バッファリスト <EM>(2003/10/30)</EM></A>。
<P>

関数<CODE>switch-to-buffer</CODE>は、しばしば、
<KBD>C-x b</KBD>にバインドされて対話的に使われる。
プログラムでも多用される。
つねに<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="IDX1842"></A>
<DL>
<DT><U>コマンド:</U> <B>switch-to-buffer-other-window</B> <I>buffer-or-name &#38;optional norecord</I>
<DD>この関数は、<VAR>buffer-or-name</VAR>をカレントバッファにし、
現在選択されていないウィンドウに当該バッファを表示する。
そして当該ウィンドウを選択する。
バッファの扱い方は<CODE>switch-to-buffer</CODE>と同じである。
<P>

現在選択されているウィンドウは、この処理には絶対に使わない。
それが唯一のウィンドウである場合には、この目的のために
ウィンドウを分割して別のウィンドウを作る。
選択されているウィンドウがすでに当該バッファを表示している場合には、
当該ウィンドウはそのまま表示し続けるが、それにも関わらず、
表示するために別のウィンドウを探す。
<P>

この関数は、<VAR>norecord</VAR>が<CODE>nil</CODE>であると、
<CODE>switch-to-buffer</CODE>のようにバッファリストを更新する。
</DL>
<P>

<A NAME="IDX1843"></A>
<DL>
<DT><U>Function:</U> <B>pop-to-buffer</B> <I>buffer-or-name &#38;optional other-window norecord</I>
<DD>この関数は、<VAR>buffer-or-name</VAR>をカレントバッファにし、
以前には選択されていない別のウィンドウで当該バッファに切り替える。
そのウィンドウがそのフレームの選択されているウィンドウになる。
<P>

変数<CODE>pop-up-frames</CODE>が<CODE>nil</CODE>以外であると、
<CODE>pop-to-buffer</CODE>は、可視フレームから
当該バッファをすでに表示しているウィンドウを探す。
そのようなウィンドウがあれば、そのウィンドウを返すとともに、
そのウィンドウをそのフレームの選択されているウィンドウにする。
そのようなウィンドウがなければ、新たなフレームを作成し
それにバッファを表示する。
<P>

<CODE>pop-up-frames</CODE>が<CODE>nil</CODE>であると、
<CODE>pop-to-buffer</CODE>は選択されているフレーム内だけで処理を行う。
（選択されているフレームがミニバッファのみであるときには、
<CODE>pop-to-buffer</CODE>は、ミニバッファのみでない
もっとも最近に選択されたフレーム内で処理する。）
<P>

変数<CODE>pop-up-windows</CODE>が<CODE>nil</CODE>以外であると、
もとのウィンドウとは異なる新たなウィンドウを作成するために
ウィンドウを分割することがある。
詳しくは、<A HREF="elisp_28.html#SEC424">27.8 表示ウィンドウを選ぶ</A>を参照。
<P>

<VAR>other-window</VAR>が<CODE>nil</CODE>以外であると、
選択されているウィンドウに<VAR>buffer-or-name</VAR>がすでに表示されていても、
<CODE>pop-to-buffer</CODE>は別のウィンドウを探したり作成する。
そのため、<VAR>buffer-or-name</VAR>は2つのウィンドウに表示されることになる。
一方で、<VAR>buffer-or-name</VAR>が選択されているウィンドウに
すでに表示されていて、かつ、<VAR>other-window</VAR>が<CODE>nil</CODE>であると、
選択されているウィンドウは<VAR>buffer-or-name</VAR>の表示には十分であるとみなし、
なにも行わない。
<P>

<CODE>display-buffer</CODE>に影響するすべての変数は、
<CODE>pop-to-buffer</CODE>にも影響する。
see 節 <A HREF="elisp_28.html#SEC424">27.8 表示ウィンドウを選ぶ</A>。
<P>

<VAR>buffer-or-name</VAR>が文字列であり既存のバッファを指定しない場合、
その名前のバッファを作成する。
新たなバッファのメジャーモードは変数<CODE>default-major-mode</CODE>に
従って設定される。
see 節 <A HREF="elisp_23.html#SEC343">22.1.3 メジャーモードの選択方法</A>。
<P>

この関数は、<VAR>norecord</VAR>が<CODE>nil</CODE>であると、
<CODE>switch-to-buffer</CODE>のようにバッファリストを更新する。
</DL>
<P>

<A NAME="IDX1844"></A>
<DL>
<DT><U>コマンド:</U> <B>replace-buffer-in-windows</B> <I>buffer</I>
<DD>この関数は、<VAR>buffer</VAR>を表示しているすべてのウィンドウにおいて
<VAR>buffer</VAR>を別のバッファに切り替える。
別のバッファは<CODE>other-buffer</CODE>で選ぶ。
この関数の普通の用途は、別のバッファがどれになるか気にしない場合である。
つまり、<VAR>buffer</VAR>が表示されていないことを保証したい場合である。
<P>

この関数は<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="Choosing Window"></A>
<HR SIZE="6">
<br><A NAME="SEC424"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC423"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC425"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Choosing Window"></A>
<H2> 27.8 表示ウィンドウを選ぶ </H2>
<!--docid::SEC424::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Choosing%20Window">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Choosing%20Window</a>"<br>
"texi/elisp21/表示ウィンドウを選ぶ"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%C9%BD%BC%A8%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6%A4%F2%C1%AA%A4%D6">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

本節では、バッファを表示するためのウィンドウを選ぶための基本的な機能、
<CODE>display-buffer</CODE>について述べます。
上位レベルの関数やコマンドはすべてこのサブルーティンを使います。
ここでは、<CODE>display-buffer</CODE>の使い方とカスタマイズ方法を説明します。
<P>

<A NAME="IDX1845"></A>
<DL>
<DT><U>コマンド:</U> <B>display-buffer</B> <I>buffer-or-name &#38;optional not-this-window frame</I>
<DD>このコマンドは、<CODE>pop-to-buffer</CODE>のように、
<VAR>buffer-or-name</VAR>をあるウィンドウに表示するが、
そのウィンドウを選択しないので当該バッファもカレントバッファにならない。
この関数は、選択されているウィンドウを変えない。
<P>

<VAR>not-this-window</VAR>が<CODE>nil</CODE>以外であると、
指定したバッファが選択されているウィンドウにすでに表示されていても、
別のウィンドウに当該バッファを表示することを意味する。
これにより、当該バッファが同時に2つのウィンドウに表示される。
さもなければ、<VAR>buffer-or-name</VAR>がウィンドウにすでに表示されていると、
それで十分とみなしこの関数はなにもしない。
<P>

<CODE>display-buffer</CODE>は、<VAR>buffer-or-name</VAR>を表示するために
選んだウィンドウを返す。
<P>

引数<VAR>frame</VAR>が<CODE>nil</CODE>以外であると、
バッファがすでに表示されているかどうかを検査するときに
どのフレームを対象とするかを指定する。
それらのフレームのどれかのウィンドウに当該バッファがすでに表示されていると、
<CODE>display-buffer</CODE>は単にそのウィンドウを返す。
<VAR>frame</VAR>の可能な値はつぎのとおりである。
<P>

<UL>
<LI>
<CODE>nil</CODE>であると、選択されているフレームのウィンドウを対象とする。
<LI>
<CODE>t</CODE>であると、すべてのフレームのウィンドウを対象とする。
<LI>
<CODE>visible</CODE>であると、
すべての可視フレームのすべてのウィンドウを対象にする。
<LI>
0であると、すべての可視フレームやアイコンになっているフレーム
のウィンドウを対象にする。
<LI>
フレームであると、当該フレームのウィンドウを対象にする。
</UL>
<P>

<CODE>display-buffer</CODE>がウィンドウを作成したり探す詳しい手順は、
以下に述べる変数に依存する。
</DL>
<P>

<A NAME="IDX1846"></A>
<DL>
<DT><U>User Option:</U> <B>pop-up-windows</B>
<DD>この変数は、<CODE>display-buffer</CODE>が新たにウィンドウを作るかどうかを制御する。
<CODE>nil</CODE>以外であり、かつ、ウィンドウがたった1つである場合、
そのウィンドウを分割する。
<CODE>nil</CODE>であると、<CODE>display-buffer</CODE>は
単一のウィンドウを分割せずにそれ全体を使う。
</DL>
<P>

<A NAME="IDX1847"></A>
<DL>
<DT><U>User Option:</U> <B>split-height-threshold</B>
<DD>この変数は、ウィンドウが複数ある場合に
<CODE>display-buffer</CODE>がどの時点でウィンドウを分割するかを決定する。
<CODE>display-buffer</CODE>は、最大ウィンドウの行数が
この変数による指定行数より大きければ、最大ウィンドウをつねに分割する。
最大ウィンドウがこれだけ大きくない場合には、
それが唯一のウィンドウであり、かつ、<CODE>pop-up-windows</CODE>が<CODE>nil</CODE>以外
の場合にのみ最大ウィンドウを分割する。
</DL>
<P>

<A NAME="IDX1848"></A>
<DL>
<DT><U>User Option:</U> <B>pop-up-frames</B>
<DD>この変数は、<CODE>display-buffer</CODE>が新たなフレームを作るかどうかを制御する。
<CODE>nil</CODE>以外であると、<CODE>display-buffer</CODE>は、
すべての可視フレームから指定されたバッファをすでに表示している
既存のウィンドウを探す。
そのようなウィンドウがあれば、そのウィンドウを返す。
さもなければ、新たなフレームを作る。
変数<CODE>pop-up-frames</CODE>が<CODE>nil</CODE>以外であると、
変数<CODE>pop-up-windows</CODE>と<CODE>split-height-threshold</CODE>は影響しない。
<P>

<CODE>pop-up-frames</CODE>が<CODE>nil</CODE>であると、
<CODE>display-buffer</CODE>はウィンドウを分割するか再利用する。
<P>

詳しくは、see 節 <A HREF="elisp_29.html#SEC434">28. フレーム</A>。
</DL>
<P>

<A NAME="IDX1849"></A>
<DL>
<DT><U>Variable:</U> <B>pop-up-frame-function</B>
<DD>この変数は、<CODE>pop-up-frames</CODE>が<CODE>nil</CODE>以外であるときに
どのように新たなフレームを作るかを指定する。
<P>

その値は引数なしの関数であること。
<CODE>display-buffer</CODE>が新たにフレームを作るとき、
フレームを返すこの関数を呼び出す。
この変数のデフォルト値は、
<CODE>pop-up-frame-alist</CODE>のパラメータを使って新たなフレームを作る関数である。
</DL>
<P>

<A NAME="IDX1850"></A>
<DL>
<DT><U>Variable:</U> <B>pop-up-frame-alist</B>
<DD>この変数は、<CODE>display-buffer</CODE>が新たにフレームを作るときに
使用するフレームパラメータを指定する連想リストを保持する。
フレームパラメータに関して詳しくは、
see 節 <A HREF="elisp_29.html#SEC437">28.3 フレームパラメータ</A>。
</DL>
<P>

<A NAME="IDX1851"></A>
<DL>
<DT><U>User Option:</U> <B>special-display-buffer-names</B>
<DD>特別に表示すべきバッファのバッファ名のリスト。
バッファ名がこのリストにあると、
<CODE>display-buffer</CODE>は当該バッファを特別に扱う。
<P>

デフォルトでは、特別に表示するとは、
専用のフレームにバッファを表示することである。
<P>

リストの要素が文字列でなくリストであると、
リストのCARがバッファ名であり、
リストの残りはフレームの作成方法を指定する。
それは、フレームパラメータを指定する連想リストであるか、
関数とそれに渡す引数である。
（関数の第1引数はつねに表示すべきバッファである。
そのあとにリスト内の引数が続く。）
</DL>
<P>

<A NAME="IDX1852"></A>
<DL>
<DT><U>User Option:</U> <B>special-display-regexps</B>
<DD>特別に表示すべきバッファを指定する正規表現のリスト。
バッファ名がこのリストのいずれかの正規表現に一致すると、
<CODE>display-buffer</CODE>は当該バッファを特別に扱う。
<P>

デフォルトでは、特別に表示するとは、
専用のフレームにバッファを表示することである。
<P>

リストの要素が文字列でなくリストであると、
リストのCARが正規表現であり、
リストの残りはフレームの作成方法を指定する。
上記の<CODE>special-display-buffer-names</CODE>を参照。
</DL>
<P>

<A NAME="IDX1853"></A>
<DL>
<DT><U>Variable:</U> <B>special-display-function</B>
<DD>この変数は、バッファを特別に表示するために呼び出す関数を保持する。
引数としてバッファを受け取り、
当該バッファを表示したウィンドウを返すこと。
<P>

この関数のデフォルト値は<CODE>special-display-popup-frame</CODE>である。
</DL>
<P>

<A NAME="IDX1854"></A>
<DL>
<DT><U>Function:</U> <B>special-display-popup-frame</B> <I>buffer</I>
<DD>この関数は、<VAR>buffer</VAR>をそれ専用のフレームに表示する。
あるフレームのウィンドウに<VAR>buffer</VAR>がすでに表示されている場合、
当該ウィンドウを使うために当該フレームを可視にし手前に持ってくる。
さもなければ、<VAR>buffer</VAR>用にフレームを作成する。
<P>

この関数は、<VAR>buffer</VAR>を表示している既存のウィンドウのフレームで
当該バッファだけを表示しているかどうかに関わらず、
既存の当該ウィンドウを使う。
しかし、<VAR>buffer</VAR>を作るまえに読者の初期化ファイルで上記の変数に設定
しているときには、当該ウィンドウは以前にこの関数が作成したものであろう。
</DL>
<P>

<A NAME="IDX1855"></A>
<DL>
<DT><U>User Option:</U> <B>special-display-frame-alist</B>
<DD>この変数は、<CODE>special-display-popup-frame</CODE>がフレームを作るときに
使用するフレームパラメータを保持する。
</DL>
<P>

<A NAME="IDX1856"></A>
<DL>
<DT><U>User Option:</U> <B>same-window-buffer-names</B>
<DD>選択されているウィンドウに表示すべきバッファのバッファ名のリスト。
バッファ名がこのリストにあると、
<CODE>display-buffer</CODE>は選択されているウィンドウで当該バッファに切り替える。
</DL>
<P>

<A NAME="IDX1857"></A>
<DL>
<DT><U>User Option:</U> <B>same-window-regexps</B>
<DD>選択されているウィンドウに表示すべきバッファを指定する正規表現のリスト。
バッファ名がこのリストのいずれかの正規表現に一致すると、
<CODE>display-buffer</CODE>は選択されているウィンドウで当該バッファに切り替える。
</DL>
<P>

<A NAME="IDX1858"></A>
<DL>
<DT><U>Variable:</U> <B>display-buffer-function</B>
<DD>この変数は、<CODE>display-buffer</CODE>のふるまいをカスタマイズする
もっとも柔軟な方法である。
<CODE>nil</CODE>以外であると、<CODE>display-buffer</CODE>が処理を依頼するために
呼び出す関数であること。
その関数は、<CODE>display-buffer</CODE>が受け取るのと同じ2つの引数を受け付けること。
その関数は、ウィンドウを選ぶか作成し、指定されたバッファを表示し、
当該ウィンドウを返すこと。
<P>

このフックは、上に述べた他のオプションやフックすべてに優先する。
</DL>
<P>

<A NAME="IDX1859"></A>
ウィンドウにはそのバッファ『専用』と印を付けられます。
そうすると、<CODE>display-buffer</CODE>は他のバッファを表示するために
当該ウィンドウを使わないようにします。
<P>

<A NAME="IDX1860"></A>
<DL>
<DT><U>Function:</U> <B>window-dedicated-p</B> <I>window</I>
<DD>この関数は、<VAR>window</VAR>に専用と印が付いていれば<CODE>t</CODE>を返し、
さもなければ<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="IDX1861"></A>
<DL>
<DT><U>Function:</U> <B>set-window-dedicated-p</B> <I>window flag</I>
<DD>この関数は、<VAR>flag</VAR>が<CODE>nil</CODE>以外であると<VAR>window</VAR>に専用の印を付け、
さもなければ専用の印を消す。
</DL>
<P>

<A NAME="Window Point"></A>
<HR SIZE="6">
<br><A NAME="SEC425"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC424"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC426"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Window Point"></A>
<H2> 27.9 ウィンドウとポイント </H2>
<!--docid::SEC425::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Window%20Point">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Window%20Point</a>"<br>
"texi/elisp21/ウィンドウとポイント"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6%A4%C8%A5%DD%A5%A4%A5%F3%A5%C8">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX1862"></A>
<A NAME="IDX1863"></A>
<A NAME="IDX1864"></A>
<A NAME="IDX1865"></A>
<P>

各ウィンドウには、同じバッファを表示している
別のウィンドウのポイントの値とは独立な独自のポイントの値があります。
これにより、あるバッファを複数のウィンドウに表示しても有用なのです。
<P>

<UL>
<LI>
ウィンドウのポイントは、ウィンドウを最初に作成したときに確立される。
バッファのポイントか、バッファをすでに表示しているウィンドウがあれば
そのウィンドウのポイントで初期化される。
<P>

<LI>
ウィンドウを選択すると、ウィンドウのポイント値が
そのバッファのポイント値になる。
逆に、ウィンドウの選択をやめると、
バッファのポイント値がウィンドウのポイント値になる。
したがって、同じバッファを表示している複数のウィンドウのあいだで
切り替えると、選択されているウィンドウではウィンドウのポイント値が
当該バッファで有効になり、
選択されていない他のウィンドウの各ポイント値は、
それぞれのウィンドウに保持される。
<P>

<LI>
選択されているウィンドウがカレントバッファを表示し続ける限り、
ウィンドウのポイントとバッファのポイントはともに動いて、
両者は同じであり続ける。
<P>

<LI>
バッファ内位置について詳しくは、see 節 <A HREF="elisp_30.html#SEC462">29. バッファ内の位置</A>。
</UL>
<P>

ユーザーにとっては、ポイントとはカーソルが置かれた箇所であり、
別のバッファに切り替えるとそのバッファのポイント位置に
カーソルが移動します。
<P>

<A NAME="IDX1866"></A>
<DL>
<DT><U>Function:</U> <B>window-point</B> <I>window</I>
<DD>この関数は、<VAR>window</VAR>の現在のポイント位置を返す。
選択されていないウィンドウでは、
当該ウィンドウを選択したときになるであろう
（ウィンドウのバッファの）ポイント値である。
<P>

<VAR>window</VAR>が選択されているウィンドウであり、かつ、
そのバッファがカレントバッファであれば、
戻り値は当該バッファのポイントと同じである。
<P>

厳密にいえば、すべてのフォーム<CODE>save-excursion</CODE>の外側での
『トップレベル』のポイントの値を返すほうがより正確である。
しかし、そのような値を探すのは困難である。
</DL>
<P>

<A NAME="IDX1867"></A>
<DL>
<DT><U>Function:</U> <B>set-window-point</B> <I>window position</I>
<DD>この関数は、<VAR>window</VAR>のバッファ内の位置<VAR>position</VAR>を
<VAR>window</VAR>のポイント位置とする。
</DL>
<P>

<A NAME="Window Start"></A>
<HR SIZE="6">
<br><A NAME="SEC426"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC425"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC427"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Window Start"></A>
<H2> 27.10 ウィンドウの開始位置 </H2>
<!--docid::SEC426::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Window%20Start">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Window%20Start</a>"<br>
"texi/elisp21/ウィンドウの開始位置"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6%A4%CE%B3%AB%BB%CF%B0%CC%C3%D6">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

各ウィンドウには、バッファのどの箇所から表示を始めるかを指定する
バッファ内位置を追跡するために使うマーカがあります。
この位置をウィンドウの<EM>表示開始</EM>（display-start）位置
（あるいは単に<EM>開始</EM>（start）位置）と呼びます。
この位置の直後にある文字が、ウィンドウの左上隅に現れます。
この位置は、通常、テキスト行の先頭にありますが、必須ではありません。
<P>

<A NAME="IDX1868"></A>
<DL>
<DT><U>Function:</U> <B>window-start</B> <I>&#38;optional window</I>
<DD><A NAME="IDX1869"></A>
この関数は、ウィンドウ<VAR>window</VAR>の表示開始位置を返す。
<VAR>window</VAR>が<CODE>nil</CODE>であると、
選択されているウィンドウを使う。
たとえばつぎのとおりである。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(window-start)
     => 7058
</pre></td></tr></table><P>

新たにウィンドウを作成したり異なるバッファをウィンドウに表示すると、
表示開始位置は、当該バッファの最近に使われた表示開始位置になるか、
バッファに表示開始位置がなければ1になる。
<P>

再表示するとウィンドウ開始位置は
（それ以前の再表示で明示的に位置を指定していなければ）、
ポイントがスクリーンに現れるように更新される。
再表示以外には、ウィンドウ開始位置を自動的に変更しない。
ポイントを移動しても、つぎの再表示までは、
連動してウィンドウ開始位置が変更されると期待しないこと。
<P>

<CODE>window-start</CODE>を使った実際的な例は、
<A HREF="elisp_30.html#SEC468">29.2.4 テキスト行単位の移動</A>の<CODE>count-lines</CODE>の記述を参照。
</DL>
<P>

<A NAME="IDX1870"></A>
<DL>
<DT><U>Function:</U> <B>window-end</B> <I>&#38;optional window update</I>
<DD>この関数は、ウィンドウ<VAR>window</VAR>の表示の末尾の位置を返す。
<VAR>window</VAR>が<CODE>nil</CODE>であると、選択されているウィンドウを使う。
<P>

バッファのテキストを変更したりポイントを移動しただけでは、
<CODE>window-end</CODE>が返す値は更新されない。
この値は、Emacsが再表示を実行し途中で止めることなく
最後まで終了した場合にのみ更新される。
<P>

<VAR>window</VAR>の最後の再表示が途中で止められて完了していないと、
当該ウィンドウの表示の末尾の位置はEmacsにはわからない。
<P>

<VAR>update</VAR>が<CODE>nil</CODE>以外であると、
<CODE>window-end</CODE>はウィンドウの末尾の更新値をつねに返す。
保存しておいた値が正しければ<CODE>window-end</CODE>はそれを返す。
さもなければ、バッファのテキストを走査して正しい値を計算する。
</DL>
<P>

<A NAME="IDX1871"></A>
<DL>
<DT><U>Function:</U> <B>set-window-start</B> <I>window position &#38;optional noforce</I>
<DD>この関数は、<VAR>window</VAR>の表示開始位置を
<VAR>window</VAR>のバッファ内の位置<VAR>position</VAR>とする。
これは<VAR>position</VAR>を返す。
<P>

表示ルーティンは、バッファを表示するときには
ポイント位置が可視であることを強要する。
通常、表示ルーティンは、ポイントを可視にするために必要なときには
表示開始位置を（つまりウィンドウをスクロールして）変更する。
しかし、<VAR>noforce</VAR>に<CODE>nil</CODE>を指定してこの関数で開始位置を指定すると、
ポイント位置がスクリーンからはみ出したとしても、
表示開始位置を<VAR>position</VAR>とすることを意味する。
ポイントがスクリーンからはみ出す場合には、
表示ルーティンはウィンドウの中央行の左端にポイントを移動する。
<P>

たとえば、ポイントが1にあるときに
ウィンドウの開始位置を2にしたとすると、
ポイントはウィンドウの上端より『上』になる。
表示ルーティンは、再表示時にポイントが1のままであると
自動的にポイントを移動する。
以下に例を示す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;; 式<CODE>set-window-start</CODE>を実行するまえの
;; `<SAMP>foo</SAMP>'の見え方

---------- Buffer: foo ----------
-!-This is the contents of buffer foo.
2
3
4
5
6
---------- Buffer: foo ----------

(set-window-start
 (selected-window)
 (1+ (window-start)))
=> 2

;; 式<CODE>set-window-start</CODE>を実行したあとの
;; `<SAMP>foo</SAMP>'の見え方
---------- Buffer: foo ----------
his is the contents of buffer foo.
2
3
-!-4
5
6
---------- Buffer: foo ----------
</pre></td></tr></table><P>

<VAR>noforce</VAR>が<CODE>nil</CODE>以外であって
<VAR>position</VAR>にするとつぎの再表示時にポイントがスクリーンからはみ出す
場合には、再表示ではポイントが収まるように新たなウィンドウ開始位置を
計算し、<VAR>position</VAR>を使わない。
</DL>
<P>

<A NAME="IDX1872"></A>
<DL>
<DT><U>Function:</U> <B>pos-visible-in-window-p</B> <I>&#38;optional position window</I>
<DD>この関数は、<VAR>window</VAR>内の<VAR>position</VAR>がスクリーン上で
現在可視なテキストの範囲内にあれば<CODE>t</CODE>を返す。
<VAR>position</VAR>がスクリーンの上下端からはみ出す場合には<CODE>nil</CODE>を返す。
引数<VAR>position</VAR>のデフォルトはポイントの現在位置であり、
<VAR>window</VAR>のデフォルトは選択されているウィンドウである。
例を示す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(or (pos-visible-in-window-p
     (point) (selected-window))
    (recenter 0))
</pre></td></tr></table><P>

関数<CODE>pos-visible-in-window-p</CODE>は、垂直方向のスクロールだけを考慮する。
<VAR>window</VAR>を水平方向にスクロールしたために
<VAR>position</VAR>がはみ出している場合には、
<CODE>pos-visible-in-window-p</CODE>は<CODE>t</CODE>を返す。
see 節 <A HREF="elisp_28.html#SEC428">27.12 水平スクロール</A>。
</DL>
<P>

<A NAME="Vertical Scrolling"></A>
<HR SIZE="6">
<br><A NAME="SEC427"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC426"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC428"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Vertical Scrolling"></A>
<H2> 27.11 垂直スクロール </H2>
<!--docid::SEC427::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Vertical%20Scrolling">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Vertical%20Scrolling</a>"<br>
"texi/elisp21/垂直スクロール"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%BF%E2%C4%BE%A5%B9%A5%AF%A5%ED%A1%BC%A5%EB">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX1873"></A>
<A NAME="IDX1874"></A>
<P>

垂直スクロールとは、ウィンドウ内のテキストを上向きや下向きに動かすことです。
ウィンドウの表示開始位置の値を変更することで動作します。
ポイントがスクリーン内に留まるように<CODE>window-point</CODE>の
値を変更することもあります。
<P>

コマンド<CODE>scroll-up</CODE>や<CODE>scroll-down</CODE>の
方向を示す『up』（上向き）と『down』（下向き）は、
ウィンドウを見ているときのバッファ内のテキストの移動方向を表します。
テキストは縦に長い紙に（横書きで）書いてあり、
スクロールコマンドはその紙を上下に動かすと想像してください。
したがって、バッファの中ほどのテキストを見ているときに
<CODE>scroll-down</CODE>を繰り返し呼び出すと、
最終的にはバッファの先頭を見ることになります。
<P>

逆の慣習の名前を使うべきだと主張する人々もいます。
彼らは、固定されたテキストのうえをウィンドウが動いていると想像するのです。
すると、『下向き』のコマンドはバッファの末尾に移動することになります。
この見方は、ウィンドウとバッファ内のテキストとの実際の関係に
よく適合しているのですが、ユーザーはそのように考えないようです。
端末上ではウィンドウは動きませんし、スクロールコマンドは
明らかにテキストをスクリーン上で上下に動かしています。
ユーザーの視点に合う名称を選んだのです。
<P>

カレントバッファと選択されているウィンドウに
表示されているバッファとが異なる場合には、
（<CODE>scroll-other-window</CODE>以外の）スクロール関数の結果は予測できません。
See 節 <A HREF="elisp_27.html#SEC405">26.2 カレントバッファ <EM>(2003/10/30)</EM></A>。
<P>

<A NAME="IDX1875"></A>
<DL>
<DT><U>コマンド:</U> <B>scroll-up</B> <I>&#38;optional count</I>
<DD>この関数は、選択されているウィンドウのテキストを
上向きに<VAR>count</VAR>行だけスクロールする。
<VAR>count</VAR>が負であると、実際のスクロール方向は下向きである。
<P>

<VAR>count</VAR>が<CODE>nil</CODE>（あるいは省略）であると、
スクロール量は、ウィンドウの（モード行を数えない）利用可能な高さより
<CODE>next-screen-context-lines</CODE>だけ少なくなる。
<P>

<CODE>scroll-up</CODE>は<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="IDX1876"></A>
<DL>
<DT><U>コマンド:</U> <B>scroll-down</B> <I>&#38;optional count</I>
<DD>この関数は、選択されているウィンドウのテキストを
下向きに<VAR>count</VAR>行だけスクロールする。
<VAR>count</VAR>が負であると、実際のスクロール方向は上向きである。
<P>

<VAR>count</VAR>が<CODE>nil</CODE>（あるいは省略）であると、
スクロール量は、ウィンドウの（モード行を数えない）利用可能な高さより
<CODE>next-screen-context-lines</CODE>だけ少なくなる。
<P>

<CODE>scroll-down</CODE>は<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="IDX1877"></A>
<DL>
<DT><U>コマンド:</U> <B>scroll-other-window</B> <I>&#38;optional count</I>
<DD>この関数は、別のウィンドウのテキストを上向きに
<VAR>count</VAR>行だけスクロールする。
<VAR>count</VAR>の値が負であったり<CODE>nil</CODE>であると、
<CODE>scroll-up</CODE>と同様に扱う。
<P>

変数<CODE>other-window-scroll-buffer</CODE>で、スクロールするバッファを指定できる。
選択されているウィンドウがミニバッファ用であるときには、
つぎのウィンドウは、通常、もっとも左上隅にあるウィンドウである。
変数<CODE>minibuffer-scroll-window</CODE>で、
スクロールする別のウィンドウを指定できる。
別のウィンドウが選択されている場合には、この変数の効果はない。
see 節 <A HREF="elisp_20.html#SEC280">19.9 ミニバッファに関するその他</A>。
<P>

ミニバッファが活性であると、
右下隅のウィンドウが選択されているウィンドウであるときには、
つぎのウィンドウはミニバッファ用ウィンドウである。
この場合、<CODE>scroll-other-window</CODE>はミニバッファをスクロールしようとする。
ミニバッファにたった1行しか入っていなければスクロールできず、
エコー領域に『Beginning of buffer』と短時間表示されたあとで、
ミニバッファの行が再度現れる。
</DL>
<P>

<A NAME="IDX1878"></A>
<DL>
<DT><U>Variable:</U> <B>other-window-scroll-buffer</B>
<DD>この変数が<CODE>nil</CODE>以外であると、
<CODE>scroll-other-window</CODE>がスクロールするバッファを指定する。
</DL>
<P>

<A NAME="IDX1879"></A>
<A NAME="IDX1880"></A>
<DL>
<DT><U>User Option:</U> <B>scroll-margin</B>
<DD>このオプションは、スクロール時の余白の大きさ、
つまり、ポイントとウィンドウの上端や下端とのあいだにある最低行数を指定する。
ウィンドウの上端や下端からこの行数以内にポイントが移動するたびに、
（可能ならば）ウィンドウを自動的にスクロールして、
ポイントを余白の外側でウィンドウの中央近くに移動する。
</DL>
<P>

<A NAME="IDX1881"></A>
<A NAME="IDX1882"></A>
<DL>
<DT><U>User Option:</U> <B>scroll-conservatively</B>
<DD>この変数は、ポイントがスクリーンからはみ出したとき
（あるいはスクロール時の余白に入ったとき）に
どのように自動的にスクロールするかを制御する。
値が0であると、ウィンドウの縦方向でポイントが中央にくるように
テキストをスクロールして再表示する。
値が正の整数<VAR>n</VAR>であると、
ウィンドウをどちらかの方向に最大<VAR>n</VAR>行だけスクロールすると
ポイントが見えるようになるときには、そのようにスクロールして再表示する。
さもなければ、ポイントが中央にくるようにする。
デフォルト値は0である。
</DL>
<P>

<A NAME="IDX1883"></A>
<DL>
<DT><U>User Option:</U> <B>scroll-step</B>
<DD>この変数は、<CODE>scroll-conservatively</CODE>の古い変種である。
違いは、値が<VAR>n</VAR>であると正確に<VAR>n</VAR>行だけのスクロールを許すことである。
この機能は<CODE>scroll-margin</CODE>では働かない。
デフォルト値は0である。
</DL>
<P>

<A NAME="IDX1884"></A>
<A NAME="IDX1885"></A>
<DL>
<DT><U>User Option:</U> <B>scroll-preserve-screen-position</B>
<DD>このオプションが<CODE>nil</CODE>以外であると、
スクロール関数は、可能ならばカーソルの垂直方向の位置を
変えないようにポイントを移動する。
</DL>
<P>

<A NAME="IDX1886"></A>
<DL>
<DT><U>User Option:</U> <B>next-screen-context-lines</B>
<DD>この変数の値は、1画面分スクロールしたときに連続して残っている行数である。
たとえば、引数<CODE>nil</CODE>の<CODE>scroll-up</CODE>は、
ウィンドウの下端にあるこの行数だけの行が上端にくるようにスクロールする。
デフォルト値は<CODE>2</CODE>である。
</DL>
<P>

<A NAME="IDX1887"></A>
<DL>
<DT><U>コマンド:</U> <B>recenter</B> <I>&#38;optional count</I>
<DD><A NAME="IDX1888"></A>
この関数は、選択されているウィンドウをスクロールして
ポイント位置にあるテキストがウィンドウ内の垂直方向の指定位置にくるようにする。
<P>

<VAR>count</VAR>が非負の数であると、ポイント位置にある行を
ウィンドウの上端から<VAR>count</VAR>行下にくるようにする。
<VAR>count</VAR>が負の数であると、ウィンドウの下端から数え、
-1はウィンドウの使用可能な最後の行を表す。
<VAR>count</VAR>が<CODE>nil</CODE>以外のリストであると、
ウィンドウの中央の行を表す。
<P>

<VAR>count</VAR>が<CODE>nil</CODE>であると、<CODE>recenter</CODE>は、
ポイント位置にある行がウィンドウの中央にくるようにして、
選択されているフレーム全体をクリアして再表示する。
<P>

<CODE>recenter</CODE>が対話的に呼び出されると、<VAR>count</VAR>は生の前置引数である。
したがって、前置引数として<KBD>C-u</KBD>と打つと
<VAR>count</VAR>は<CODE>nil</CODE>以外のリストになり、
<KBD>C-u 4</KBD>と打つと<VAR>count</VAR>は4になって上端から4行目に現在行がくる。
<P>

引数が0であると、
<CODE>recenter</CODE>はウィンドウの上端に現在行がくるようにする。
この動作は、このための専用のキーバインディングをする人がいるくらい便利である。
たとえばつぎのようにする。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(defun line-to-top-of-window ()
  "Scroll current line to top of window.
Replaces three keystroke sequence C-u 0 C-l."
  (interactive)
  (recenter 0))

(global-set-key [kp-multiply] 'line-to-top-of-window)
</pre></td></tr></table></DL>
<P>

<A NAME="Horizontal Scrolling"></A>
<HR SIZE="6">
<br><A NAME="SEC428"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC427"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC429"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Horizontal Scrolling"></A>
<H2> 27.12 水平スクロール </H2>
<!--docid::SEC428::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Horizontal%20Scrolling">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Horizontal%20Scrolling</a>"<br>
"texi/elisp21/水平スクロール"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%BF%E5%CA%BF%A5%B9%A5%AF%A5%ED%A1%BC%A5%EB">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX1889"></A>
<P>

英文は『内側のループ』では左から右へ『外側のループ』では上から下へと読むので、
水平スクロールは垂直スクロールには似ていません。
垂直スクロールでは表示するテキストの連続部分を選びますが、
水平スクロールでは各行の一部がスクリーンからはみ出すことになります。
そのため、水平スクロールの量は、バッファ内の位置ではなく、
コラム数で指定します。
これは、<CODE>window-start</CODE>が返す表示開始位置とはなんの関係もありません。
<P>

通常、水平スクロールは行われません。
つまり、左端のコラムはウィンドウの左端にあります。
この状態で右向きにスクロールしても、
それによって見えてくるスクリーンの左側にはなにもないので意味がありません。
ですから、これは禁止されます。
左向きへのスクロールは許されて、
テキストの先頭コラムはウィンドウの端からはみ出し、
それまで切り詰められていた右側のコラムが見えるようになります。
左向きの水平スクロール量が0でなければ、
右向きへスクロールして戻せますが、
これは全体としての水平スクロール量が0になるまでです。
左向きスクロールの限界はありませんが、
最終的にはテキストすべてが左端からはみ出してしまいます。
<P>

<A NAME="IDX1890"></A>
<DL>
<DT><U>コマンド:</U> <B>scroll-left</B> <I>count</I>
<DD>この関数は、選択されているウィンドウを<VAR>count</VAR>コラムだけ
左向きに（<VAR>count</VAR>が負ならば右向きに）スクロールする。
戻り値は、変更後の左向き水平スクロール量の総量であり、
<CODE>window-hscroll</CODE>（下記参照）が返す値と同じである。
</DL>
<P>

<A NAME="IDX1891"></A>
<DL>
<DT><U>コマンド:</U> <B>scroll-right</B> <I>count</I>
<DD>この関数は、選択されているウィンドウを<VAR>count</VAR>コラムだけ
右向きに（<VAR>count</VAR>が負ならば左向きに）スクロールする。
戻り値は、変更後の左向き水平スクロール量の総量であり、
<CODE>window-hscroll</CODE>（下記参照）が返す値と同じである。
<P>

可能なだけウィンドウを右向きにスクロールしてしまうと、
通常の状態、つまり、左向き水平スクロール量が0になり、
それ以降、右向きスクロールは効果がなくなる。
</DL>
<P>

<A NAME="IDX1892"></A>
<DL>
<DT><U>Function:</U> <B>window-hscroll</B> <I>&#38;optional window</I>
<DD>この関数は、<VAR>window</VAR>の左向き水平スクロール量の総量、
つまり、<VAR>window</VAR>のテキストが左端を超えてスクロールされたコラム数を返す。
<P>

値はけっして負にはならない。
<VAR>window</VAR>が水平方向にスクロールされていなければ
（これが通常の状態）0である。
<P>

<VAR>window</VAR>が<CODE>nil</CODE>であると、選択されているウィンドウを使う。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(window-hscroll)
     => 0
(scroll-left 5)
     => 5
(window-hscroll)
     => 5
</pre></td></tr></table></DL>
<P>

<A NAME="IDX1893"></A>
<DL>
<DT><U>Function:</U> <B>set-window-hscroll</B> <I>window columns</I>
<DD>この関数は、<VAR>window</VAR>のスクロールされている左端からのコラム数を
<VAR>columns</VAR>の値とする。
引数<VAR>columns</VAR>は0か正であること。
さもないと0と仮定する。
<P>

戻り値は<VAR>columns</VAR>である。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(set-window-hscroll (selected-window) 10)
     => 10
</pre></td></tr></table></DL>
<P>

水平スクロールのために指定位置<VAR>position</VAR>が
スクリーンからはみ出しているかどうかを調べる方法をつぎに示します。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(defun hscroll-on-screen (window position)
  (save-excursion
    (goto-char position)
    (and
     (&#62;= (- (current-column) (window-hscroll window)) 0)
     (&#60; (- (current-column) (window-hscroll window))
        (window-width window)))))
</pre></td></tr></table><P>

<A NAME="Size of Window"></A>
<HR SIZE="6">
<br><A NAME="SEC429"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC428"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC430"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Size of Window"></A>
<H2> 27.13 ウィンドウサイズ </H2>
<!--docid::SEC429::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Size%20of%20Window">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Size%20of%20Window</a>"<br>
"texi/elisp21/ウィンドウサイズ"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6%A5%B5%A5%A4%A5%BA">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX1894"></A>
<A NAME="IDX1895"></A>
<A NAME="IDX1896"></A>
<P>

Emacsのウィンドウは矩形であり、そのサイズ情報は
高さ（行数）と幅（各行の文字数）から成ります。
モード行は高さに含みます。
しかし、スクロールバーや左右のウィンドウを隔てる文字`<SAMP>|</SAMP>'のコラムは
幅には含みません。
<P>

つぎの3つの関数は、ウィンドウのサイズ情報を返します。
<P>

<A NAME="IDX1897"></A>
<DL>
<DT><U>Function:</U> <B>window-height</B> <I>&#38;optional window</I>
<DD>この関数は、モード行を含む<VAR>window</VAR>の行数を返す。
<VAR>window</VAR>がフレーム全体を占める場合、この値は典型的には、
当該フレームにおける<CODE>frame-height</CODE>の値より1小さい
（最後の行はミニバッファ用につねに確保してあるため）。
<P>

<VAR>window</VAR>が<CODE>nil</CODE>であると、この関数は選択されているウィンドウを使う。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(window-height)
     => 23
(split-window-vertically)
     => #&#60;window 4 on windows.texi&#62;
(window-height)
     => 11
</pre></td></tr></table></DL>
<P>

<A NAME="IDX1898"></A>
<DL>
<DT><U>Function:</U> <B>window-width</B> <I>&#38;optional window</I>
<DD>この関数は、<VAR>window</VAR>のコラム数を返す。
<VAR>window</VAR>がフレーム全体を占める場合、この値は、
当該フレームにおける<CODE>frame-width</CODE>の値と同じである。
この幅には、ウィンドウのスクロールバーや
左右のウィンドウを隔てる文字`<SAMP>|</SAMP>'のコラムは含まない。
<P>

<VAR>window</VAR>が<CODE>nil</CODE>であると、この関数は選択されているウィンドウを使う。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(window-width)
     => 80
</pre></td></tr></table></DL>
<P>

<A NAME="IDX1899"></A>
<DL>
<DT><U>Function:</U> <B>window-edges</B> <I>&#38;optional window</I>
<DD>この関数は、<VAR>window</VAR>の四隅の座標から成るリストを返す。
<VAR>window</VAR>が<CODE>nil</CODE>であると、選択されているウィンドウを使う。
<P>

list内の順番は<CODE>(<VAR>left</VAR> <VAR>top</VAR> <VAR>right</VAR> <VAR>bottom</VAR>)</CODE>
（つまり、左端、上端、右端、下端）であり、
フレームの左上隅を0としてすべての要素は0を基準とする。
要素<VAR>right</VAR>は<VAR>window</VAR>が使用する右端のコラムより1大きく、
<VAR>bottom</VAR>は<VAR>window</VAR>が使用する下端より1大きく
モード行と同じである。
<P>

左右に隣り合ったウィンドウがある場合、
右隣にウィンドウがあるウィンドウの右端の値には、
ウィンドウを隔てる区切りの幅が含まれる。
この区切りは、文字`<SAMP>|</SAMP>'のコラムであるかスクロールバーである。
ウィンドウの幅にはこの区切りは含まないため、
この場合、左端と右端の差は幅に等しくない。
<P>

典型的な24行の端末でウィンドウが1つの場合に得られる結果を示す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(window-edges (selected-window))
     => (0 0 80 23)
</pre></td></tr></table><P>

下端が23行目であるのは、最下行はエコー領域だからである。
<P>

<VAR>window</VAR>がフレームの左上隅にあると、
<VAR>bottom</VAR>は<CODE>(window-height)</CODE>の値に等しく、
<VAR>right</VAR>は<CODE>(window-width)</CODE>の値にほぼ等しく
<A NAME="DOCF9" HREF="elisp_fot.html#FOOT9">(9)</A>、
<VAR>top</VAR>と<VAR>left</VAR>は0である。
たとえば、つぎのウィンドウは`<SAMP>0 0 5 8</SAMP>'である。
当該フレームには8コラムより多くあり、
ウィンドウの最終コラム（7コラム目）はテキストではなく境界であると仮定する。
最後の行（4行目）はモード行であり、ここでは`<SAMP>xxxxxxxxx</SAMP>'で示した。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>           0
           _______
        0 |       |
          |       |
          |       |
          |       |
          xxxxxxxxx  4

                  7
</pre></td></tr></table><P>

左右に隣り合ったウィンドウがあるときには、
フレームの右端にないウィンドウの最後のコラムは区切りである。
区切りは、ウィンドウの幅では1コラムか2コラム占める。
左側の区切りは左隣のウィンドウに属するので、
ウィンドウには左側の区切りは含まれない。
<P>

つぎの例では、フレームは7コラム幅であるとする。
すると、左側のウィンドウの四隅は`<SAMP>0 0 4 3</SAMP>'であり、
右側のウィンドウの四隅は`<SAMP>4 0 7 3</SAMP>'である。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>           ___ ___
          |   |   |
          |   |   |
          xxxxxxxxx

           0  34  7
</pre></td></tr></table></DL>
<P>

<A NAME="Resizing Windows"></A>
<HR SIZE="6">
<br><A NAME="SEC430"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC429"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC431"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Resizing Windows"></A>
<H2> 27.14 ウィンドウサイズの変更 </H2>
<!--docid::SEC430::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Resizing%20Windows">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Resizing%20Windows</a>"<br>
"texi/elisp21/ウィンドウサイズの変更"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6%A5%B5%A5%A4%A5%BA%A4%CE%CA%D1%B9%B9">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX1900"></A>
<A NAME="IDX1901"></A>
<A NAME="IDX1902"></A>
<P>

ウィンドウサイズ関数は2つに大別できます。
ウィンドウサイズを変える上位レベルのコマンドと
ウィンドウサイズを調べる下位レベルの関数です。
Emacsでは重なり合ったウィンドウやウィンドウのあいだに隙間を許さないので、
1つのウィンドウの大きさを変えると別のウィンドウにも影響します。
<P>

<A NAME="IDX1903"></A>
<DL>
<DT><U>コマンド:</U> <B>enlarge-window</B> <I>size &#38;optional horizontal</I>
<DD>この関数は、隣り合うウィンドウから場所を奪って、
選択されているウィンドウを<VAR>size</VAR>行高くする。
1つのウィンドウから場所を奪い取り、奪い尽くすと別のウィンドウから取る。
場所を奪われたウィンドウが<CODE>window-min-height</CODE>行未満になると、
そのウィンドウは消える。
<P>

<VAR>horizontal</VAR>が<CODE>nil</CODE>以外であると、
この関数は、隣り合うウィンドウから場所を奪って、
選択されているウィンドウを<VAR>size</VAR>コラム広くする。
場所を奪われたウィンドウが<CODE>window-min-width</CODE>コラム未満になると、
そのウィンドウは消える。
<P>

指定した大きさがウィンドウのフレームの大きさを超える場合、
この関数は、ウィンドウがフレームの高さ（あるいは幅）全体を占めるようにする。
<P>

<VAR>size</VAR>が負であると、この関数は-<VAR>size</VAR>行／コラムだけ
ウィンドウを縮める。
ウィンドウが（<CODE>window-min-height</CODE>と<CODE>window-min-width</CODE>の）
最小サイズより小さくなると、<CODE>enlarge-window</CODE>は
当該ウィンドウを削除する。
<P>

<CODE>enlarge-window</CODE>は<CODE>nil</CODE>を返す。
</DL>
<P>

<A NAME="IDX1904"></A>
<DL>
<DT><U>コマンド:</U> <B>enlarge-window-horizontally</B> <I>columns</I>
<DD>この関数は、選択されているウィンドウを<VAR>columns</VAR>コラム広くする。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(defun enlarge-window-horizontally (columns)
  (enlarge-window columns t))
</pre></td></tr></table></DL>
<P>

<A NAME="IDX1905"></A>
<DL>
<DT><U>コマンド:</U> <B>shrink-window</B> <I>size &#38;optional horizontal</I>
<DD>この関数は<CODE>enlarge-window</CODE>に似ているが引数<VAR>size</VAR>の符号を変えて、
選択されているウィンドウを縮めて指定行数（コラム数）を
他のウィンドウに与える。
ウィンドウが<CODE>window-min-height</CODE>や<CODE>window-min-width</CODE>未満に縮むと、
そのウィンドウは消える。
<P>

<VAR>size</VAR>が負であると、ウィンドウは
-<VAR>size</VAR>行／コラムだけ伸びる。
</DL>
<P>

<A NAME="IDX1906"></A>
<DL>
<DT><U>コマンド:</U> <B>shrink-window-horizontally</B> <I>columns</I>
<DD>この関数は、選択されているウィンドウを<VAR>columns</VAR>コラム狭くする。
つぎのように定義できる。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(defun shrink-window-horizontally (columns)
  (shrink-window columns t))
</pre></td></tr></table></DL>
<P>

<A NAME="IDX1907"></A>
<DL>
<DT><U>コマンド:</U> <B>shrink-window-if-larger-than-buffer</B> <I>window</I>
<DD>このコマンドは、バッファの全内容を表示するに十分なだけの大きさに
<VAR>window</VAR>を縮めるが、<CODE>window-min-height</CODE>行未満にはしない。
<P>

しかし、バッファの全テキストを表示するにはウィンドウが小さすぎる場合や、
内容の一部がスクロールでスクリーンからはみ出している場合や、
ウィンドウの幅がフレームの幅と同じでない場合や、
ウィンドウがフレームの唯一のウィンドウである場合には、
このコマンドはなにもしない。
</DL>
<P>

<A NAME="IDX1908"></A>
つぎの2つの変数は、ウィンドウサイズを変える関数に最小の高さと幅を課します。
<P>

<A NAME="IDX1909"></A>
<DL>
<DT><U>User Option:</U> <B>window-min-height</B>
<DD>この変数の値は、ウィンドウが自動的に削除されるまでに
どの程度までウィンドウが短くなりうるかを決定する。
ウィンドウを<CODE>window-min-height</CODE>行未満に小さくすると自動的に削除され、
これより短いウィンドウは作成できない。
絶対的な最小の高さは2行（モード行に1行、バッファの表示に1行）である。
ウィンドウサイズを変える処理では、この変数が2未満であると2に設定し直す。
デフォルト値は4である。
</DL>
<P>

<A NAME="IDX1910"></A>
<DL>
<DT><U>User Option:</U> <B>window-min-width</B>
<DD>この変数の値は、ウィンドウが自動的に削除されるまでに
どの程度までウィンドウが狭くなりうるかを決定する。
ウィンドウを<CODE>window-min-width</CODE>コラム未満に小さくすると自動的に削除され、
これより狭いウィンドウは作成できない。
絶対的な最小の幅は1であり、それ未満は無視する。
デフォルト値は10である。
</DL>
<P>

<A NAME="Coordinates and Windows"></A>
<HR SIZE="6">
<br><A NAME="SEC431"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC430"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC432"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Coordinates and Windows"></A>
<H2> 27.15 座標とウィンドウ </H2>
<!--docid::SEC431::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Coordinates%20and%20Windows">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Coordinates%20and%20Windows</a>"<br>
"texi/elisp21/座標とウィンドウ"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%BA%C2%C9%B8%A4%C8%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

本節では、スクリーン座標をウィンドウに関連付ける方法を述べます。
<P>

<A NAME="IDX1911"></A>
<DL>
<DT><U>Function:</U> <B>window-at</B> <I>x y &#38;optional frame</I>
<DD>この関数は、フレーム<VAR>frame</VAR>において指定したカーソル位置を含んでいる
ウィンドウを返す。
座標<VAR>x</VAR>と<VAR>y</VAR>は、フレームの左上隅から文字単位で数える。
座標が範囲外であると<CODE>window-at</CODE>は<CODE>nil</CODE>を返す。
<P>

<VAR>frame</VAR>を省略すると、選択されているフレームを使う。
</DL>
<P>

<A NAME="IDX1912"></A>
<DL>
<DT><U>Function:</U> <B>coordinates-in-window-p</B> <I>coordinates window</I>
<DD>この関数は、指定したフレーム位置がウィンドウ<VAR>window</VAR>の中に
入るかどうかを検査する。
<P>

引数<VAR>coordinates</VAR>は、<CODE>(<VAR>x</VAR> . <VAR>y</VAR>)</CODE>の形のコンスセルである。
座標<VAR>x</VAR>と<VAR>y</VAR>は、スクリーンやフレームの左上隅から文字単位で数える。
<P>

<CODE>coordinates-in-window-p</CODE>が返す値が<CODE>nil</CODE>以外であると、
当該座標は<VAR>window</VAR>の内側にある。
つぎのように、この値はウィンドウ内での位置も表す。
<P>

<DL COMPACT>
<DT><CODE>(<VAR>relx</VAR> . <VAR>rely</VAR>)</CODE>
<DD>当該座標は<VAR>window</VAR>の内側である。
数<VAR>relx</VAR>と<VAR>rely</VAR>は、指定位置に対応するウィンドウ相対の座標であり、
ウィンドウの左上隅を0として数えたものである。
<P>

<DT><CODE>mode-line</CODE>
<DD>当該座標は<VAR>window</VAR>のモード行の内側である。
<P>

<DT><CODE>vertical-split</CODE>
<DD>当該座標は<VAR>window</VAR>と右隣のウィンドウのあいだの垂直行である。
ウィンドウにスクロールバーがない場合に限って、この値になる。
スクロールバーはウィンドウの外側であるとみなす。
<P>

<DT><CODE>nil</CODE>
<DD>当該座標は<VAR>window</VAR>のどこでもない。
</DL>
<P>

関数<CODE>coordinates-in-window-p</CODE>は、
<VAR>window</VAR>のフレームをつねに使うため、引数にフレームを必要としない。
</DL>
<P>

<A NAME="Window Configurations"></A>
<HR SIZE="6">
<br><A NAME="SEC432"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC431"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC433"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Window Configurations"></A>
<H2> 27.16 ウィンドウ構成 </H2>
<!--docid::SEC432::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Window%20Configurations">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Window%20Configurations</a>"<br>
"texi/elisp21/ウィンドウ構成"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6%B9%BD%C0%AE">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<A NAME="IDX1913"></A>
<A NAME="IDX1914"></A>
<A NAME="IDX1915"></A>
<P>

<EM>ウィンドウ構成</EM>（window configuration）は、
1つのフレームの全体の配置、つまり、
すべてのウィンドウ、それらの大きさ、表示しているバッファ、
各バッファの表示位置、ポイントとマークの値を記録します。
保存しておいたウィンドウ構成を復元すれば、
まえとまったく同じ配置に戻せます。
<P>

1つのフレームではなくすべてのフレームを記録するには、
ウィンドウ構成のかわりにフレーム構成を使います。
See 節 <A HREF="elisp_29.html#SEC450">28.12 フレーム構成</A>。
<P>

<A NAME="IDX1916"></A>
<DL>
<DT><U>Function:</U> <B>current-window-configuration</B>
<DD>この関数は、選択されているフレームの現在のウィンドウ構成を表す
新たなオブジェクトを返す。
ウィンドウ構成には、ウィンドウの個数、それらの大きさとカレントバッファ、
どのウィンドウが選択されているウィンドウであるか、
各ウィンドウが表示しているバッファ、表示開始位置、
ポイントとマークの位置が含まれる。
<CODE>window-min-height</CODE>、<CODE>window-min-width</CODE>、
<CODE>minibuffer-scroll-window</CODE>の値も含む。
例外はカレントバッファのポイントであり、その値は保存されない。
</DL>
<P>

<A NAME="IDX1917"></A>
<DL>
<DT><U>Function:</U> <B>set-window-configuration</B> <I>configuration</I>
<DD>この関数は、<VAR>configuration</VAR>で指定される
ウィンドウとバッファの構成に復元する。
引数<VAR>configuration</VAR>は、
<CODE>current-window-configuration</CODE>が返した値であること。
<VAR>configuration</VAR>を作成したフレームにおいて、
そのフレームが選択されているかどうかに関わらず、この構成を復元する。
<CODE>set-window-configuration</CODE>は、新たな構成が古いものと
実際に異なるのかどうか識別する方法を知らないため、
ウィンドウサイズの変更とつねにみなして
<CODE>window-size-change-functions</CODE>（see 節 <A HREF="elisp_28.html#SEC433">27.17 ウィンドウのスクロールとサイズ変更向けのフック</A>）の
実行を引き起こす。
<P>

<VAR>configuration</VAR>を保存したフレームがなくなっていると、
この関数は、3つの変数、<CODE>window-min-height</CODE>、
<CODE>window-min-width</CODE>、<CODE>minibuffer-scroll-window</CODE>を
復元するだけである。
<P>

<CODE>save-window-excursion</CODE>と同じ効果を得るための
この関数の使い方をつぎに示す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(let ((config (current-window-configuration)))
  (unwind-protect
      (progn (split-window-vertically nil)
             <small>...</small>)
    (set-window-configuration config)))
</pre></td></tr></table></DL>
<P>

<A NAME="IDX1918"></A>
<DL>
<DT><U>Special Form:</U> <B>save-window-excursion</B> <I>forms<small>...</small></I>
<DD>このスペシャルフォームは、ウィンドウ構成を記録し、
<VAR>forms</VAR>を順に評価し、もとのウィンドウ構成に復元する。
ウィンドウ構成には、ポイントの値と可視なバッファの部分が含まれる。
また、選択されているウィンドウも含む。
しかし、これにはカレントバッファのポイント値は含まれないため、
ポイント位置を保存したい場合には<CODE>save-excursion</CODE>も使う。
<P>

<CODE>save-selected-window</CODE>で十分なときには、この構文を使わないこと。
<P>

<CODE>save-window-excursion</CODE>から抜けると、
<CODE>window-size-change-functions</CODE>の実行をつねに引き起こす。
（復元した構成と<VAR>forms</VAR>の終りでの構成が実際に異なるかどうかを
識別する方法を知らない。）
<P>

戻り値は、<VAR>forms</VAR>の最後のフォームの値である。
例を示す。
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(split-window)
     => #&#60;window 25 on control.texi&#62;
(setq w (selected-window))
     => #&#60;window 19 on control.texi&#62;
(save-window-excursion
  (delete-other-windows w)
  (switch-to-buffer "foo")
  'do-something)
     => do-something
     ;; スクリーンはここでふたたび分割される
</pre></td></tr></table></DL>
<P>

<A NAME="IDX1919"></A>
<DL>
<DT><U>Function:</U> <B>window-configuration-p</B> <I>object</I>
<DD>この関数は、<VAR>object</VAR>がウィンドウ構成であれば<CODE>t</CODE>を返す。
</DL>
<P>

<A NAME="IDX1920"></A>
<DL>
<DT><U>Function:</U> <B>compare-window-configurations</B> <I>config1 config2</I>
<DD>この関数は、ウィンドウの構造を基に2つのウィンドウ構成を比較する。
ポイントとマークの値、保存されたスクロール位置は無視するので、
それらが異なっていても<CODE>t</CODE>を返す。
<P>

関数<CODE>equal</CODE>でも2つのウィンドウ構成を比較できるが、
保存されたポイントやマークが違うだけであっても異なる部分があると、
等しくない構成とみなす。
</DL>
<P>

ウィンドウ構成の内部を調べる基本関数には意味があるでしょうが、
実装してありません。
実装するだけの価値があるほど有用なのかはっきりしないのです。
<P>

<A NAME="Window Hooks"></A>
<HR SIZE="6">
<br><A NAME="SEC433"> </A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_28.html#SEC432"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_29.html#SEC434"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<A NAME="Window Hooks"></A>
<H2> 27.17 ウィンドウのスクロールとサイズ変更向けのフック </H2>
<!--docid::SEC433::-->
<div class="info">URL="<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Window%20Hooks">http://www.bookshelf.jp/cgi-bin/goto.cgi?file=elisp21&node=Window%20Hooks</a>"<br>
"texi/elisp21/ウィンドウのスクロールとサイズ変更向けのフック"への<a href="http://www.bookshelf.jp/pukiwiki/pukiwiki.php?refer=Meadow%20memo&cmd=read&page=texi%2Felisp21%2F%A5%A6%A5%A3%A5%F3%A5%C9%A5%A6%A4%CE%A5%B9%A5%AF%A5%ED%A1%BC%A5%EB%A4%C8%A5%B5%A5%A4%A5%BA%CA%D1%B9%B9%B8%FE%A4%B1%A4%CE%A5%D5%A5%C3%A5%AF">コメント</a>(無し)</div><FORM METHOD="GET" ACTION="http://www.bookshelf.jp/cgi-bin/wwwsrch.cgi"><div class="info">検索<INPUT TYPE=text NAME=WORD SIZE=30><INPUT TYPE=hidden NAME=index VALUE=memo CHECKED><INPUT TYPE=hidden NAME=target VALUE=all CHECKED><INPUT TYPE=hidden NAME="memoall" VALUE="on" CHECKED><INPUT TYPE=hidden NAME=ANDOR VALUE=and CHECKED><INPUT TYPE=radio NAME=lisp VALUE=off CHECKED>全文<INPUT TYPE=radio NAME=lisp VALUE=on>Elisp<INPUT TYPE=submit VALUE="検索"></div></FORM>
<P>

本節では、ウィンドウにバッファの別の部分を表示したり
別のバッファを表示するたびに、
Lispプログラムが動作する方法を述べます。
変更できる動作は3種類、ウィンドウをスクロールするとき、
ウィンドウでバッファを切り替えるとき、
ウィンドウサイズを変えるときです。
最初の2つの動作では<CODE>window-scroll-functions</CODE>を実行し、
3つ目は<CODE>window-size-change-functions</CODE>を実行します。
これらのフックの模範的な使用例は遅延ロック（lazy-lock）モードの
実装の中にあります。
<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=emacs21&node=Support%20Modes">GNU Emacs マニュアル</a>を参照してください。
<P>

<A NAME="IDX1921"></A>
<DL>
<DT><U>Variable:</U> <B>window-scroll-functions</B>
<DD>この変数は、スクロールによりウィンドウを再表示するまえに
Emacsが呼び出すべき関数のリストを保持する。
各関数はウィンドウと新たな表示開始位置の2つの引数で呼ばれるため、
これはノーマルフックではない。
<P>

ウィンドウに別のバッファを表示する場合でも
これらの関数が実行される。
<P>

これらの関数で<CODE>window-end</CODE>（see 節 <A HREF="elisp_28.html#SEC426">27.10 ウィンドウの開始位置</A>）を使うには
注意が必要である。
更新された値が必要なときには、確実に更新値を得るために
引数<VAR>update</VAR>を使う必要がある。
</DL>
<P>

<A NAME="IDX1922"></A>
<DL>
<DT><U>Variable:</U> <B>window-size-change-functions</B>
<DD>この変数は、いかなる理由であれウィンドウサイズが変わるときに
呼び出される関数のリストを保持する。
関数は、再表示のたびにサイズ変更が起きたフレームごとに呼ばれる。
<P>

各関数はフレームを唯一の引数として受け取る。
当該フレームで大きさが変更されたウィンドウを探す直接的な方法や
正確な方法はない。
しかし、サイズ変更関数が呼ばれるたびに
既存のウィンドウとそれらの大きさを記録すれば、
現在の大きさと以前の大きさを比較できる。
<P>

ウィンドウを作成したり削除してもサイズ変更とみなすので、
これらの関数が呼び出される。
フレームの大きさが変わると既存のウィンドウの大きさも変わるので、
これもサイズ変更とみなす。
<P>

これらの関数で<CODE>save-window-excursion</CODE>
（see 節 <A HREF="elisp_28.html#SEC432">27.16 ウィンドウ構成</A>）を使うのはよくない。
この関数はつねにサイズ変更とみなしこれらの関数を呼び出し、
これが繰り返されてしまうからである。
多くの場合、ここで必要なのは<CODE>save-selected-window</CODE>
（see 節 <A HREF="elisp_28.html#SEC420">27.4 ウィンドウの選択</A>）である。
</DL>
<P>

<A NAME="IDX1923"></A>
<DL>
<DT><U>Variable:</U> <B>redisplay-end-trigger-functions</B>
<DD><A NAME="IDX1924"></A>
このアブノーマルフックは、ウィンドウの再表示において、
指定された終了トリガ位置を超えて伸びるテキストを使うたびに実行される。
終了トリガ位置は関数<CODE>set-window-redisplay-end-trigger</CODE>で設定する。
フック関数は2つの引数、ウィンドウと終了トリガ位置で呼ばれる。
終了トリガ位置として<CODE>nil</CODE>を保存するとこの機能をオフにし、
フックを実行直後にトリガ値は自動的に<CODE>nil</CODE>に再設定される。
</DL>
<P>

<A NAME="IDX1925"></A>
<DL>
<DT><U>Function:</U> <B>set-window-redisplay-end-trigger</B> <I>window position</I>
<DD><A NAME="IDX1926"></A>
この関数は、<VAR>window</VAR>の終了トリガ位置を<VAR>position</VAR>とする。
</DL>
<P>

<A NAME="IDX1927"></A>
<DL>
<DT><U>Function:</U> <B>window-redisplay-end-trigger</B> <I>window</I>
<DD><A NAME="IDX1928"></A>
この関数は、<VAR>window</VAR>の現在の終了トリガ位置を返す。
</DL>
<P>

<A NAME="IDX1929"></A>
<DL>
<DT><U>Variable:</U> <B>window-configuration-change-hook</B>
<DD><A NAME="IDX1930"></A>
このノーマルフックは、
既存のフレームのウィンドウの構成を変更するたびに呼び出される。
これには、ウィンドウの分割や削除、ウィンドウサイズの変更、
ウィンドウに別のバッファを表示することが含まれる。
このフックを実行するときには、
ウィンドウの構成が変更されたフレームが選択されているフレームである。
</DL>
<A NAME="Frames"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[ &lt;&lt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[ &gt;&gt; ]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp.html#SEC_Top">表紙</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_toc.html#SEC_Contents">目次</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="elisp_48.html#SEC681">索引</A>]</TD>
<TD> [<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=search">検索</a>] [<a href="#top">上端</a> / <a href="#bottom">下端</a>]</TD></TR></TABLE>
<a name="bottom"> </a>
<script type="text/javascript" src="style2.js"></script>
<div class="footer">
    <br>
    このページはMeadow (Emacs) の紹介ページです <br>
このWebページの各文書は自由にリンク・複製・再配布・改変していただいて構いません．
<br>ただし，複製・再配布・改変の場合は Meadow Memo のURLを記載しておいて下さい．<br>
<a href="http://www.bookshelf.jp/cgi-bin/goto.cgi?file=meadow&node=about%20link">Medow memoへのリンクについて</a>．<br>

間違い，要望等があれば<a href="mailto:akihisa@mail.ne.jp">akihisa@mail.ne.jp</a> か下記でどうぞ<br>

<br>

<FORM METHOD="post" ACTION="http://www.bookshelf.jp/cgi-bin/wwwmail.cgi" >
お名前：<INPUT TYPE="text" NAME="name" SIZE="30" MAXLENGTH="40" VALUE="ななしさん"><br>
メールアドレス：<INPUT TYPE="text" NAME="EMAIL" SIZE="25" MAXLENGTH="60" VALUE="secret@mail.adr"><br>
<input type="hidden" name="HPAGE" value="">
つっこみ：<br><TEXTAREA NAME="MESSAGE" ROWS="5" COLS="50">
</TEXTAREA><br><br>
<INPUT TYPE="submit" VALUE="送信">
<INPUT TYPE="reset" VALUE="クリア">
</FORM>

<br><A HREF="http://www.bookshelf.jp/cgi-bin/xct.cgi">ページ別カウンタ</a>
<br> Since 2002/12/13 <br>
</div>

</BODY>

</HTML>
